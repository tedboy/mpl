

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>matplotlib.text &mdash; PROJECT_NAME 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PROJECT_NAME 1 documentation" href="../../index.html"/>
        <link rel="up" title="matplotlib" href="../matplotlib.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PROJECT_NAME
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.pyplot.html">1. matplotlib.pyplot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.cm.html">2. matplotlib.cm</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PROJECT_NAME</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../matplotlib.html">matplotlib</a> &raquo;</li>
        
      <li>matplotlib.text</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for matplotlib.text</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Classes for including text in a figure.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">matplotlib.externals</span> <span class="k">import</span> <span class="n">six</span>
<span class="kn">from</span> <span class="nn">matplotlib.externals.six.moves</span> <span class="k">import</span> <span class="nb">zip</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">import</span> <span class="nn">contextlib</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">cbook</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">rcParams</span>
<span class="kn">import</span> <span class="nn">matplotlib.artist</span> <span class="k">as</span> <span class="nn">artist</span>
<span class="kn">from</span> <span class="nn">matplotlib.artist</span> <span class="k">import</span> <span class="n">Artist</span>
<span class="kn">from</span> <span class="nn">matplotlib.cbook</span> <span class="k">import</span> <span class="n">is_string_like</span><span class="p">,</span> <span class="n">maxdict</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">docstring</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="k">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="k">import</span> <span class="n">FancyBboxPatch</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="k">import</span> <span class="n">FancyArrowPatch</span><span class="p">,</span> <span class="n">Rectangle</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="k">as</span> <span class="nn">mtransforms</span>
<span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="k">import</span> <span class="n">Affine2D</span><span class="p">,</span> <span class="n">Bbox</span><span class="p">,</span> <span class="n">Transform</span>
<span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="k">import</span> <span class="n">BboxBase</span><span class="p">,</span> <span class="n">BboxTransformTo</span>
<span class="kn">from</span> <span class="nn">matplotlib.lines</span> <span class="k">import</span> <span class="n">Line2D</span>
<span class="kn">from</span> <span class="nn">matplotlib.path</span> <span class="k">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">matplotlib.artist</span> <span class="k">import</span> <span class="n">allow_rasterization</span>

<span class="kn">from</span> <span class="nn">matplotlib.backend_bases</span> <span class="k">import</span> <span class="n">RendererBase</span>
<span class="kn">from</span> <span class="nn">matplotlib.textpath</span> <span class="k">import</span> <span class="n">TextPath</span>


<span class="k">def</span> <span class="nf">_process_text_args</span><span class="p">(</span><span class="n">override</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s2">&quot;Return an override dict.  See :func:`~pyplot.text&#39; docstring for info&quot;</span>

    <span class="k">if</span> <span class="n">fontdict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">override</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fontdict</span><span class="p">)</span>

    <span class="n">override</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">override</span>


<span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<span class="k">def</span> <span class="nf">_wrap_text</span><span class="p">(</span><span class="n">textobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Temporarily inserts newlines to the text if the wrap option is enabled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">textobj</span><span class="o">.</span><span class="n">get_wrap</span><span class="p">():</span>
        <span class="n">old_text</span> <span class="o">=</span> <span class="n">textobj</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">textobj</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">_get_wrapped_text</span><span class="p">())</span>
            <span class="k">yield</span> <span class="n">textobj</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">textobj</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="n">old_text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">textobj</span>


<span class="c1"># Extracted from Text&#39;s method to serve as a function</span>
<span class="k">def</span> <span class="nf">get_rotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the text angle as float. The returned</span>
<span class="sd">    angle is between 0 and 360 deg.</span>

<span class="sd">    *rotation* may be &#39;horizontal&#39;, &#39;vertical&#39;, or a numeric value in degrees.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="n">isString</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">isString</span> <span class="ow">and</span> <span class="n">rotation</span> <span class="o">==</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">rotation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">isString</span> <span class="ow">and</span> <span class="n">rotation</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">):</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="mf">90.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;rotation is </span><span class="si">{0}</span><span class="s2"> expected either &#39;horizontal&#39;&quot;</span>
                             <span class="s2">&quot; &#39;vertical&#39;, numeric value or&quot;</span>
                             <span class="s2">&quot;None&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rotation</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">angle</span> <span class="o">%</span> <span class="mi">360</span>
<span class="c1"># these are not available for the object inspector until after the</span>
<span class="c1"># class is build so we define an initial set here for the init</span>
<span class="c1"># function and they will be overridden after object defn</span>
<span class="n">docstring</span><span class="o">.</span><span class="n">interpd</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">Text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    ========================== ================================================</span>
<span class="s2">    Property                   Value</span>
<span class="s2">    ========================== ================================================</span>
<span class="s2">    alpha                      float or None</span>
<span class="s2">    animated                   [True | False]</span>
<span class="s2">    backgroundcolor            any matplotlib color</span>
<span class="s2">    bbox                       rectangle prop dict plus key &#39;pad&#39; which is a</span>
<span class="s2">                               pad in points; if a boxstyle is supplied as</span>
<span class="s2">                               a string, then pad is instead a fraction</span>
<span class="s2">                               of the font size</span>
<span class="s2">    clip_box                   a matplotlib.transform.Bbox instance</span>
<span class="s2">    clip_on                    [True | False]</span>
<span class="s2">    color                      any matplotlib color</span>
<span class="s2">    family                     [&#39;serif&#39; | &#39;sans-serif&#39; | &#39;cursive&#39; |</span>
<span class="s2">                                &#39;fantasy&#39; | &#39;monospace&#39;]</span>
<span class="s2">    figure                     a matplotlib.figure.Figure instance</span>
<span class="s2">    fontproperties             a matplotlib.font_manager.FontProperties</span>
<span class="s2">                               instance</span>
<span class="s2">    horizontalalignment or ha  [&#39;center&#39; | &#39;right&#39; | &#39;left&#39;]</span>
<span class="s2">    label                      any string</span>
<span class="s2">    linespacing                float</span>
<span class="s2">    lod                        [True | False]</span>
<span class="s2">    multialignment             [&#39;left&#39; | &#39;right&#39; | &#39;center&#39; ]</span>
<span class="s2">    name or fontname           string e.g.,</span>
<span class="s2">                               [&#39;Sans&#39; | &#39;Courier&#39; | &#39;Helvetica&#39; ...]</span>
<span class="s2">    position                   (x,y)</span>
<span class="s2">    rotation                   [ angle in degrees &#39;vertical&#39; | &#39;horizontal&#39;</span>
<span class="s2">    rotation_mode              [ None | &#39;anchor&#39;]</span>
<span class="s2">    size or fontsize           [size in points | relative size e.g., &#39;smaller&#39;,</span>
<span class="s2">                                                                  &#39;x-large&#39;]</span>
<span class="s2">    style or fontstyle         [ &#39;normal&#39; | &#39;italic&#39; | &#39;oblique&#39;]</span>
<span class="s2">    text                       string</span>
<span class="s2">    transform                  a matplotlib.transform transformation instance</span>
<span class="s2">    usetex                     [True | False | None]</span>
<span class="s2">    variant                    [&#39;normal&#39; | &#39;small-caps&#39;]</span>
<span class="s2">    verticalalignment or va    [&#39;center&#39; | &#39;top&#39; | &#39;bottom&#39; | &#39;baseline&#39;]</span>
<span class="s2">    visible                    [True | False]</span>
<span class="s2">    weight or fontweight       [&#39;normal&#39; | &#39;bold&#39; | &#39;heavy&#39; | &#39;light&#39; |</span>
<span class="s2">                                &#39;ultrabold&#39; | &#39;ultralight&#39;]</span>
<span class="s2">    wrap                       [True | False]</span>
<span class="s2">    x                          float</span>
<span class="s2">    y                          float</span>
<span class="s2">    zorder                     any number</span>
<span class="s2">    ========================== ===============================================</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c1"># TODO : This function may move into the Text class as a method. As a</span>
<span class="c1"># matter of fact, The information from the _get_textbox function</span>
<span class="c1"># should be available during the Text._get_layout() call, which is</span>
<span class="c1"># called within the _get_textbox. So, it would better to move this</span>
<span class="c1"># function as a method with some refactoring of _get_layout method.</span>


<span class="k">def</span> <span class="nf">_get_textbox</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the bounding box of the text. Unlike</span>
<span class="sd">    :meth:`matplotlib.text.Text.get_extents` method, The bbox size of</span>
<span class="sd">    the text before the rotation is calculated.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">projected_xs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">projected_ys</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">())</span>
    <span class="n">tr</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="n">theta</span><span class="p">)</span>

    <span class="n">_</span><span class="p">,</span> <span class="n">parts</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">_get_layout</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">wh</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">wh</span>

        <span class="n">xt1</span><span class="p">,</span> <span class="n">yt1</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">yt1</span> <span class="o">-=</span> <span class="n">d</span>
        <span class="n">xt2</span><span class="p">,</span> <span class="n">yt2</span> <span class="o">=</span> <span class="n">xt1</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">yt1</span> <span class="o">+</span> <span class="n">h</span>

        <span class="n">projected_xs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">xt1</span><span class="p">,</span> <span class="n">xt2</span><span class="p">])</span>
        <span class="n">projected_ys</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">yt1</span><span class="p">,</span> <span class="n">yt2</span><span class="p">])</span>

    <span class="n">xt_box</span><span class="p">,</span> <span class="n">yt_box</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">projected_xs</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">projected_ys</span><span class="p">)</span>
    <span class="n">w_box</span><span class="p">,</span> <span class="n">h_box</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">projected_xs</span><span class="p">)</span> <span class="o">-</span> <span class="n">xt_box</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">projected_ys</span><span class="p">)</span> <span class="o">-</span> <span class="n">yt_box</span>

    <span class="n">tr</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

    <span class="n">x_box</span><span class="p">,</span> <span class="n">y_box</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">xt_box</span><span class="p">,</span> <span class="n">yt_box</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">x_box</span><span class="p">,</span> <span class="n">y_box</span><span class="p">,</span> <span class="n">w_box</span><span class="p">,</span> <span class="n">h_box</span>


<div class="viewcode-block" id="Text"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.html#matplotlib.pyplot.Text">[docs]</a><span class="k">class</span> <span class="nc">Text</span><span class="p">(</span><span class="n">Artist</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle storing and drawing of text in window or data coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">zorder</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">_cached</span> <span class="o">=</span> <span class="n">maxdict</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Text(</span><span class="si">%g</span><span class="s2">,</span><span class="si">%g</span><span class="s2">,</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="p">))</span>

<div class="viewcode-block" id="Text.__init__"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.__init__.html#matplotlib.pyplot.Text.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>           <span class="c1"># defaults to rc params</span>
                 <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
                 <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
                 <span class="n">multialignment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fontproperties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># defaults to FontProperties()</span>
                 <span class="n">rotation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">linespacing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">rotation_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">usetex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>          <span class="c1"># defaults to rcParams[&#39;text.usetex&#39;]</span>
                 <span class="n">wrap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span>
                 <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a :class:`~matplotlib.text.Text` instance at *x*, *y*</span>
<span class="sd">        with string *text*.</span>

<span class="sd">        Valid kwargs are</span>
<span class="sd">        %(Text)s</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Artist</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

        <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;text.color&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fontproperties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fontproperties</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">is_string_like</span><span class="p">(</span><span class="n">fontproperties</span><span class="p">):</span>
            <span class="n">fontproperties</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">(</span><span class="n">fontproperties</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_usetex</span><span class="p">(</span><span class="n">usetex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wrap</span><span class="p">(</span><span class="n">wrap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalalignment</span> <span class="o">=</span> <span class="n">verticalalignment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalalignment</span> <span class="o">=</span> <span class="n">horizontalalignment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_multialignment</span> <span class="o">=</span> <span class="n">multialignment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">=</span> <span class="n">rotation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span> <span class="o">=</span> <span class="n">fontproperties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># a FancyBboxPatch instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">linespacing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">linespacing</span> <span class="o">=</span> <span class="mf">1.2</span>   <span class="c1"># Maybe use rcParam later.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linespacing</span> <span class="o">=</span> <span class="n">linespacing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation_mode</span><span class="p">(</span><span class="n">rotation_mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.update"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.update.html#matplotlib.pyplot.Text.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update properties from a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;bbox&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bbox</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_bbox</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>  <span class="c1"># depends on font properties</span></div>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>
        <span class="c1"># remove the cached _renderer (if it exists)</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;_renderer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">d</span>

<div class="viewcode-block" id="Text.contains"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.contains.html#matplotlib.pyplot.Text.contains">[docs]</a>    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Test whether the mouse event occurred in the patch.</span>

<span class="sd">        In the case of text, a hit is true anywhere in the</span>
<span class="sd">        axis-aligned bounding-box containing the text.</span>

<span class="sd">        Returns True or False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">six</span><span class="o">.</span><span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">{}</span>

        <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">b</span> <span class="o">+</span> <span class="n">h</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">mouseevent</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">mouseevent</span><span class="o">.</span><span class="n">y</span>
        <span class="n">inside</span> <span class="o">=</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">t</span><span class="p">)</span>
        <span class="n">cattr</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># if the text has a surrounding patch, also check containment for it,</span>
        <span class="c1"># and merge the results with the results for the text.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="p">:</span>
            <span class="n">patch_inside</span><span class="p">,</span> <span class="n">patch_cattr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)</span>
            <span class="n">inside</span> <span class="o">=</span> <span class="n">inside</span> <span class="ow">or</span> <span class="n">patch_inside</span>
            <span class="n">cattr</span><span class="p">[</span><span class="s2">&quot;bbox_patch&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">patch_cattr</span>

        <span class="k">return</span> <span class="n">inside</span><span class="p">,</span> <span class="n">cattr</span></div>

    <span class="k">def</span> <span class="nf">_get_xy_display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;get the (possibly unit converted) transformed x, y in display coords&#39;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unitless_position</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_get_multialignment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multialignment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multialignment</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalalignment</span>

<div class="viewcode-block" id="Text.get_rotation"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_rotation.html#matplotlib.pyplot.Text.get_rotation">[docs]</a>    <span class="k">def</span> <span class="nf">get_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;return the text angle as float in degrees&#39;</span>
        <span class="k">return</span> <span class="n">get_rotation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span><span class="p">)</span>  <span class="c1"># string_or_number -&gt; number</span></div>

<div class="viewcode-block" id="Text.set_rotation_mode"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_rotation_mode.html#matplotlib.pyplot.Text.set_rotation_mode">[docs]</a>    <span class="k">def</span> <span class="nf">set_rotation_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set text rotation mode. If &quot;anchor&quot;, the un-rotated text</span>
<span class="sd">        will first aligned according to their *ha* and</span>
<span class="sd">        *va*, and then will be rotated with the alignement</span>
<span class="sd">        reference point as a origin. If None (default), the text will be</span>
<span class="sd">        rotated first then will be aligned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_mode</span> <span class="o">=</span> <span class="n">m</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown rotation_mode : </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.get_rotation_mode"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_rotation_mode.html#matplotlib.pyplot.Text.get_rotation_mode">[docs]</a>    <span class="k">def</span> <span class="nf">get_rotation_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;get text rotation mode&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_mode</span></div>

<div class="viewcode-block" id="Text.update_from"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.update_from.html#matplotlib.pyplot.Text.update_from">[docs]</a>    <span class="k">def</span> <span class="nf">update_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="s1">&#39;Copy properties from other to self&#39;</span>
        <span class="n">Artist</span><span class="o">.</span><span class="n">update_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_multialignment</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_multialignment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalalignment</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_verticalalignment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalalignment</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_horizontalalignment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_rotation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_picker</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_picker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linespacing</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_linespacing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

    <span class="k">def</span> <span class="nf">_get_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the extent (bbox) of the text together with</span>
<span class="sd">        multiple-alignment information. Note that it returns an extent</span>
<span class="sd">        of a rotated text when necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_prop_tup</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="n">horizLayout</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">thisx</span><span class="p">,</span> <span class="n">thisy</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">whs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">horizLayout</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span> <span class="mi">4</span><span class="p">))</span>

        <span class="c1"># Find full vertical extent of font,</span>
        <span class="c1"># including ascenders and descenders:</span>
        <span class="n">tmp</span><span class="p">,</span> <span class="n">lp_h</span><span class="p">,</span> <span class="n">lp_bl</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">get_text_width_height_descent</span><span class="p">(</span><span class="s1">&#39;lp&#39;</span><span class="p">,</span>
                                                         <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="p">,</span>
                                                         <span class="n">ismath</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">offsety</span> <span class="o">=</span> <span class="p">(</span><span class="n">lp_h</span> <span class="o">-</span> <span class="n">lp_bl</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linespacing</span>

        <span class="n">baseline</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">clean_line</span><span class="p">,</span> <span class="n">ismath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_math_text</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">clean_line</span><span class="p">:</span>
                <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">get_text_width_height_descent</span><span class="p">(</span><span class="n">clean_line</span><span class="p">,</span>
                                                        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="p">,</span>
                                                        <span class="n">ismath</span><span class="o">=</span><span class="n">ismath</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>

            <span class="c1"># For multiline text, increase the line spacing when the</span>
            <span class="c1"># text net-height(excluding baseline) is larger than that</span>
            <span class="c1"># of a &quot;l&quot; (e.g., use of superscripts), which seems</span>
            <span class="c1"># what TeX does.</span>
            <span class="n">h</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">lp_h</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">lp_bl</span><span class="p">)</span>

            <span class="n">whs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span>

            <span class="n">baseline</span> <span class="o">=</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">d</span><span class="p">)</span> <span class="o">-</span> <span class="n">thisy</span>
            <span class="n">thisy</span> <span class="o">-=</span> <span class="nb">max</span><span class="p">(</span><span class="n">offsety</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">d</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linespacing</span><span class="p">)</span>
            <span class="n">horizLayout</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">thisx</span><span class="p">,</span> <span class="n">thisy</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span>
            <span class="n">thisy</span> <span class="o">-=</span> <span class="n">d</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
            <span class="n">descent</span> <span class="o">=</span> <span class="n">d</span>

        <span class="n">ymin</span> <span class="o">=</span> <span class="n">horizLayout</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="n">horizLayout</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">horizLayout</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmin</span> <span class="o">+</span> <span class="n">width</span>

        <span class="c1"># get the rotation matrix</span>
        <span class="n">M</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate_deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">())</span>

        <span class="n">offsetLayout</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
        <span class="n">offsetLayout</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">horizLayout</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="c1"># now offset the individual text lines within the box</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># do the multiline aligment</span>
            <span class="n">malign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_multialignment</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">malign</span> <span class="o">==</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span>
                <span class="n">offsetLayout</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="n">horizLayout</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">elif</span> <span class="n">malign</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
                <span class="n">offsetLayout</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">width</span> <span class="o">-</span> <span class="n">horizLayout</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>

        <span class="c1"># the corners of the unrotated bounding box</span>
        <span class="n">cornersHoriz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">)],</span>
            <span class="n">np</span><span class="o">.</span><span class="n">float_</span><span class="p">)</span>
        <span class="n">cornersHoriz</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="n">descent</span>

        <span class="c1"># now rotate the bbox</span>
        <span class="n">cornersRotated</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">cornersHoriz</span><span class="p">)</span>

        <span class="n">txs</span> <span class="o">=</span> <span class="n">cornersRotated</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">tys</span> <span class="o">=</span> <span class="n">cornersRotated</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="c1"># compute the bounds of the rotated box</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">txs</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">txs</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">tys</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">tys</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>

        <span class="c1"># Now move the box to the target position offset the display</span>
        <span class="c1"># bbox by alignment</span>
        <span class="n">halign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalalignment</span>
        <span class="n">valign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verticalalignment</span>

        <span class="n">rotation_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation_mode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">rotation_mode</span> <span class="o">!=</span> <span class="s2">&quot;anchor&quot;</span><span class="p">:</span>
            <span class="c1"># compute the text location in display coords and the offsets</span>
            <span class="c1"># necessary to align the bbox with that location</span>
            <span class="k">if</span> <span class="n">halign</span> <span class="o">==</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span>
                <span class="n">offsetx</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">halign</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
                <span class="n">offsetx</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">width</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">offsetx</span> <span class="o">=</span> <span class="n">xmin</span>

            <span class="k">if</span> <span class="n">valign</span> <span class="o">==</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">valign</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">valign</span> <span class="o">==</span> <span class="s1">&#39;baseline&#39;</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">height</span><span class="p">)</span> <span class="o">-</span> <span class="n">baseline</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="n">ymin</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xmin1</span><span class="p">,</span> <span class="n">ymin1</span> <span class="o">=</span> <span class="n">cornersHoriz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">xmax1</span><span class="p">,</span> <span class="n">ymax1</span> <span class="o">=</span> <span class="n">cornersHoriz</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">halign</span> <span class="o">==</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span>
                <span class="n">offsetx</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmin1</span> <span class="o">+</span> <span class="n">xmax1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">elif</span> <span class="n">halign</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
                <span class="n">offsetx</span> <span class="o">=</span> <span class="n">xmax1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">offsetx</span> <span class="o">=</span> <span class="n">xmin1</span>

            <span class="k">if</span> <span class="n">valign</span> <span class="o">==</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymin1</span> <span class="o">+</span> <span class="n">ymax1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">elif</span> <span class="n">valign</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="n">ymax1</span>
            <span class="k">elif</span> <span class="n">valign</span> <span class="o">==</span> <span class="s1">&#39;baseline&#39;</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="n">ymax1</span> <span class="o">-</span> <span class="n">baseline</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">offsety</span> <span class="o">=</span> <span class="n">ymin1</span>

            <span class="n">offsetx</span><span class="p">,</span> <span class="n">offsety</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">offsetx</span><span class="p">,</span> <span class="n">offsety</span><span class="p">))</span>

        <span class="n">xmin</span> <span class="o">-=</span> <span class="n">offsetx</span>
        <span class="n">ymin</span> <span class="o">-=</span> <span class="n">offsety</span>

        <span class="n">bbox</span> <span class="o">=</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>

        <span class="c1"># now rotate the positions around the first x,y position</span>
        <span class="n">xys</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">offsetLayout</span><span class="p">)</span>
        <span class="n">xys</span> <span class="o">-=</span> <span class="p">(</span><span class="n">offsetx</span><span class="p">,</span> <span class="n">offsety</span><span class="p">)</span>

        <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span> <span class="o">=</span> <span class="n">xys</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">xys</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">whs</span><span class="p">,</span> <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">)),</span> <span class="n">descent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span>
        <span class="k">return</span> <span class="n">ret</span>

<div class="viewcode-block" id="Text.set_bbox"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_bbox.html#matplotlib.pyplot.Text.set_bbox">[docs]</a>    <span class="k">def</span> <span class="nf">set_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rectprops</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a bounding box around self.  rectprops are any settable</span>
<span class="sd">        properties for a FancyBboxPatch, e.g., facecolor=&#39;red&#39;, alpha=0.5.</span>

<span class="sd">          t.set_bbox(dict(facecolor=&#39;red&#39;, alpha=0.5))</span>

<span class="sd">        The default boxstyle is &#39;square&#39;. The mutation</span>
<span class="sd">        scale of the FancyBboxPatch is set to the fontsize.</span>

<span class="sd">        ACCEPTS: FancyBboxPatch prop dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">rectprops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">props</span> <span class="o">=</span> <span class="n">rectprops</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">boxstyle</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;boxstyle&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">pad</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pad&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">boxstyle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">boxstyle</span> <span class="o">=</span> <span class="s2">&quot;square&quot;</span>
                <span class="k">if</span> <span class="n">pad</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">pad</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># points</span>
                <span class="n">pad</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>  <span class="c1"># to fraction of font size</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">pad</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">pad</span> <span class="o">=</span> <span class="mf">0.3</span>

            <span class="c1"># boxstyle could be a callable or a string</span>
            <span class="k">if</span> <span class="n">is_string_like</span><span class="p">(</span><span class="n">boxstyle</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;pad&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">boxstyle</span><span class="p">:</span>
                <span class="n">boxstyle</span> <span class="o">+=</span> <span class="s2">&quot;,pad=</span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">pad</span>

            <span class="n">bbox_transmuter</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;bbox_transmuter&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span> <span class="o">=</span> <span class="n">FancyBboxPatch</span><span class="p">(</span>
                                    <span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
                                    <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span>
                                    <span class="n">boxstyle</span><span class="o">=</span><span class="n">boxstyle</span><span class="p">,</span>
                                    <span class="n">bbox_transmuter</span><span class="o">=</span><span class="n">bbox_transmuter</span><span class="p">,</span>
                                    <span class="n">transform</span><span class="o">=</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">(),</span>
                                    <span class="o">**</span><span class="n">props</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_clip_properties</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_bbox_patch"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_bbox_patch.html#matplotlib.pyplot.Text.get_bbox_patch">[docs]</a>    <span class="k">def</span> <span class="nf">get_bbox_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the bbox Patch object. Returns None if the</span>
<span class="sd">        FancyBboxPatch is not made.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span></div>

<div class="viewcode-block" id="Text.update_bbox_position_size"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.update_bbox_position_size.html#matplotlib.pyplot.Text.update_bbox_position_size">[docs]</a>    <span class="k">def</span> <span class="nf">update_bbox_position_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the location and the size of the bbox. This method</span>
<span class="sd">        should be used when the position and size of the bbox needs to</span>
<span class="sd">        be updated before actually drawing the bbox.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="p">:</span>

            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>

            <span class="c1"># don&#39;t use self.get_unitless_position here, which refers to text</span>
            <span class="c1"># position in Text, and dash position in TextWithDash:</span>
            <span class="n">posx</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">))</span>
            <span class="n">posy</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">))</span>

            <span class="n">posx</span><span class="p">,</span> <span class="n">posy</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">posx</span><span class="p">,</span> <span class="n">posy</span><span class="p">))</span>

            <span class="n">x_box</span><span class="p">,</span> <span class="n">y_box</span><span class="p">,</span> <span class="n">w_box</span><span class="p">,</span> <span class="n">h_box</span> <span class="o">=</span> <span class="n">_get_textbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">w_box</span><span class="p">,</span> <span class="n">h_box</span><span class="p">)</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">())</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">posx</span> <span class="o">+</span> <span class="n">x_box</span><span class="p">,</span> <span class="n">posy</span> <span class="o">+</span> <span class="n">y_box</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
            <span class="n">fontsize_in_pixel</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">set_mutation_scale</span><span class="p">(</span><span class="n">fontsize_in_pixel</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_draw_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">posx</span><span class="p">,</span> <span class="n">posy</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Update the location and the size of the bbox</span>
<span class="sd">        (FancyBboxPatch), and draw</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">x_box</span><span class="p">,</span> <span class="n">y_box</span><span class="p">,</span> <span class="n">w_box</span><span class="p">,</span> <span class="n">h_box</span> <span class="o">=</span> <span class="n">_get_textbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">w_box</span><span class="p">,</span> <span class="n">h_box</span><span class="p">)</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">())</span>
        <span class="n">tr</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">tr</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">posx</span> <span class="o">+</span> <span class="n">x_box</span><span class="p">,</span> <span class="n">posy</span> <span class="o">+</span> <span class="n">y_box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
        <span class="n">fontsize_in_pixel</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">set_mutation_scale</span><span class="p">(</span><span class="n">fontsize_in_pixel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_clip_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">clipprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">clip_box</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clipbox</span><span class="p">,</span>
                         <span class="n">clip_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clippath</span><span class="p">,</span>
                         <span class="n">clip_on</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clipon</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">clipprops</span><span class="p">)</span>

<div class="viewcode-block" id="Text.set_clip_box"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_clip_box.html#matplotlib.pyplot.Text.set_clip_box">[docs]</a>    <span class="k">def</span> <span class="nf">set_clip_box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clipbox</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the artist&#39;s clip :class:`~matplotlib.transforms.Bbox`.</span>

<span class="sd">        ACCEPTS: a :class:`matplotlib.transforms.Bbox` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_clip_box</span><span class="p">(</span><span class="n">clipbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_clip_properties</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.set_clip_path"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_clip_path.html#matplotlib.pyplot.Text.set_clip_path">[docs]</a>    <span class="k">def</span> <span class="nf">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the artist&#39;s clip path, which may be:</span>

<span class="sd">          * a :class:`~matplotlib.patches.Patch` (or subclass) instance</span>

<span class="sd">          * a :class:`~matplotlib.path.Path` instance, in which case</span>
<span class="sd">             an optional :class:`~matplotlib.transforms.Transform`</span>
<span class="sd">             instance may be provided, which will be applied to the</span>
<span class="sd">             path before using it for clipping.</span>

<span class="sd">          * *None*, to remove the clipping path</span>

<span class="sd">        For efficiency, if the path happens to be an axis-aligned</span>
<span class="sd">        rectangle, this method will set the clipping box to the</span>
<span class="sd">        corresponding rectangle and set the clipping path to *None*.</span>

<span class="sd">        ACCEPTS: [ (:class:`~matplotlib.path.Path`,</span>
<span class="sd">        :class:`~matplotlib.transforms.Transform`) |</span>
<span class="sd">        :class:`~matplotlib.patches.Patch` | None ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">transform</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_clip_properties</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.set_clip_on"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_clip_on.html#matplotlib.pyplot.Text.set_clip_on">[docs]</a>    <span class="k">def</span> <span class="nf">set_clip_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether artist uses clipping.</span>

<span class="sd">        When False artists will be visible out side of the axes which</span>
<span class="sd">        can lead to unexpected results.</span>

<span class="sd">        ACCEPTS: [True | False]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_clip_on</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_clip_properties</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_wrap"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_wrap.html#matplotlib.pyplot.Text.get_wrap">[docs]</a>    <span class="k">def</span> <span class="nf">get_wrap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the wrapping state for the text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrap</span></div>

<div class="viewcode-block" id="Text.set_wrap"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_wrap.html#matplotlib.pyplot.Text.set_wrap">[docs]</a>    <span class="k">def</span> <span class="nf">set_wrap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wrap</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the wrapping state for the text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrap</span> <span class="o">=</span> <span class="n">wrap</span></div>

    <span class="k">def</span> <span class="nf">_get_wrap_line_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the maximum line width for wrapping text based on the</span>
<span class="sd">        current orientation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">())</span>
        <span class="n">figure_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>

        <span class="c1"># Calculate available width based on text alignment</span>
        <span class="n">alignment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_horizontalalignment</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rotation_mode</span><span class="p">(</span><span class="s1">&#39;anchor&#39;</span><span class="p">)</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>

        <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_dist_to_box</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">figure_box</span><span class="p">)</span>
        <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_dist_to_box</span><span class="p">(</span>
            <span class="p">(</span><span class="mi">180</span> <span class="o">+</span> <span class="n">rotation</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span><span class="p">,</span>
            <span class="n">x0</span><span class="p">,</span>
            <span class="n">y0</span><span class="p">,</span>
            <span class="n">figure_box</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alignment</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
            <span class="n">line_width</span> <span class="o">=</span> <span class="n">left</span>
        <span class="k">elif</span> <span class="n">alignment</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
            <span class="n">line_width</span> <span class="o">=</span> <span class="n">right</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">line_width</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">min</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">line_width</span>

    <span class="k">def</span> <span class="nf">_get_dist_to_box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">figure_box</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the distance from the given points, to the boundaries</span>
<span class="sd">        of a rotated box in pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rotation</span> <span class="o">&gt;</span> <span class="mi">270</span><span class="p">:</span>
            <span class="n">quad</span> <span class="o">=</span> <span class="n">rotation</span> <span class="o">-</span> <span class="mi">270</span>
            <span class="n">h1</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">quad</span><span class="p">))</span>
            <span class="n">h2</span> <span class="o">=</span> <span class="p">(</span><span class="n">figure_box</span><span class="o">.</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span> <span class="o">-</span> <span class="n">quad</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">rotation</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
            <span class="n">quad</span> <span class="o">=</span> <span class="n">rotation</span> <span class="o">-</span> <span class="mi">180</span>
            <span class="n">h1</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">quad</span><span class="p">))</span>
            <span class="n">h2</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span> <span class="o">-</span> <span class="n">quad</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">rotation</span> <span class="o">&gt;</span> <span class="mi">90</span><span class="p">:</span>
            <span class="n">quad</span> <span class="o">=</span> <span class="n">rotation</span> <span class="o">-</span> <span class="mi">90</span>
            <span class="n">h1</span> <span class="o">=</span> <span class="p">(</span><span class="n">figure_box</span><span class="o">.</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">quad</span><span class="p">))</span>
            <span class="n">h2</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span> <span class="o">-</span> <span class="n">quad</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">h1</span> <span class="o">=</span> <span class="p">(</span><span class="n">figure_box</span><span class="o">.</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">rotation</span><span class="p">))</span>
            <span class="n">h2</span> <span class="o">=</span> <span class="p">(</span><span class="n">figure_box</span><span class="o">.</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span> <span class="o">-</span> <span class="n">rotation</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">h1</span><span class="p">,</span> <span class="n">h2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_rendered_text_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the width of a given text string, in pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span><span class="o">.</span><span class="n">get_text_width_height_descent</span><span class="p">(</span>
            <span class="n">text</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_fontproperties</span><span class="p">(),</span>
            <span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_wrapped_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a copy of the text with new lines added, so that</span>
<span class="sd">        the text is wrapped relative to the parent figure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Not fit to handle breaking up latex syntax correctly, so</span>
        <span class="c1"># ignore latex for now.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_usetex</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>

        <span class="c1"># Build the line incrementally, for a more accurate measure of length</span>
        <span class="n">line_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wrap_line_width</span><span class="p">()</span>
        <span class="n">wrapped_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">):</span>
            <span class="c1"># New lines in the user&#39;s test need to force a split, so that it&#39;s</span>
            <span class="c1"># not using the longest current line width in the line being built</span>
            <span class="n">sub_words</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sub_words</span><span class="p">)):</span>
                <span class="n">current_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_rendered_text_width</span><span class="p">(</span>
                    <span class="n">line</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">sub_words</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

                <span class="c1"># Split long lines, and each newline found in the current word</span>
                <span class="k">if</span> <span class="n">current_width</span> <span class="o">&gt;</span> <span class="n">line_width</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">wrapped_str</span> <span class="o">+=</span> <span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">sub_words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">sub_words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">wrapped_str</span> <span class="o">+</span> <span class="n">line</span>

    <span class="nd">@allow_rasterization</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws the :class:`Text` object to the given *renderer*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">renderer</span><span class="o">.</span><span class="n">open_group</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gid</span><span class="p">())</span>

        <span class="k">with</span> <span class="n">_wrap_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">as</span> <span class="n">textobj</span><span class="p">:</span>
            <span class="n">bbox</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">descent</span> <span class="o">=</span> <span class="n">textobj</span><span class="o">.</span><span class="n">_get_layout</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">textobj</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>

            <span class="c1"># don&#39;t use textobj.get_position here, which refers to text</span>
            <span class="c1"># position in Text, and dash position in TextWithDash:</span>
            <span class="n">posx</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">_x</span><span class="p">))</span>
            <span class="n">posy</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">_y</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">posx</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">posy</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;posx and posy should be finite values&quot;</span><span class="p">)</span>
            <span class="n">posx</span><span class="p">,</span> <span class="n">posy</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">posx</span><span class="p">,</span> <span class="n">posy</span><span class="p">))</span>
            <span class="n">canvasw</span><span class="p">,</span> <span class="n">canvash</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">get_canvas_width_height</span><span class="p">()</span>

            <span class="c1"># draw the FancyBboxPatch</span>
            <span class="k">if</span> <span class="n">textobj</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="p">:</span>
                <span class="n">textobj</span><span class="o">.</span><span class="n">_draw_bbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">posx</span><span class="p">,</span> <span class="n">posy</span><span class="p">)</span>

            <span class="n">gc</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">new_gc</span><span class="p">()</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">set_foreground</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">get_alpha</span><span class="p">())</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">set_url</span><span class="p">(</span><span class="n">textobj</span><span class="o">.</span><span class="n">_url</span><span class="p">)</span>
            <span class="n">textobj</span><span class="o">.</span><span class="n">_set_gc_clip</span><span class="p">(</span><span class="n">gc</span><span class="p">)</span>

            <span class="n">angle</span> <span class="o">=</span> <span class="n">textobj</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">line</span><span class="p">,</span> <span class="n">wh</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>

                <span class="n">mtext</span> <span class="o">=</span> <span class="n">textobj</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">info</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">posx</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">posy</span>
                <span class="k">if</span> <span class="n">renderer</span><span class="o">.</span><span class="n">flipy</span><span class="p">():</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">canvash</span> <span class="o">-</span> <span class="n">y</span>
                <span class="n">clean_line</span><span class="p">,</span> <span class="n">ismath</span> <span class="o">=</span> <span class="n">textobj</span><span class="o">.</span><span class="n">is_math_text</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">textobj</span><span class="o">.</span><span class="n">get_path_effects</span><span class="p">():</span>
                    <span class="kn">from</span> <span class="nn">matplotlib.patheffects</span> <span class="k">import</span> <span class="n">PathEffectRenderer</span>
                    <span class="n">textrenderer</span> <span class="o">=</span> <span class="n">PathEffectRenderer</span><span class="p">(</span>
                                        <span class="n">textobj</span><span class="o">.</span><span class="n">get_path_effects</span><span class="p">(),</span> <span class="n">renderer</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">textrenderer</span> <span class="o">=</span> <span class="n">renderer</span>

                <span class="k">if</span> <span class="n">textobj</span><span class="o">.</span><span class="n">get_usetex</span><span class="p">():</span>
                    <span class="n">textrenderer</span><span class="o">.</span><span class="n">draw_tex</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">clean_line</span><span class="p">,</span>
                                          <span class="n">textobj</span><span class="o">.</span><span class="n">_fontproperties</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span>
                                          <span class="n">mtext</span><span class="o">=</span><span class="n">mtext</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">textrenderer</span><span class="o">.</span><span class="n">draw_text</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">clean_line</span><span class="p">,</span>
                                           <span class="n">textobj</span><span class="o">.</span><span class="n">_fontproperties</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span>
                                           <span class="n">ismath</span><span class="o">=</span><span class="n">ismath</span><span class="p">,</span> <span class="n">mtext</span><span class="o">=</span><span class="n">mtext</span><span class="p">)</span>

        <span class="n">gc</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
        <span class="n">renderer</span><span class="o">.</span><span class="n">close_group</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="Text.get_color"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_color.html#matplotlib.pyplot.Text.get_color">[docs]</a>    <span class="k">def</span> <span class="nf">get_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the color of the text&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span></div>

<div class="viewcode-block" id="Text.get_fontproperties"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontproperties.html#matplotlib.pyplot.Text.get_fontproperties">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontproperties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the :class:`~font_manager.FontProperties` object&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span></div>

<div class="viewcode-block" id="Text.get_font_properties"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_font_properties.html#matplotlib.pyplot.Text.get_font_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_font_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_fontproperties&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_fontproperties</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_family"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_family.html#matplotlib.pyplot.Text.get_family">[docs]</a>    <span class="k">def</span> <span class="nf">get_family</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the list of font families used for font lookup&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">get_family</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_fontfamily"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontfamily.html#matplotlib.pyplot.Text.get_fontfamily">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontfamily</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_family&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_family</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_name"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_name.html#matplotlib.pyplot.Text.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the font name as string&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_style"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_style.html#matplotlib.pyplot.Text.get_style">[docs]</a>    <span class="k">def</span> <span class="nf">get_style</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the font style as string&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_size"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_size.html#matplotlib.pyplot.Text.get_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the font size as integer&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">get_size_in_points</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_variant"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_variant.html#matplotlib.pyplot.Text.get_variant">[docs]</a>    <span class="k">def</span> <span class="nf">get_variant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the font variant as a string&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">get_variant</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_fontvariant"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontvariant.html#matplotlib.pyplot.Text.get_fontvariant">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontvariant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_variant&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variant</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_weight"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_weight.html#matplotlib.pyplot.Text.get_weight">[docs]</a>    <span class="k">def</span> <span class="nf">get_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Get the font weight as string or number&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">get_weight</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_fontname"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontname.html#matplotlib.pyplot.Text.get_fontname">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_name&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_fontstyle"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontstyle.html#matplotlib.pyplot.Text.get_fontstyle">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontstyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_style&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_style</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_fontsize"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontsize.html#matplotlib.pyplot.Text.get_fontsize">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontsize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_size&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_fontweight"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontweight.html#matplotlib.pyplot.Text.get_fontweight">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontweight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_weight&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_weight</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_stretch"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_stretch.html#matplotlib.pyplot.Text.get_stretch">[docs]</a>    <span class="k">def</span> <span class="nf">get_stretch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Get the font stretch as a string or number&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">get_stretch</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_fontstretch"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_fontstretch.html#matplotlib.pyplot.Text.get_fontstretch">[docs]</a>    <span class="k">def</span> <span class="nf">get_fontstretch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_stretch&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stretch</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_ha"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_ha.html#matplotlib.pyplot.Text.get_ha">[docs]</a>    <span class="k">def</span> <span class="nf">get_ha</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for get_horizontalalignment&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_horizontalalignment</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_horizontalalignment"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_horizontalalignment.html#matplotlib.pyplot.Text.get_horizontalalignment">[docs]</a>    <span class="k">def</span> <span class="nf">get_horizontalalignment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the horizontal alignment as string.  Will be one of</span>
<span class="sd">        &#39;left&#39;, &#39;center&#39; or &#39;right&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalalignment</span></div>

<div class="viewcode-block" id="Text.get_unitless_position"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_unitless_position.html#matplotlib.pyplot.Text.get_unitless_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_unitless_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the unitless position of the text as a tuple (*x*, *y*)&quot;</span>
        <span class="c1"># This will get the position with all unit information stripped away.</span>
        <span class="c1"># This is here for convienience since it is done in several locations.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">))</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span></div>

<div class="viewcode-block" id="Text.get_position"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_position.html#matplotlib.pyplot.Text.get_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the position of the text as a tuple (*x*, *y*)&quot;</span>
        <span class="c1"># This should return the same data (possible unitized) as was</span>
        <span class="c1"># specified with &#39;set_x&#39; and &#39;set_y&#39;.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span></div>

<div class="viewcode-block" id="Text.get_prop_tup"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_prop_tup.html#matplotlib.pyplot.Text.get_prop_tup">[docs]</a>    <span class="k">def</span> <span class="nf">get_prop_tup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a hashable tuple of properties.</span>

<span class="sd">        Not intended to be human readable, but useful for backends who</span>
<span class="sd">        want to cache derived information about text (e.g., layouts) and</span>
<span class="sd">        need to know if the text has changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unitless_position</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_verticalalignment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalalignment</span><span class="p">,</span>
                <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_mode</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span><span class="p">),</span>
                <span class="p">)</span></div>

<div class="viewcode-block" id="Text.get_text"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_text.html#matplotlib.pyplot.Text.get_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Get the text as string&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text</span></div>

<div class="viewcode-block" id="Text.get_va"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_va.html#matplotlib.pyplot.Text.get_va">[docs]</a>    <span class="k">def</span> <span class="nf">get_va</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;alias for :meth:`getverticalalignment`&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_verticalalignment</span><span class="p">()</span></div>

<div class="viewcode-block" id="Text.get_verticalalignment"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_verticalalignment.html#matplotlib.pyplot.Text.get_verticalalignment">[docs]</a>    <span class="k">def</span> <span class="nf">get_verticalalignment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the vertical alignment as string.  Will be one of</span>
<span class="sd">        &#39;top&#39;, &#39;center&#39;, &#39;bottom&#39; or &#39;baseline&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verticalalignment</span></div>

<div class="viewcode-block" id="Text.get_window_extent"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_window_extent.html#matplotlib.pyplot.Text.get_window_extent">[docs]</a>    <span class="k">def</span> <span class="nf">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Return a :class:`~matplotlib.transforms.Bbox` object bounding</span>
<span class="sd">        the text, in display units.</span>

<span class="sd">        In addition to being used internally, this is useful for</span>
<span class="sd">        specifying clickable regions in a png file on a web page.</span>

<span class="sd">        *renderer* defaults to the _renderer attribute of the text</span>
<span class="sd">        object.  This is not assigned until the first execution of</span>
<span class="sd">        :meth:`draw`, so you must use this kwarg if you want</span>
<span class="sd">        to call :meth:`get_window_extent` prior to the first</span>
<span class="sd">        :meth:`draw`.  For getting web page regions, it is</span>
<span class="sd">        simpler to call the method after saving the figure.</span>

<span class="sd">        *dpi* defaults to self.figure.dpi; the renderer dpi is</span>
<span class="sd">        irrelevant.  For the web application, if figure.dpi is not</span>
<span class="sd">        the value used when saving the figure, then the value that</span>
<span class="sd">        was used must be specified as the *dpi* argument.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1">#return _unit_box</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dpi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dpi_orig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">=</span> <span class="n">dpi</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy_display</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Cannot get window extent w/o renderer&#39;</span><span class="p">)</span>

        <span class="n">bbox</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">descent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span><span class="p">)</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unitless_position</span><span class="p">()</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">translated</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dpi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">=</span> <span class="n">dpi_orig</span>
        <span class="k">return</span> <span class="n">bbox</span></div>

<div class="viewcode-block" id="Text.set_backgroundcolor"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_backgroundcolor.html#matplotlib.pyplot.Text.set_backgroundcolor">[docs]</a>    <span class="k">def</span> <span class="nf">set_backgroundcolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the background color of the text by updating the bbox.</span>

<span class="sd">        .. seealso::</span>

<span class="sd">            :meth:`set_bbox`</span>
<span class="sd">               To change the position of the bounding box.</span>

<span class="sd">        ACCEPTS: any matplotlib color</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_bbox</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">color</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="n">color</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_clip_properties</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_color"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_color.html#matplotlib.pyplot.Text.set_color">[docs]</a>    <span class="k">def</span> <span class="nf">set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the foreground color of the text</span>

<span class="sd">        ACCEPTS: any matplotlib color</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure it is hashable, or get_prop_tup will fail.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">hash</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_ha"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_ha.html#matplotlib.pyplot.Text.set_ha">[docs]</a>    <span class="k">def</span> <span class="nf">set_ha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">align</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_horizontalalignment&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_horizontalalignment</span><span class="p">(</span><span class="n">align</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_horizontalalignment"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_horizontalalignment.html#matplotlib.pyplot.Text.set_horizontalalignment">[docs]</a>    <span class="k">def</span> <span class="nf">set_horizontalalignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">align</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the horizontal alignment to one of</span>

<span class="sd">        ACCEPTS: [ &#39;center&#39; | &#39;right&#39; | &#39;left&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">legal</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">align</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">legal</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Horizontal alignment must be one of </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                             <span class="nb">str</span><span class="p">(</span><span class="n">legal</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalalignment</span> <span class="o">=</span> <span class="n">align</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_ma"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_ma.html#matplotlib.pyplot.Text.set_ma">[docs]</a>    <span class="k">def</span> <span class="nf">set_ma</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">align</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_verticalalignment&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_multialignment</span><span class="p">(</span><span class="n">align</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_multialignment"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_multialignment.html#matplotlib.pyplot.Text.set_multialignment">[docs]</a>    <span class="k">def</span> <span class="nf">set_multialignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">align</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the alignment for multiple lines layout.  The layout of the</span>
<span class="sd">        bounding box of all the lines is determined bu the horizontalalignment</span>
<span class="sd">        and verticalalignment properties, but the multiline text within that</span>
<span class="sd">        box can be</span>

<span class="sd">        ACCEPTS: [&#39;left&#39; | &#39;right&#39; | &#39;center&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">legal</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">align</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">legal</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Horizontal alignment must be one of </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                             <span class="nb">str</span><span class="p">(</span><span class="n">legal</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_multialignment</span> <span class="o">=</span> <span class="n">align</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_linespacing"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_linespacing.html#matplotlib.pyplot.Text.set_linespacing">[docs]</a>    <span class="k">def</span> <span class="nf">set_linespacing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spacing</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the line spacing as a multiple of the font size.</span>
<span class="sd">        Default is 1.2.</span>

<span class="sd">        ACCEPTS: float (multiple of font size)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linespacing</span> <span class="o">=</span> <span class="n">spacing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_family"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_family.html#matplotlib.pyplot.Text.set_family">[docs]</a>    <span class="k">def</span> <span class="nf">set_family</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the font family.  May be either a single string, or a list</span>
<span class="sd">        of strings in decreasing priority.  Each string may be either</span>
<span class="sd">        a real font name or a generic font class name.  If the latter,</span>
<span class="sd">        the specific font names will be looked up in the</span>
<span class="sd">        :file:`matplotlibrc` file.</span>

<span class="sd">        ACCEPTS: [FONTNAME | &#39;serif&#39; | &#39;sans-serif&#39; | &#39;cursive&#39; | &#39;fantasy&#39; |</span>
<span class="sd">                  &#39;monospace&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">set_family</span><span class="p">(</span><span class="n">fontname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_variant"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_variant.html#matplotlib.pyplot.Text.set_variant">[docs]</a>    <span class="k">def</span> <span class="nf">set_variant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variant</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the font variant, either &#39;normal&#39; or &#39;small-caps&#39;.</span>

<span class="sd">        ACCEPTS: [ &#39;normal&#39; | &#39;small-caps&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="n">variant</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_fontvariant"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_fontvariant.html#matplotlib.pyplot.Text.set_fontvariant">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontvariant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variant</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_variant&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="n">variant</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_name"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_name.html#matplotlib.pyplot.Text.set_name">[docs]</a>    <span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;alias for set_family&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_family</span><span class="p">(</span><span class="n">fontname</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_fontname"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_fontname.html#matplotlib.pyplot.Text.set_fontname">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;alias for set_family&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_family</span><span class="p">(</span><span class="n">fontname</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_style"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_style.html#matplotlib.pyplot.Text.set_style">[docs]</a>    <span class="k">def</span> <span class="nf">set_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontstyle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the font style.</span>

<span class="sd">        ACCEPTS: [ &#39;normal&#39; | &#39;italic&#39; | &#39;oblique&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="n">fontstyle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_fontstyle"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_fontstyle.html#matplotlib.pyplot.Text.set_fontstyle">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontstyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontstyle</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_style&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="n">fontstyle</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_size"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_size.html#matplotlib.pyplot.Text.set_size">[docs]</a>    <span class="k">def</span> <span class="nf">set_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the font size.  May be either a size string, relative to</span>
<span class="sd">        the default font size, or an absolute font size in points.</span>

<span class="sd">        ACCEPTS: [size in points | &#39;xx-small&#39; | &#39;x-small&#39; | &#39;small&#39; |</span>
<span class="sd">                  &#39;medium&#39; | &#39;large&#39; | &#39;x-large&#39; | &#39;xx-large&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_fontsize"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_fontsize.html#matplotlib.pyplot.Text.set_fontsize">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontsize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_size&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_weight"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_weight.html#matplotlib.pyplot.Text.set_weight">[docs]</a>    <span class="k">def</span> <span class="nf">set_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the font weight.</span>

<span class="sd">        ACCEPTS: [a numeric value in range 0-1000 | &#39;ultralight&#39; | &#39;light&#39; |</span>
<span class="sd">                  &#39;normal&#39; | &#39;regular&#39; | &#39;book&#39; | &#39;medium&#39; | &#39;roman&#39; |</span>
<span class="sd">                  &#39;semibold&#39; | &#39;demibold&#39; | &#39;demi&#39; | &#39;bold&#39; | &#39;heavy&#39; |</span>
<span class="sd">                  &#39;extra bold&#39; | &#39;black&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">set_weight</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_fontweight"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_fontweight.html#matplotlib.pyplot.Text.set_fontweight">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontweight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_weight&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_weight</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_stretch"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_stretch.html#matplotlib.pyplot.Text.set_stretch">[docs]</a>    <span class="k">def</span> <span class="nf">set_stretch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stretch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the font stretch (horizontal condensation or expansion).</span>

<span class="sd">        ACCEPTS: [a numeric value in range 0-1000 | &#39;ultra-condensed&#39; |</span>
<span class="sd">                  &#39;extra-condensed&#39; | &#39;condensed&#39; | &#39;semi-condensed&#39; |</span>
<span class="sd">                  &#39;normal&#39; | &#39;semi-expanded&#39; | &#39;expanded&#39; | &#39;extra-expanded&#39; |</span>
<span class="sd">                  &#39;ultra-expanded&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span><span class="o">.</span><span class="n">set_stretch</span><span class="p">(</span><span class="n">stretch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_fontstretch"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_fontstretch.html#matplotlib.pyplot.Text.set_fontstretch">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontstretch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stretch</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_stretch&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_stretch</span><span class="p">(</span><span class="n">stretch</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_position"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_position.html#matplotlib.pyplot.Text.set_position">[docs]</a>    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the (*x*, *y*) position of the text</span>

<span class="sd">        ACCEPTS: (x,y)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="Text.set_x"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_x.html#matplotlib.pyplot.Text.set_x">[docs]</a>    <span class="k">def</span> <span class="nf">set_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the *x* position of the text</span>

<span class="sd">        ACCEPTS: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_y"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_y.html#matplotlib.pyplot.Text.set_y">[docs]</a>    <span class="k">def</span> <span class="nf">set_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the *y* position of the text</span>

<span class="sd">        ACCEPTS: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_rotation"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_rotation.html#matplotlib.pyplot.Text.set_rotation">[docs]</a>    <span class="k">def</span> <span class="nf">set_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation of the text</span>

<span class="sd">        ACCEPTS: [ angle in degrees | &#39;vertical&#39; | &#39;horizontal&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">=</span> <span class="n">s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_va"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_va.html#matplotlib.pyplot.Text.set_va">[docs]</a>    <span class="k">def</span> <span class="nf">set_va</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">align</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_verticalalignment&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_verticalalignment</span><span class="p">(</span><span class="n">align</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_verticalalignment"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_verticalalignment.html#matplotlib.pyplot.Text.set_verticalalignment">[docs]</a>    <span class="k">def</span> <span class="nf">set_verticalalignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">align</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the vertical alignment</span>

<span class="sd">        ACCEPTS: [ &#39;center&#39; | &#39;top&#39; | &#39;bottom&#39; | &#39;baseline&#39; ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">legal</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;baseline&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">align</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">legal</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Vertical alignment must be one of </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                             <span class="nb">str</span><span class="p">(</span><span class="n">legal</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalalignment</span> <span class="o">=</span> <span class="n">align</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_text"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_text.html#matplotlib.pyplot.Text.set_text">[docs]</a>    <span class="k">def</span> <span class="nf">set_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the text string *s*</span>

<span class="sd">        It may contain newlines (``\\n``) or math in LaTeX syntax.</span>

<span class="sd">        ACCEPTS: string or anything printable with &#39;%s&#39; conversion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">s</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Text.is_math_text"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.is_math_text.html#matplotlib.pyplot.Text.is_math_text">[docs]</a>    <span class="k">def</span> <span class="nf">is_math_text</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a cleaned string and a boolean flag.</span>
<span class="sd">        The flag indicates if the given string *s* contains any mathtext,</span>
<span class="sd">        determined by counting unescaped dollar signs. If no mathtext</span>
<span class="sd">        is present, the cleaned string has its dollar signs unescaped.</span>
<span class="sd">        If usetex is on, the flag always has the value &quot;TeX&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Did we find an even number of non-escaped dollar signs?</span>
        <span class="c1"># If so, treat is as math text.</span>
        <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;text.usetex&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="s1">r&#39;\ &#39;</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="s1">&#39;TeX&#39;</span>

        <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_math_text</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">r&#39;\$&#39;</span><span class="p">,</span> <span class="s1">&#39;$&#39;</span><span class="p">),</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Text.set_fontproperties"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_fontproperties.html#matplotlib.pyplot.Text.set_fontproperties">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontproperties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the font properties that control the text.  *fp* must be a</span>
<span class="sd">        :class:`matplotlib.font_manager.FontProperties` object.</span>

<span class="sd">        ACCEPTS: a :class:`matplotlib.font_manager.FontProperties` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_string_like</span><span class="p">(</span><span class="n">fp</span><span class="p">):</span>
            <span class="n">fp</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontproperties</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.set_font_properties"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_font_properties.html#matplotlib.pyplot.Text.set_font_properties">[docs]</a>    <span class="k">def</span> <span class="nf">set_font_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="s1">&#39;alias for set_fontproperties&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_fontproperties</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span></div>

<div class="viewcode-block" id="Text.set_usetex"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.set_usetex.html#matplotlib.pyplot.Text.set_usetex">[docs]</a>    <span class="k">def</span> <span class="nf">set_usetex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">usetex</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set this `Text` object to render using TeX (or not).</span>

<span class="sd">        If `None` is given, the option will be reset to use the value of</span>
<span class="sd">        `rcParams[&#39;text.usetex&#39;]`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">usetex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_usetex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_usetex</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">usetex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Text.get_usetex"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Text.get_usetex.html#matplotlib.pyplot.Text.get_usetex">[docs]</a>    <span class="k">def</span> <span class="nf">get_usetex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether this `Text` object will render using TeX.</span>

<span class="sd">        If the user has not manually set this value, it will default to</span>
<span class="sd">        the value of `rcParams[&#39;text.usetex&#39;]`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_usetex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;text.usetex&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_usetex</span></div></div>

<span class="n">docstring</span><span class="o">.</span><span class="n">interpd</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">Text</span><span class="o">=</span><span class="n">artist</span><span class="o">.</span><span class="n">kwdoc</span><span class="p">(</span><span class="n">Text</span><span class="p">))</span>
<span class="n">docstring</span><span class="o">.</span><span class="n">dedent_interpd</span><span class="p">(</span><span class="n">Text</span><span class="o">.</span><span class="n">__init__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TextWithDash</span><span class="p">(</span><span class="n">Text</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is basically a :class:`~matplotlib.text.Text` with a dash</span>
<span class="sd">    (drawn with a :class:`~matplotlib.lines.Line2D`) before/after</span>
<span class="sd">    it. It is intended to be a drop-in replacement for</span>
<span class="sd">    :class:`~matplotlib.text.Text`, and should behave identically to</span>
<span class="sd">    it when *dashlength* = 0.0.</span>

<span class="sd">    The dash always comes between the point specified by</span>
<span class="sd">    :meth:`~matplotlib.text.Text.set_position` and the text. When a</span>
<span class="sd">    dash exists, the text alignment arguments (*horizontalalignment*,</span>
<span class="sd">    *verticalalignment*) are ignored.</span>

<span class="sd">    *dashlength* is the length of the dash in canvas units.</span>
<span class="sd">    (default = 0.0).</span>

<span class="sd">    *dashdirection* is one of 0 or 1, where 0 draws the dash after the</span>
<span class="sd">    text and 1 before.  (default = 0).</span>

<span class="sd">    *dashrotation* specifies the rotation of the dash, and should</span>
<span class="sd">    generally stay *None*. In this case</span>
<span class="sd">    :meth:`~matplotlib.text.TextWithDash.get_dashrotation` returns</span>
<span class="sd">    :meth:`~matplotlib.text.Text.get_rotation`.  (i.e., the dash takes</span>
<span class="sd">    its rotation from the text&#39;s rotation). Because the text center is</span>
<span class="sd">    projected onto the dash, major deviations in the rotation cause</span>
<span class="sd">    what may be considered visually unappealing results.</span>
<span class="sd">    (default = *None*)</span>

<span class="sd">    *dashpad* is a padding length to add (or subtract) space</span>
<span class="sd">    between the text and the dash, in canvas units.</span>
<span class="sd">    (default = 3)</span>

<span class="sd">    *dashpush* &quot;pushes&quot; the dash and text away from the point</span>
<span class="sd">    specified by :meth:`~matplotlib.text.Text.set_position` by the</span>
<span class="sd">    amount in canvas units.  (default = 0)</span>

<span class="sd">    .. note::</span>

<span class="sd">        The alignment of the two objects is based on the bounding box</span>
<span class="sd">        of the :class:`~matplotlib.text.Text`, as obtained by</span>
<span class="sd">        :meth:`~matplotlib.artist.Artist.get_window_extent`.  This, in</span>
<span class="sd">        turn, appears to depend on the font metrics as given by the</span>
<span class="sd">        rendering backend. Hence the quality of the &quot;centering&quot; of the</span>
<span class="sd">        label text with respect to the dash varies depending on the</span>
<span class="sd">        backend used.</span>

<span class="sd">    .. note::</span>

<span class="sd">        I&#39;m not sure that I got the</span>
<span class="sd">        :meth:`~matplotlib.text.TextWithDash.get_window_extent` right,</span>
<span class="sd">        or whether that&#39;s sufficient for providing the object bounding</span>
<span class="sd">        box.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__name__</span> <span class="o">=</span> <span class="s1">&#39;textwithdash&#39;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;TextWithDash(</span><span class="si">%g</span><span class="s2">,</span><span class="si">%g</span><span class="s2">,</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>          <span class="c1"># defaults to rc params</span>
                 <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                 <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                 <span class="n">multialignment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fontproperties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># defaults to FontProperties()</span>
                 <span class="n">rotation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">linespacing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">dashlength</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">dashdirection</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">dashrotation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">dashpad</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                 <span class="n">dashpush</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="p">):</span>

        <span class="n">Text</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                      <span class="n">verticalalignment</span><span class="o">=</span><span class="n">verticalalignment</span><span class="p">,</span>
                      <span class="n">horizontalalignment</span><span class="o">=</span><span class="n">horizontalalignment</span><span class="p">,</span>
                      <span class="n">multialignment</span><span class="o">=</span><span class="n">multialignment</span><span class="p">,</span>
                      <span class="n">fontproperties</span><span class="o">=</span><span class="n">fontproperties</span><span class="p">,</span>
                      <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span>
                      <span class="n">linespacing</span><span class="o">=</span><span class="n">linespacing</span><span class="p">)</span>

        <span class="c1"># The position (x,y) values for text and dashline</span>
        <span class="c1"># are bogus as given in the instantiation; they will</span>
        <span class="c1"># be set correctly by update_coords() in draw()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dashline</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">(</span><span class="n">xdata</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span>
                               <span class="n">ydata</span><span class="o">=</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span>
                               <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span>
                               <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dashx</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashy</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashlength</span> <span class="o">=</span> <span class="n">dashlength</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashdirection</span> <span class="o">=</span> <span class="n">dashdirection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashrotation</span> <span class="o">=</span> <span class="n">dashrotation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashpad</span> <span class="o">=</span> <span class="n">dashpad</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashpush</span> <span class="o">=</span> <span class="n">dashpush</span>

        <span class="c1">#self.set_bbox(dict(pad=0))</span>

    <span class="k">def</span> <span class="nf">get_unitless_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the unitless position of the text as a tuple (*x*, *y*)&quot;</span>
        <span class="c1"># This will get the position with all unit information stripped away.</span>
        <span class="c1"># This is here for convienience since it is done in several locations.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dashx</span><span class="p">))</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dashy</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return the position of the text as a tuple (*x*, *y*)&quot;</span>
        <span class="c1"># This should return the same data (possibly unitized) as was</span>
        <span class="c1"># specified with set_x and set_y</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashy</span>

    <span class="k">def</span> <span class="nf">get_prop_tup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a hashable tuple of properties.</span>

<span class="sd">        Not intended to be human readable, but useful for backends who</span>
<span class="sd">        want to cache derived information about text (e.g., layouts) and</span>
<span class="sd">        need to know if the text has changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_prop_tup</span><span class="p">(</span><span class="bp">self</span><span class="p">)]</span>
        <span class="n">props</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashlength</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">_dashdirection</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashrotation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashpad</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">_dashpush</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">props</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the :class:`TextWithDash` object to the given *renderer*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_coords</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dashlength</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dashline</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">update_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the actual *x*, *y* coordinates for text based on the</span>
<span class="sd">        input *x*, *y* and the *dashlength*. Since the rotation is</span>
<span class="sd">        with respect to the actual canvas&#39;s coordinates we need to map</span>
<span class="sd">        back and forth.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dashx</span><span class="p">,</span> <span class="n">dashy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unitless_position</span><span class="p">()</span>
        <span class="n">dashlength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dashlength</span><span class="p">()</span>
        <span class="c1"># Shortcircuit this process if we don&#39;t have a dash</span>
        <span class="k">if</span> <span class="n">dashlength</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">dashx</span><span class="p">,</span> <span class="n">dashy</span>
            <span class="k">return</span>

        <span class="n">dashrotation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dashrotation</span><span class="p">()</span>
        <span class="n">dashdirection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dashdirection</span><span class="p">()</span>
        <span class="n">dashpad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dashpad</span><span class="p">()</span>
        <span class="n">dashpush</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dashpush</span><span class="p">()</span>

        <span class="n">angle</span> <span class="o">=</span> <span class="n">get_rotation</span><span class="p">(</span><span class="n">dashrotation</span><span class="p">)</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">angle</span> <span class="o">/</span> <span class="mf">180.0</span> <span class="o">+</span> <span class="n">dashdirection</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">cos_theta</span><span class="p">,</span> <span class="n">sin_theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

        <span class="n">transform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>

        <span class="c1"># Compute the dash end points</span>
        <span class="c1"># The &#39;c&#39; prefix is for canvas coordinates</span>
        <span class="n">cxy</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">dashx</span><span class="p">,</span> <span class="n">dashy</span><span class="p">))</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">cos_theta</span><span class="p">,</span> <span class="n">sin_theta</span><span class="p">])</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="n">cxy</span> <span class="o">+</span> <span class="n">dashpush</span> <span class="o">*</span> <span class="n">cd</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="n">cxy</span> <span class="o">+</span> <span class="p">(</span><span class="n">dashpush</span> <span class="o">+</span> <span class="n">dashlength</span><span class="p">)</span> <span class="o">*</span> <span class="n">cd</span>

        <span class="n">inverse</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
        <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span> <span class="o">=</span> <span class="n">inverse</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">c1</span><span class="p">))</span>
        <span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span> <span class="o">=</span> <span class="n">inverse</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">c2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dashline</span><span class="o">.</span><span class="n">set_data</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">),</span> <span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span>

        <span class="c1"># We now need to extend this vector out to</span>
        <span class="c1"># the center of the text area.</span>
        <span class="c1"># The basic problem here is that we&#39;re &quot;rotating&quot;</span>
        <span class="c1"># two separate objects but want it to appear as</span>
        <span class="c1"># if they&#39;re rotated together.</span>
        <span class="c1"># This is made non-trivial because of the</span>
        <span class="c1"># interaction between text rotation and alignment -</span>
        <span class="c1"># text alignment is based on the bbox after rotation.</span>
        <span class="c1"># We reset/force both alignments to &#39;center&#39;</span>
        <span class="c1"># so we can do something relatively reasonable.</span>
        <span class="c1"># There&#39;s probably a better way to do this by</span>
        <span class="c1"># embedding all this in the object&#39;s transformations,</span>
        <span class="c1"># but I don&#39;t grok the transformation stuff</span>
        <span class="c1"># well enough yet.</span>
        <span class="n">we</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">we</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">we</span><span class="o">.</span><span class="n">height</span>
        <span class="c1"># Watch for zeros</span>
        <span class="k">if</span> <span class="n">sin_theta</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">w</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="n">cos_theta</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">h</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tan_theta</span> <span class="o">=</span> <span class="n">sin_theta</span> <span class="o">/</span> <span class="n">cos_theta</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">w</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">tan_theta</span>
            <span class="k">if</span> <span class="n">dy</span> <span class="o">&gt;</span> <span class="n">h</span> <span class="ow">or</span> <span class="n">dy</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">h</span><span class="p">:</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="n">h</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="n">h</span> <span class="o">/</span> <span class="n">tan_theta</span>
        <span class="n">cwd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">cwd</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">dashpad</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span> <span class="n">cwd</span><span class="p">))</span>
        <span class="n">cw</span> <span class="o">=</span> <span class="n">c2</span> <span class="o">+</span> <span class="p">(</span><span class="n">dashdirection</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">cwd</span>

        <span class="n">newx</span><span class="p">,</span> <span class="n">newy</span> <span class="o">=</span> <span class="n">inverse</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">cw</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">newx</span><span class="p">,</span> <span class="n">newy</span>

        <span class="c1"># Now set the window extent</span>
        <span class="c1"># I&#39;m not at all sure this is the right way to do this.</span>
        <span class="n">we</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_twd_window_extent</span> <span class="o">=</span> <span class="n">we</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_twd_window_extent</span><span class="o">.</span><span class="n">update_from_data_xy</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">c1</span><span class="p">]),</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Finally, make text align center</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">set_horizontalalignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">set_verticalalignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Return a :class:`~matplotlib.transforms.Bbox` object bounding</span>
<span class="sd">        the text, in display units.</span>

<span class="sd">        In addition to being used internally, this is useful for</span>
<span class="sd">        specifying clickable regions in a png file on a web page.</span>

<span class="sd">        *renderer* defaults to the _renderer attribute of the text</span>
<span class="sd">        object.  This is not assigned until the first execution of</span>
<span class="sd">        :meth:`draw`, so you must use this kwarg if you want</span>
<span class="sd">        to call :meth:`get_window_extent` prior to the first</span>
<span class="sd">        :meth:`draw`.  For getting web page regions, it is</span>
<span class="sd">        simpler to call the method after saving the figure.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_coords</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dashlength</span><span class="p">()</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twd_window_extent</span>

    <span class="k">def</span> <span class="nf">get_dashlength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the length of the dash.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashlength</span>

    <span class="k">def</span> <span class="nf">set_dashlength</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dl</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the length of the dash.</span>

<span class="sd">        ACCEPTS: float (canvas units)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashlength</span> <span class="o">=</span> <span class="n">dl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_dashdirection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the direction dash.  1 is before the text and 0 is after.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashdirection</span>

    <span class="k">def</span> <span class="nf">set_dashdirection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dd</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the direction of the dash following the text.</span>
<span class="sd">        1 is before the text and 0 is after. The default</span>
<span class="sd">        is 0, which is what you&#39;d want for the typical</span>
<span class="sd">        case of ticks below and on the left of the figure.</span>

<span class="sd">        ACCEPTS: int (1 is before, 0 is after)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashdirection</span> <span class="o">=</span> <span class="n">dd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_dashrotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the rotation of the dash in degrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashrotation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rotation</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashrotation</span>

    <span class="k">def</span> <span class="nf">set_dashrotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the rotation of the dash, in degrees</span>

<span class="sd">        ACCEPTS: float (degrees)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashrotation</span> <span class="o">=</span> <span class="n">dr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_dashpad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the extra spacing between the dash and the text, in canvas units.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashpad</span>

    <span class="k">def</span> <span class="nf">set_dashpad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the &quot;pad&quot; of the TextWithDash, which is the extra spacing</span>
<span class="sd">        between the dash and the text, in canvas units.</span>

<span class="sd">        ACCEPTS: float (canvas units)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashpad</span> <span class="o">=</span> <span class="n">dp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_dashpush</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the extra spacing between the dash and the specified text</span>
<span class="sd">        position, in canvas units.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashpush</span>

    <span class="k">def</span> <span class="nf">set_dashpush</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the &quot;push&quot; of the TextWithDash, which</span>
<span class="sd">        is the extra spacing between the beginning</span>
<span class="sd">        of the dash and the specified position.</span>

<span class="sd">        ACCEPTS: float (canvas units)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashpush</span> <span class="o">=</span> <span class="n">dp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the (*x*, *y*) position of the :class:`TextWithDash`.</span>

<span class="sd">        ACCEPTS: (x, y)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">set_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the *x* position of the :class:`TextWithDash`.</span>

<span class="sd">        ACCEPTS: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashx</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the *y* position of the :class:`TextWithDash`.</span>

<span class="sd">        ACCEPTS: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashy</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the :class:`matplotlib.transforms.Transform` instance used</span>
<span class="sd">        by this artist.</span>

<span class="sd">        ACCEPTS: a :class:`matplotlib.transforms.Transform` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dashline</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;return the figure instance the artist belongs to&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span>

    <span class="k">def</span> <span class="nf">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the figure instance the artist belong to.</span>

<span class="sd">        ACCEPTS: a :class:`matplotlib.figure.Figure` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dashline</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">docstring</span><span class="o">.</span><span class="n">interpd</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">TextWithDash</span><span class="o">=</span><span class="n">artist</span><span class="o">.</span><span class="n">kwdoc</span><span class="p">(</span><span class="n">TextWithDash</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">OffsetFrom</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">ref_coord</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;points&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_artist</span> <span class="o">=</span> <span class="n">artist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ref_coord</span> <span class="o">=</span> <span class="n">ref_coord</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_unit</span><span class="p">(</span><span class="n">unit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;points&quot;</span><span class="p">,</span> <span class="s2">&quot;pixels&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;unit&#39; must be one of [ &#39;points&#39; | &#39;pixels&#39; ]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unit</span> <span class="o">=</span> <span class="n">unit</span>

    <span class="k">def</span> <span class="nf">get_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unit</span>

    <span class="k">def</span> <span class="nf">_get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;pixels&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">renderer</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="mf">1.</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_artist</span><span class="p">,</span> <span class="n">Artist</span><span class="p">):</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_artist</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">bounds</span>
            <span class="n">xf</span><span class="p">,</span> <span class="n">yf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ref_coord</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="n">xf</span><span class="p">,</span> <span class="n">b</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="n">yf</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_artist</span><span class="p">,</span> <span class="n">BboxBase</span><span class="p">):</span>
            <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_artist</span><span class="o">.</span><span class="n">bounds</span>
            <span class="n">xf</span><span class="p">,</span> <span class="n">yf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ref_coord</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="n">xf</span><span class="p">,</span> <span class="n">b</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="n">yf</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_artist</span><span class="p">,</span> <span class="n">Transform</span><span class="p">):</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_artist</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ref_coord</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;unknown type&quot;</span><span class="p">)</span>

        <span class="n">sc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_scale</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">tr</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">sc</span><span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">tr</span>


<span class="k">class</span> <span class="nc">_AnnotationBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">xy</span><span class="p">,</span>
                 <span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
                 <span class="n">annotation_clip</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">xy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span> <span class="o">=</span> <span class="n">xycoords</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_annotation_clip</span><span class="p">(</span><span class="n">annotation_clip</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_get_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">s</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">s</span><span class="p">,</span> <span class="n">s</span>

        <span class="k">if</span> <span class="n">s1</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">s2</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>

        <span class="n">tr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy_transform</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span>

    <span class="k">def</span> <span class="nf">_get_xy_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">s</span>
            <span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="k">import</span> <span class="n">blended_transform_factory</span>
            <span class="n">tr1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy_transform</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">s1</span><span class="p">)</span>
            <span class="n">tr2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy_transform</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">blended_transform_factory</span><span class="p">(</span><span class="n">tr1</span><span class="p">,</span> <span class="n">tr2</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tr</span>

        <span class="k">if</span> <span class="n">six</span><span class="o">.</span><span class="n">callable</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">s</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tr</span><span class="p">,</span> <span class="n">BboxBase</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">BboxTransformTo</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tr</span><span class="p">,</span> <span class="n">Transform</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">tr</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;unknown return type ...&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Artist</span><span class="p">):</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">BboxTransformTo</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">BboxBase</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">BboxTransformTo</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Transform</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">s</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_string_like</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;unknown coordinate type : </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">s</span><span class="p">,))</span>

        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">transData</span>
        <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;polar&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">matplotlib.projections</span> <span class="k">import</span> <span class="n">PolarAxes</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">PolarAxes</span><span class="o">.</span><span class="n">PolarTransform</span><span class="p">()</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">tr</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">transData</span>
            <span class="k">return</span> <span class="n">trans</span>

        <span class="n">s_</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s_</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is not a recognized coordinate&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>

        <span class="n">bbox0</span><span class="p">,</span> <span class="n">xy0</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">bbox_name</span><span class="p">,</span> <span class="n">unit</span> <span class="o">=</span> <span class="n">s_</span>
        <span class="c1"># if unit is offset-like</span>
        <span class="k">if</span> <span class="n">bbox_name</span> <span class="o">==</span> <span class="s2">&quot;figure&quot;</span><span class="p">:</span>
            <span class="n">bbox0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span>
        <span class="k">elif</span> <span class="n">bbox_name</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
            <span class="n">bbox0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">bbox</span>
        <span class="c1"># elif bbox_name == &quot;bbox&quot;:</span>
        <span class="c1">#     if bbox is None:</span>
        <span class="c1">#         raise RuntimeError(&quot;bbox is specified as a coordinate but &quot;</span>
        <span class="c1">#                            &quot;never set&quot;)</span>
        <span class="c1">#     bbox0 = self._get_bbox(renderer, bbox)</span>

        <span class="k">if</span> <span class="n">bbox0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xy0</span> <span class="o">=</span> <span class="n">bbox0</span><span class="o">.</span><span class="n">bounds</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">bbox_name</span> <span class="o">==</span> <span class="s2">&quot;offset&quot;</span><span class="p">:</span>
            <span class="n">xy0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ref_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xy0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># reference x, y in display coordinate</span>
            <span class="n">ref_x</span><span class="p">,</span> <span class="n">ref_y</span> <span class="o">=</span> <span class="n">xy0</span>
            <span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="k">import</span> <span class="n">Affine2D</span>
            <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;points&quot;</span><span class="p">:</span>
                <span class="c1"># dots per points</span>
                <span class="n">dpp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_dpi</span><span class="p">()</span> <span class="o">/</span> <span class="mf">72.</span>
                <span class="n">tr</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">dpp</span><span class="p">,</span> <span class="n">dpp</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;pixels&quot;</span><span class="p">:</span>
                <span class="n">tr</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;fontsize&quot;</span><span class="p">:</span>
                <span class="n">fontsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
                <span class="n">dpp</span> <span class="o">=</span> <span class="n">fontsize</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_dpi</span><span class="p">()</span> <span class="o">/</span> <span class="mf">72.</span>
                <span class="n">tr</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">dpp</span><span class="p">,</span>
                                      <span class="n">dpp</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;fraction&quot;</span><span class="p">:</span>
                <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">bbox0</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
                <span class="n">tr</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is not a recognized coordinate&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">tr</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">ref_x</span><span class="p">,</span> <span class="n">ref_y</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is not a recognized coordinate&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_ref_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return x, y (in display coordinate) that is to be used for a reference</span>
<span class="sd">        of any offset coordinate</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span>
            <span class="k">if</span> <span class="p">((</span><span class="n">is_string_like</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">s1</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;offset&quot;</span><span class="p">)</span> <span class="ow">or</span>
                  <span class="p">(</span><span class="n">is_string_like</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span> <span class="ow">and</span> <span class="n">s2</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;offset&quot;</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;xycoords should not be an offset coordinate&quot;</span><span class="p">)</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xy</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s1</span><span class="p">)</span>
            <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">is_string_like</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span><span class="p">)</span> <span class="ow">and</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;offset&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;xycoords should not be an offset coordinate&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xy</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span><span class="p">)</span>
        <span class="c1">#raise RuntimeError(&quot;must be defined by the derived class&quot;)</span>

    <span class="c1"># def _get_bbox(self, renderer):</span>
    <span class="c1">#     if hasattr(bbox, &quot;bounds&quot;):</span>
    <span class="c1">#         return bbox</span>
    <span class="c1">#     elif hasattr(bbox, &quot;get_window_extent&quot;):</span>
    <span class="c1">#         bbox = bbox.get_window_extent()</span>
    <span class="c1">#         return bbox</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         raise ValueError(&quot;A bbox instance is expected but got %s&quot; %</span>
    <span class="c1">#                          str(bbox))</span>

    <span class="k">def</span> <span class="nf">set_annotation_clip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set *annotation_clip* attribute.</span>

<span class="sd">          * True: the annotation will only be drawn when self.xy is inside</span>
<span class="sd">                  the axes.</span>
<span class="sd">          * False: the annotation will always be drawn regardless of its</span>
<span class="sd">                   position.</span>
<span class="sd">          * None: the self.xy will be checked only if *xycoords* is &quot;data&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_annotation_clip</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_annotation_clip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *annotation_clip* attribute.</span>
<span class="sd">        See :meth:`set_annotation_clip` for the meaning of return values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_annotation_clip</span>

    <span class="k">def</span> <span class="nf">_get_position_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="s2">&quot;Return the pixel position of the annotated point.&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xy</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">xy_pixel</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        given the xy pixel coordinate, check if the annotation need to</span>
<span class="sd">        be drawn.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_annotation_clip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">b</span> <span class="ow">or</span> <span class="p">(</span><span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span> <span class="o">==</span> <span class="s2">&quot;data&quot;</span><span class="p">):</span>
            <span class="c1"># check if self.xy is inside the axes.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">xy_pixel</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">draggable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_blit</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the draggable state -- if state is</span>

<span class="sd">          * None : toggle the current state</span>

<span class="sd">          * True : turn draggable on</span>

<span class="sd">          * False : turn draggable off</span>

<span class="sd">        If draggable is on, you can drag the annotation on the canvas with</span>
<span class="sd">        the mouse.  The DraggableAnnotation helper instance is returned if</span>
<span class="sd">        draggable is on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">matplotlib.offsetbox</span> <span class="k">import</span> <span class="n">DraggableAnnotation</span>
        <span class="n">is_draggable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="c1"># if state is None we&#39;ll toggle</span>
        <span class="k">if</span> <span class="n">state</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">is_draggable</span>

        <span class="k">if</span> <span class="n">state</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span> <span class="o">=</span> <span class="n">DraggableAnnotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_blit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draggable</span>


<div class="viewcode-block" id="Annotation"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Annotation.html#matplotlib.pyplot.Annotation">[docs]</a><span class="k">class</span> <span class="nc">Annotation</span><span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="n">_AnnotationBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A :class:`~matplotlib.text.Text` class to make annotating things</span>
<span class="sd">    in the figure, such as :class:`~matplotlib.figure.Figure`,</span>
<span class="sd">    :class:`~matplotlib.axes.Axes`,</span>
<span class="sd">    :class:`~matplotlib.patches.Rectangle`, etc., easier.</span>

<span class="sd">    Annotate the *x*, *y* point *xy* with text *s* at *x*, *y*</span>
<span class="sd">    location *xytext*.  (If *xytext* = *None*, defaults to *xy*,</span>
<span class="sd">    and if *textcoords* = *None*, defaults to *xycoords*).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Annotation(</span><span class="si">%g</span><span class="s2">,</span><span class="si">%g</span><span class="s2">,</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                         <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="p">))</span>

    <span class="nd">@docstring</span><span class="o">.</span><span class="n">dedent_interpd</span>
<div class="viewcode-block" id="Annotation.__init__"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Annotation.__init__.html#matplotlib.pyplot.Annotation.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">xy</span><span class="p">,</span>
                 <span class="n">xytext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
                 <span class="n">textcoords</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">arrowprops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">annotation_clip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *arrowprops*, if not *None*, is a dictionary of line properties</span>
<span class="sd">        (see :class:`matplotlib.lines.Line2D`) for the arrow that connects</span>
<span class="sd">        annotation to the point.</span>

<span class="sd">        If the dictionary has a key *arrowstyle*, a</span>
<span class="sd">        `~matplotlib.patches.FancyArrowPatch` instance is created with</span>
<span class="sd">        the given dictionary and is drawn. Otherwise, a</span>
<span class="sd">        `~matplotlib.patches.YAArrow` patch instance is created and</span>
<span class="sd">        drawn. Valid keys for `~matplotlib.patches.YAArrow` are:</span>


<span class="sd">        =========   ===========================================================</span>
<span class="sd">        Key         Description</span>
<span class="sd">        =========   ===========================================================</span>
<span class="sd">        width       the width of the arrow in points</span>
<span class="sd">        frac        the fraction of the arrow length occupied by the head</span>
<span class="sd">        headwidth   the width of the base of the arrow head in points</span>
<span class="sd">        shrink      oftentimes it is convenient to have the arrowtip</span>
<span class="sd">                    and base a bit away from the text and point being</span>
<span class="sd">                    annotated.  If *d* is the distance between the text and</span>
<span class="sd">                    annotated point, shrink will shorten the arrow so the tip</span>
<span class="sd">                    and base are shink percent of the distance *d* away from</span>
<span class="sd">                    the endpoints.  i.e., ``shrink=0.05 is 5%%``</span>
<span class="sd">        ?           any key for :class:`matplotlib.patches.polygon`</span>
<span class="sd">        =========   ===========================================================</span>


<span class="sd">        Valid keys for `~matplotlib.patches.FancyArrowPatch` are:</span>


<span class="sd">        ===============  ======================================================</span>
<span class="sd">        Key              Description</span>
<span class="sd">        ===============  ======================================================</span>
<span class="sd">        arrowstyle       the arrow style</span>
<span class="sd">        connectionstyle  the connection style</span>
<span class="sd">        relpos           default is (0.5, 0.5)</span>
<span class="sd">        patchA           default is bounding box of the text</span>
<span class="sd">        patchB           default is None</span>
<span class="sd">        shrinkA          default is 2 points</span>
<span class="sd">        shrinkB          default is 2 points</span>
<span class="sd">        mutation_scale   default is text size (in points)</span>
<span class="sd">        mutation_aspect  default is 1.</span>
<span class="sd">        ?                any key for :class:`matplotlib.patches.PathPatch`</span>
<span class="sd">        ===============  ======================================================</span>


<span class="sd">        *xycoords* and *textcoords* are strings that indicate the</span>
<span class="sd">        coordinates of *xy* and *xytext*, and may be one of the</span>
<span class="sd">        following values:</span>

<span class="sd">        =================   ===================================================</span>
<span class="sd">        Property            Description</span>
<span class="sd">        =================   ===================================================</span>
<span class="sd">        &#39;figure points&#39;     points from the lower left corner of the figure</span>
<span class="sd">        &#39;figure pixels&#39;     pixels from the lower left corner of the figure</span>
<span class="sd">        &#39;figure fraction&#39;   0,0 is lower left of figure and 1,1 is upper right</span>
<span class="sd">        &#39;axes points&#39;       points from lower left corner of axes</span>
<span class="sd">        &#39;axes pixels&#39;       pixels from lower left corner of axes</span>
<span class="sd">        &#39;axes fraction&#39;     0,0 is lower left of axes and 1,1 is upper right</span>
<span class="sd">        &#39;data&#39;              use the coordinate system of the object being</span>
<span class="sd">                            annotated (default)</span>
<span class="sd">        &#39;offset points&#39;     Specify an offset (in points) from the *xy* value</span>

<span class="sd">        &#39;polar&#39;             you can specify *theta*, *r* for the annotation,</span>
<span class="sd">                            even in cartesian plots.  Note that if you</span>
<span class="sd">                            are using a polar axes, you do not need</span>
<span class="sd">                            to specify polar for the coordinate</span>
<span class="sd">                            system since that is the native &quot;data&quot; coordinate</span>
<span class="sd">                            system.</span>
<span class="sd">        =================   ===================================================</span>

<span class="sd">        If a &#39;points&#39; or &#39;pixels&#39; option is specified, values will be</span>
<span class="sd">        added to the bottom-left and if negative, values will be</span>
<span class="sd">        subtracted from the top-right.  e.g.::</span>

<span class="sd">          # 10 points to the right of the left border of the axes and</span>
<span class="sd">          # 5 points below the top border</span>
<span class="sd">          xy=(10,-5), xycoords=&#39;axes points&#39;</span>

<span class="sd">        You may use an instance of</span>
<span class="sd">        :class:`~matplotlib.transforms.Transform` or</span>
<span class="sd">        :class:`~matplotlib.artist.Artist`. See</span>
<span class="sd">        :ref:`plotting-guide-annotation` for more details.</span>

<span class="sd">        The *annotation_clip* attribute controls the visibility of the</span>
<span class="sd">        annotation when it goes outside the axes area. If `True`, the</span>
<span class="sd">        annotation will only be drawn when the *xy* is inside the</span>
<span class="sd">        axes. If `False`, the annotation will always be drawn</span>
<span class="sd">        regardless of its position.  The default is `None`, which</span>
<span class="sd">        behave as `True` only if *xycoords* is &quot;data&quot;.</span>

<span class="sd">        Additional kwargs are `~matplotlib.text.Text` properties:</span>

<span class="sd">        %(Text)s</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_AnnotationBase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                 <span class="n">xy</span><span class="p">,</span>
                                 <span class="n">xycoords</span><span class="o">=</span><span class="n">xycoords</span><span class="p">,</span>
                                 <span class="n">annotation_clip</span><span class="o">=</span><span class="n">annotation_clip</span><span class="p">)</span>
        <span class="c1"># warn about wonky input data</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">xytext</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="n">textcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="n">textcoords</span> <span class="o">!=</span> <span class="n">xycoords</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;You have used the `textcoords` kwarg, but not &quot;</span>
                          <span class="s2">&quot;the `xytext` kwarg.  This can lead to surprising &quot;</span>
                          <span class="s2">&quot;results.&quot;</span><span class="p">)</span>

        <span class="c1"># clean up textcoords and assign default</span>
        <span class="k">if</span> <span class="n">textcoords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">textcoords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xycoords</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_textcoords</span> <span class="o">=</span> <span class="n">textcoords</span>

        <span class="c1"># cleanup xytext defaults</span>
        <span class="k">if</span> <span class="n">xytext</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xytext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xy</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xytext</span>

        <span class="n">Text</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">arrowprops</span> <span class="o">=</span> <span class="n">arrowprops</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">arrow</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">arrowprops</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;arrowstyle&quot;</span> <span class="ow">in</span> <span class="n">arrowprops</span><span class="p">:</span>
                <span class="n">arrowprops</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrowprops</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_relpos</span> <span class="o">=</span> <span class="n">arrowprops</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;relpos&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># modified YAArrow API to be used with FancyArrowPatch</span>
                <span class="n">shapekeys</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="s1">&#39;headwidth&#39;</span><span class="p">,</span> <span class="s1">&#39;headlength&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;shrink&#39;</span><span class="p">,</span> <span class="s1">&#39;frac&#39;</span><span class="p">)</span>
                <span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrowprops</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">shapekeys</span><span class="p">:</span>
                        <span class="n">arrowprops</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>  <span class="c1"># basic Patch properties</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span> <span class="o">=</span> <span class="n">FancyArrowPatch</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                               <span class="o">**</span><span class="n">arrowprops</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Annotation.contains"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Annotation.contains.html#matplotlib.pyplot.Annotation.contains">[docs]</a>    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">contains</span><span class="p">,</span> <span class="n">tinfo</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">in_arrow</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="n">contains</span> <span class="o">=</span> <span class="n">contains</span> <span class="ow">or</span> <span class="n">in_arrow</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">in_patch</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="n">contains</span> <span class="o">=</span> <span class="n">contains</span> <span class="ow">or</span> <span class="n">in_patch</span>

        <span class="k">return</span> <span class="n">contains</span><span class="p">,</span> <span class="n">tinfo</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xyann</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>

    <span class="nd">@xyann</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">xyann</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xytext</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">xytext</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">anncoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_textcoords</span>

    <span class="nd">@anncoords</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">anncoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_textcoords</span> <span class="o">=</span> <span class="n">coords</span>

<div class="viewcode-block" id="Annotation.set_figure"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Annotation.set_figure.html#matplotlib.pyplot.Annotation.set_figure">[docs]</a>    <span class="k">def</span> <span class="nf">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arrow</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
        <span class="n">Artist</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span></div>

<div class="viewcode-block" id="Annotation.update_positions"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Annotation.update_positions.html#matplotlib.pyplot.Annotation.update_positions">[docs]</a>    <span class="k">def</span> <span class="nf">update_positions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;Update the pixel positions of the annotated point and the</span>
<span class="sd">        text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xy_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_position_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_position_xytext</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">xy_pixel</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_update_position_xytext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">xy_pixel</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the pixel positions of the annotation text and the arrow</span>
<span class="sd">        patch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># generate transformation,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_xy_transform</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">anncoords</span><span class="p">))</span>

        <span class="n">ox0</span><span class="p">,</span> <span class="n">oy0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xy_display</span><span class="p">()</span>
        <span class="n">ox1</span><span class="p">,</span> <span class="n">oy1</span> <span class="o">=</span> <span class="n">xy_pixel</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrowprops</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">xy_pixel</span>
            <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span><span class="o">.</span><span class="n">bounds</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">w</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">h</span>
            <span class="n">xc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span>
            <span class="n">yc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span>

            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrowprops</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">ms</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;mutation_scale&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span>
            <span class="n">ms</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_mutation_scale</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;arrowstyle&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                <span class="c1"># Approximately simulate the YAArrow.</span>
                <span class="c1"># Pop its kwargs:</span>
                <span class="n">shrink</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;shrink&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
                <span class="n">width</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">headwidth</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;headwidth&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
                <span class="c1"># Ignore frac--it is useless.</span>
                <span class="n">frac</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;frac&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">frac</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="s2">&quot;&#39;frac&#39; option in &#39;arrowstyle&#39; is no longer supported;&quot;</span>
                        <span class="s2">&quot; use &#39;headlength&#39; to set the head length in points.&quot;</span><span class="p">)</span>
                <span class="n">headlength</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;headlength&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>

                <span class="n">to_style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">/</span> <span class="p">(</span><span class="mi">72</span> <span class="o">*</span> <span class="n">ms</span><span class="p">)</span>

                <span class="n">stylekw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">head_length</span><span class="o">=</span><span class="n">headlength</span> <span class="o">*</span> <span class="n">to_style</span><span class="p">,</span>
                               <span class="n">head_width</span><span class="o">=</span><span class="n">headwidth</span> <span class="o">*</span> <span class="n">to_style</span><span class="p">,</span>
                               <span class="n">tail_width</span><span class="o">=</span><span class="n">width</span> <span class="o">*</span> <span class="n">to_style</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_arrowstyle</span><span class="p">(</span><span class="s1">&#39;simple&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">stylekw</span><span class="p">)</span>

                <span class="c1"># using YAArrow style:</span>
                <span class="c1"># pick the x,y corner of the text bbox closest to point</span>
                <span class="c1"># annotated</span>
                <span class="n">xpos</span> <span class="o">=</span> <span class="p">((</span><span class="n">l</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">xc</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
                <span class="n">ypos</span> <span class="o">=</span> <span class="p">((</span><span class="n">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">yc</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

                <span class="n">dsu</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x0</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">xpos</span><span class="p">]</span>
                <span class="n">dsu</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="n">_</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">relposx</span><span class="p">)</span> <span class="o">=</span> <span class="n">dsu</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                <span class="n">dsu</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">y0</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">ypos</span><span class="p">]</span>
                <span class="n">dsu</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="n">_</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">relposy</span><span class="p">)</span> <span class="o">=</span> <span class="n">dsu</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_relpos</span> <span class="o">=</span> <span class="p">(</span><span class="n">relposx</span><span class="p">,</span> <span class="n">relposy</span><span class="p">)</span>

                <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">((</span><span class="n">y</span> <span class="o">-</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">))</span>
                <span class="n">shrink_pts</span> <span class="o">=</span> <span class="n">shrink</span> <span class="o">*</span> <span class="n">r</span> <span class="o">/</span> <span class="n">renderer</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">shrinkA</span> <span class="o">=</span> <span class="n">shrink_pts</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">shrinkB</span> <span class="o">=</span> <span class="n">shrink_pts</span>

            <span class="c1"># adjust the starting point of the arrow relative to</span>
            <span class="c1"># the textbox.</span>
            <span class="c1"># TODO : Rotation needs to be accounted.</span>
            <span class="n">relpos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arrow_relpos</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="n">ox0</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">x0</span> <span class="o">+</span> <span class="n">bbox</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">relpos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">oy0</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">y0</span> <span class="o">+</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">relpos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1"># The arrow will be drawn from (ox0, oy0) to (ox1,</span>
            <span class="c1"># oy1). It will be first clipped by patchA and patchB.</span>
            <span class="c1"># Then it will be shrunk by shirnkA and shrinkB</span>
            <span class="c1"># (in points). If patch A is not set, self.bbox_patch</span>
            <span class="c1"># is used.</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_positions</span><span class="p">((</span><span class="n">ox0</span><span class="p">,</span> <span class="n">oy0</span><span class="p">),</span> <span class="p">(</span><span class="n">ox1</span><span class="p">,</span> <span class="n">oy1</span><span class="p">))</span>

            <span class="k">if</span> <span class="s2">&quot;patchA&quot;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_patchA</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;patchA&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_patchA</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bbox_patch</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pad</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_patchA</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                        <span class="k">return</span>

                    <span class="n">bbox</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
                    <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">bounds</span>
                    <span class="n">l</span> <span class="o">-=</span> <span class="n">pad</span> <span class="o">/</span> <span class="mf">2.</span>
                    <span class="n">b</span> <span class="o">-=</span> <span class="n">pad</span> <span class="o">/</span> <span class="mf">2.</span>
                    <span class="n">w</span> <span class="o">+=</span> <span class="n">pad</span>
                    <span class="n">h</span> <span class="o">+=</span> <span class="n">pad</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span>
                                  <span class="n">width</span><span class="o">=</span><span class="n">w</span><span class="p">,</span>
                                  <span class="n">height</span><span class="o">=</span><span class="n">h</span><span class="p">,</span>
                                  <span class="p">)</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">set_clip_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">set_patchA</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

    <span class="nd">@allow_rasterization</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the :class:`Annotation` object to the given *renderer*.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_renderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="n">xy_pixel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_position_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_xy</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">xy_pixel</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_position_xytext</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="n">xy_pixel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_bbox_position_size</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>   <span class="c1"># FancyArrowPatch</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">figure</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="c1"># Draw text, including FancyBboxPatch, after FancyArrowPatch.</span>
        <span class="c1"># Otherwise, a wedge arrowstyle can land partly on top of the Bbox.</span>
        <span class="n">Text</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>

<div class="viewcode-block" id="Annotation.get_window_extent"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.Annotation.get_window_extent.html#matplotlib.pyplot.Annotation.get_window_extent">[docs]</a>    <span class="k">def</span> <span class="nf">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Return a :class:`~matplotlib.transforms.Bbox` object bounding</span>
<span class="sd">        the text and arrow annotation, in display units.</span>

<span class="sd">        *renderer* defaults to the _renderer attribute of the text</span>
<span class="sd">        object.  This is not assigned until the first execution of</span>
<span class="sd">        :meth:`draw`, so you must use this kwarg if you want</span>
<span class="sd">        to call :meth:`get_window_extent` prior to the first</span>
<span class="sd">        :meth:`draw`.  For getting web page regions, it is</span>
<span class="sd">        simpler to call the method after saving the figure. The</span>
<span class="sd">        *dpi* used defaults to self.figure.dpi; the renderer dpi is</span>
<span class="sd">        irrelevant.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
        <span class="n">arrow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow</span>
        <span class="n">arrow_patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span>

        <span class="n">text_bbox</span> <span class="o">=</span> <span class="n">Text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">bboxes</span> <span class="o">=</span> <span class="p">[</span><span class="n">text_bbox</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bboxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrow_patch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bboxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrow_patch</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">bboxes</span><span class="p">)</span></div></div>


<span class="n">docstring</span><span class="o">.</span><span class="n">interpd</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">Annotation</span><span class="o">=</span><span class="n">Annotation</span><span class="o">.</span><span class="n">__init__</span><span class="o">.</span><span class="n">__doc__</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
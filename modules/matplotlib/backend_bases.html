

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>matplotlib.backend_bases &mdash; PROJECT_NAME 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PROJECT_NAME 1 documentation" href="../../index.html"/>
        <link rel="up" title="matplotlib" href="../matplotlib.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PROJECT_NAME
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.html">1. matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.pyplot.html">2. matplotlib.pyplot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.axes.html">3. matplotlib.axes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.axis.html">4. matplotlib.axis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.cm.html">5. matplotlib.cm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.colorbar.html">6. matplotlib.colorbar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.colors.html">7. matplotlib.colors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.figure.html">8. matplotlib.figure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.legend.html">9. matplotlib.legend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.lines.html">10. matplotlib.lines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.markers.html">11. matplotlib.markers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.patches.html">12. matplotlib.patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.style.html">13. matplotlib.style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.text.html">14. matplotlib.text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.widgets.html">15. matplotlib.widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../separator.html">16. ===== INFREQ =====</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.animation.html">17. matplotlib.animation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.artist.html">18. matplotlib.artist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.backends.html">19. matplotlib.backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.cbook.html">20. matplotlib.cbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.collections.html">21. matplotlib.collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.dates.html">22. matplotlib.dates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.dviread.html">23. matplotlib.dviread</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.finance.html">24. matplotlib.finance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.font_manager.html">25. matplotlib.font_manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.gridspec.html">26. matplotlib.gridspec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.image.html">27. matplotlib.image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.mathtext.html">28. matplotlib.mathtext</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.mlab.html">29. matplotlib.mlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.offsetbox.html">30. matplotlib.offsetbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.path.html">31. matplotlib.path</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.patheffects.html">32. matplotlib.patheffects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.sankey.html">33. matplotlib.sankey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.spines.html">34. matplotlib.spines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.ticker.html">35. matplotlib.ticker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.tight_layout.html">36. matplotlib.tight_layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.tri.html">37. matplotlib.tri</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.type1font.html">38. matplotlib.type1font</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/matplotlib.units.html">39. matplotlib.units</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PROJECT_NAME</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../matplotlib.html">matplotlib</a> &raquo;</li>
        
      <li>matplotlib.backend_bases</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for matplotlib.backend_bases</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Abstract base classes define the primitives that renderers and</span>
<span class="sd">graphics contexts must implement to serve as a matplotlib backend</span>

<span class="sd">:class:`RendererBase`</span>
<span class="sd">    An abstract base class to handle drawing/rendering operations.</span>

<span class="sd">:class:`FigureCanvasBase`</span>
<span class="sd">    The abstraction layer that separates the</span>
<span class="sd">    :class:`matplotlib.figure.Figure` from the backend specific</span>
<span class="sd">    details like a user interface drawing area</span>

<span class="sd">:class:`GraphicsContextBase`</span>
<span class="sd">    An abstract base class that provides color, line styles, etc...</span>

<span class="sd">:class:`Event`</span>
<span class="sd">    The base class for all of the matplotlib event</span>
<span class="sd">    handling.  Derived classes such as :class:`KeyEvent` and</span>
<span class="sd">    :class:`MouseEvent` store the meta data like keys and buttons</span>
<span class="sd">    pressed, x and y locations in pixel and</span>
<span class="sd">    :class:`~matplotlib.axes.Axes` coordinates.</span>

<span class="sd">:class:`ShowBase`</span>
<span class="sd">    The base class for the Show class of each interactive backend;</span>
<span class="sd">    the &#39;show&#39; callable is then set to Show.__call__, inherited from</span>
<span class="sd">    ShowBase.</span>

<span class="sd">:class:`ToolContainerBase`</span>
<span class="sd">     The base class for the Toolbar class of each interactive backend.</span>

<span class="sd">:class:`StatusbarBase`</span>
<span class="sd">    The base class for the messaging area.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="k">import</span> <span class="n">contextmanager</span>

<span class="kn">from</span> <span class="nn">matplotlib.externals</span> <span class="k">import</span> <span class="n">six</span>
<span class="kn">from</span> <span class="nn">matplotlib.externals.six.moves</span> <span class="k">import</span> <span class="n">xrange</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.cbook</span> <span class="k">as</span> <span class="nn">cbook</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">colors</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="k">as</span> <span class="nn">transforms</span>
<span class="kn">import</span> <span class="nn">matplotlib.widgets</span> <span class="k">as</span> <span class="nn">widgets</span>
<span class="c1">#import matplotlib.path as path</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">rcParams</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">is_interactive</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">get_backend</span>
<span class="kn">from</span> <span class="nn">matplotlib._pylab_helpers</span> <span class="k">import</span> <span class="n">Gcf</span>

<span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="k">import</span> <span class="n">Bbox</span><span class="p">,</span> <span class="n">TransformedBbox</span><span class="p">,</span> <span class="n">Affine2D</span>

<span class="kn">import</span> <span class="nn">matplotlib.tight_bbox</span> <span class="k">as</span> <span class="nn">tight_bbox</span>
<span class="kn">import</span> <span class="nn">matplotlib.textpath</span> <span class="k">as</span> <span class="nn">textpath</span>
<span class="kn">from</span> <span class="nn">matplotlib.path</span> <span class="k">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">matplotlib.cbook</span> <span class="k">import</span> <span class="n">mplDeprecation</span><span class="p">,</span> <span class="n">warn_deprecated</span>
<span class="kn">import</span> <span class="nn">matplotlib.backend_tools</span> <span class="k">as</span> <span class="nn">tools</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">importlib</span> <span class="k">import</span> <span class="n">import_module</span>
<span class="k">except</span><span class="p">:</span>
    <span class="c1"># simple python 2.6 implementation (no relative imports)</span>
    <span class="k">def</span> <span class="nf">import_module</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="k">import</span> <span class="n">Image</span>
    <span class="n">_has_pil</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">del</span> <span class="n">Image</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">_has_pil</span> <span class="o">=</span> <span class="kc">False</span>


<span class="n">_default_filetypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ps&#39;</span><span class="p">:</span> <span class="s1">&#39;Postscript&#39;</span><span class="p">,</span>
    <span class="s1">&#39;eps&#39;</span><span class="p">:</span> <span class="s1">&#39;Encapsulated Postscript&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pdf&#39;</span><span class="p">:</span> <span class="s1">&#39;Portable Document Format&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pgf&#39;</span><span class="p">:</span> <span class="s1">&#39;PGF code for LaTeX&#39;</span><span class="p">,</span>
    <span class="s1">&#39;png&#39;</span><span class="p">:</span> <span class="s1">&#39;Portable Network Graphics&#39;</span><span class="p">,</span>
    <span class="s1">&#39;raw&#39;</span><span class="p">:</span> <span class="s1">&#39;Raw RGBA bitmap&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgba&#39;</span><span class="p">:</span> <span class="s1">&#39;Raw RGBA bitmap&#39;</span><span class="p">,</span>
    <span class="s1">&#39;svg&#39;</span><span class="p">:</span> <span class="s1">&#39;Scalable Vector Graphics&#39;</span><span class="p">,</span>
    <span class="s1">&#39;svgz&#39;</span><span class="p">:</span> <span class="s1">&#39;Scalable Vector Graphics&#39;</span>
<span class="p">}</span>


<span class="n">_default_backends</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ps&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_ps&#39;</span><span class="p">,</span>
    <span class="s1">&#39;eps&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_ps&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pdf&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_pdf&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pgf&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_pgf&#39;</span><span class="p">,</span>
    <span class="s1">&#39;png&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_agg&#39;</span><span class="p">,</span>
    <span class="s1">&#39;raw&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_agg&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rgba&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_agg&#39;</span><span class="p">,</span>
    <span class="s1">&#39;svg&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_svg&#39;</span><span class="p">,</span>
    <span class="s1">&#39;svgz&#39;</span><span class="p">:</span> <span class="s1">&#39;matplotlib.backends.backend_svg&#39;</span><span class="p">,</span>
<span class="p">}</span>


<span class="k">def</span> <span class="nf">register_backend</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Register a backend for saving to a given file format.</span>

<span class="sd">    format : str</span>
<span class="sd">        File extention</span>

<span class="sd">    backend : module string or canvas class</span>
<span class="sd">        Backend for handling file output</span>

<span class="sd">    description : str, optional</span>
<span class="sd">        Description of the file type.  Defaults to an empty string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">_default_backends</span><span class="p">[</span><span class="nb">format</span><span class="p">]</span> <span class="o">=</span> <span class="n">backend</span>
    <span class="n">_default_filetypes</span><span class="p">[</span><span class="nb">format</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>


<span class="k">def</span> <span class="nf">get_registered_canvas_class</span><span class="p">(</span><span class="nb">format</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the registered default canvas for given file format.</span>
<span class="sd">    Handles deferred import of required backend.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_default_backends</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">backend_class</span> <span class="o">=</span> <span class="n">_default_backends</span><span class="p">[</span><span class="nb">format</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_string_like</span><span class="p">(</span><span class="n">backend_class</span><span class="p">):</span>
        <span class="n">backend_class</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">backend_class</span><span class="p">)</span><span class="o">.</span><span class="n">FigureCanvas</span>
        <span class="n">_default_backends</span><span class="p">[</span><span class="nb">format</span><span class="p">]</span> <span class="o">=</span> <span class="n">backend_class</span>
    <span class="k">return</span> <span class="n">backend_class</span>


<span class="k">class</span> <span class="nc">ShowBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simple base class to generate a show() callable in backends.</span>

<span class="sd">    Subclass must override mainloop() method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show all figures.  If *block* is not None, then</span>
<span class="sd">        it is a boolean that overrides all other factors</span>
<span class="sd">        determining whether show blocks by calling mainloop().</span>
<span class="sd">        The other factors are:</span>
<span class="sd">        it does not block if run inside ipython&#39;s &quot;%pylab&quot; mode</span>
<span class="sd">        it does not block in interactive mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">managers</span> <span class="o">=</span> <span class="n">Gcf</span><span class="o">.</span><span class="n">get_all_fig_managers</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">managers</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">manager</span> <span class="ow">in</span> <span class="n">managers</span><span class="p">:</span>
            <span class="n">manager</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">block</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">block</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="c1"># Hack: determine at runtime whether we are</span>
        <span class="c1"># inside ipython in pylab mode.</span>
        <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ipython_pylab</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="o">.</span><span class="n">_needmain</span>
            <span class="c1"># IPython versions &gt;= 0.10 tack the _needmain</span>
            <span class="c1"># attribute onto pyplot.show, and always set</span>
            <span class="c1"># it to False, when in %pylab mode.</span>
            <span class="n">ipython_pylab</span> <span class="o">=</span> <span class="n">ipython_pylab</span> <span class="ow">and</span> <span class="n">get_backend</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;WebAgg&#39;</span>
            <span class="c1"># TODO: The above is a hack to get the WebAgg backend</span>
            <span class="c1"># working with ipython&#39;s `%pylab` mode until proper</span>
            <span class="c1"># integration is implemented.</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">ipython_pylab</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Leave the following as a separate step in case we</span>
        <span class="c1"># want to control this behavior with an rcParam.</span>
        <span class="k">if</span> <span class="n">ipython_pylab</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_interactive</span><span class="p">()</span> <span class="ow">or</span> <span class="n">get_backend</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;WebAgg&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">mainloop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<div class="viewcode-block" id="RendererBase"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.html#matplotlib.patheffects.RendererBase">[docs]</a><span class="k">class</span> <span class="nc">RendererBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An abstract base class to handle drawing/rendering operations.</span>

<span class="sd">    The following methods must be implemented in the backend for full</span>
<span class="sd">    functionality (though just implementing :meth:`draw_path` alone would</span>
<span class="sd">    give a highly capable backend):</span>

<span class="sd">    * :meth:`draw_path`</span>
<span class="sd">    * :meth:`draw_image`</span>
<span class="sd">    * :meth:`draw_gouraud_triangle`</span>

<span class="sd">    The following methods *should* be implemented in the backend for</span>
<span class="sd">    optimization reasons:</span>

<span class="sd">    * :meth:`draw_text`</span>
<span class="sd">    * :meth:`draw_markers`</span>
<span class="sd">    * :meth:`draw_path_collection`</span>
<span class="sd">    * :meth:`draw_quad_mesh`</span>

<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="RendererBase.__init__"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.__init__.html#matplotlib.patheffects.RendererBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texmanager</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_text2path</span> <span class="o">=</span> <span class="n">textpath</span><span class="o">.</span><span class="n">TextToPath</span><span class="p">()</span></div>

<div class="viewcode-block" id="RendererBase.open_group"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.open_group.html#matplotlib.patheffects.RendererBase.open_group">[docs]</a>    <span class="k">def</span> <span class="nf">open_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a grouping element with label *s*. If *gid* is given, use</span>
<span class="sd">        *gid* as the id of the group. Is only currently used by</span>
<span class="sd">        :mod:`~matplotlib.backends.backend_svg`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="RendererBase.close_group"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.close_group.html#matplotlib.patheffects.RendererBase.close_group">[docs]</a>    <span class="k">def</span> <span class="nf">close_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close a grouping element with label *s*</span>
<span class="sd">        Is only currently used by :mod:`~matplotlib.backends.backend_svg`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="RendererBase.draw_path"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_path.html#matplotlib.patheffects.RendererBase.draw_path">[docs]</a>    <span class="k">def</span> <span class="nf">draw_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">rgbFace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a :class:`~matplotlib.path.Path` instance using the</span>
<span class="sd">        given affine transform.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="RendererBase.draw_markers"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_markers.html#matplotlib.patheffects.RendererBase.draw_markers">[docs]</a>    <span class="k">def</span> <span class="nf">draw_markers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">marker_path</span><span class="p">,</span> <span class="n">marker_trans</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span>
                     <span class="n">trans</span><span class="p">,</span> <span class="n">rgbFace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a marker at each of the vertices in path.  This includes</span>
<span class="sd">        all vertices, including control points on curves.  To avoid</span>
<span class="sd">        that behavior, those vertices should be removed before calling</span>
<span class="sd">        this function.</span>

<span class="sd">        *gc*</span>
<span class="sd">            the :class:`GraphicsContextBase` instance</span>

<span class="sd">        *marker_trans*</span>
<span class="sd">            is an affine transform applied to the marker.</span>

<span class="sd">        *trans*</span>
<span class="sd">             is an affine transform applied to the path.</span>

<span class="sd">        This provides a fallback implementation of draw_markers that</span>
<span class="sd">        makes multiple calls to :meth:`draw_path`.  Some backends may</span>
<span class="sd">        want to override this method in order to draw the marker only</span>
<span class="sd">        once and reuse it multiple times.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">codes</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">iter_segments</span><span class="p">(</span><span class="n">trans</span><span class="p">,</span> <span class="n">simplify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">):</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_path</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="n">marker_path</span><span class="p">,</span>
                               <span class="n">marker_trans</span> <span class="o">+</span>
                               <span class="n">transforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span>
                               <span class="n">rgbFace</span><span class="p">)</span></div>

<div class="viewcode-block" id="RendererBase.draw_path_collection"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_path_collection.html#matplotlib.patheffects.RendererBase.draw_path_collection">[docs]</a>    <span class="k">def</span> <span class="nf">draw_path_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">master_transform</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span> <span class="n">all_transforms</span><span class="p">,</span>
                             <span class="n">offsets</span><span class="p">,</span> <span class="n">offsetTrans</span><span class="p">,</span> <span class="n">facecolors</span><span class="p">,</span> <span class="n">edgecolors</span><span class="p">,</span>
                             <span class="n">linewidths</span><span class="p">,</span> <span class="n">linestyles</span><span class="p">,</span> <span class="n">antialiaseds</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span>
                             <span class="n">offset_position</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a collection of paths selecting drawing properties from</span>
<span class="sd">        the lists *facecolors*, *edgecolors*, *linewidths*,</span>
<span class="sd">        *linestyles* and *antialiaseds*. *offsets* is a list of</span>
<span class="sd">        offsets to apply to each of the paths.  The offsets in</span>
<span class="sd">        *offsets* are first transformed by *offsetTrans* before being</span>
<span class="sd">        applied.  *offset_position* may be either &quot;screen&quot; or &quot;data&quot;</span>
<span class="sd">        depending on the space that the offsets are in.</span>

<span class="sd">        This provides a fallback implementation of</span>
<span class="sd">        :meth:`draw_path_collection` that makes multiple calls to</span>
<span class="sd">        :meth:`draw_path`.  Some backends may want to override this in</span>
<span class="sd">        order to render each set of path data only once, and then</span>
<span class="sd">        reference that path multiple times with the different offsets,</span>
<span class="sd">        colors, styles etc.  The generator methods</span>
<span class="sd">        :meth:`_iter_collection_raw_paths` and</span>
<span class="sd">        :meth:`_iter_collection` are provided to help with (and</span>
<span class="sd">        standardize) the implementation across backends.  It is highly</span>
<span class="sd">        recommended to use those generators, so that changes to the</span>
<span class="sd">        behavior of :meth:`draw_path_collection` can be made globally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">transform</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_collection_raw_paths</span><span class="p">(</span>
                <span class="n">master_transform</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span> <span class="n">all_transforms</span><span class="p">):</span>
            <span class="n">path_ids</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">path</span><span class="p">,</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">(</span><span class="n">transform</span><span class="p">)))</span>

        <span class="k">for</span> <span class="n">xo</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">path_id</span><span class="p">,</span> <span class="n">gc0</span><span class="p">,</span> <span class="n">rgbFace</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iter_collection</span><span class="p">(</span>
            <span class="n">gc</span><span class="p">,</span> <span class="n">master_transform</span><span class="p">,</span> <span class="n">all_transforms</span><span class="p">,</span> <span class="n">path_ids</span><span class="p">,</span> <span class="n">offsets</span><span class="p">,</span>
            <span class="n">offsetTrans</span><span class="p">,</span> <span class="n">facecolors</span><span class="p">,</span> <span class="n">edgecolors</span><span class="p">,</span> <span class="n">linewidths</span><span class="p">,</span> <span class="n">linestyles</span><span class="p">,</span>
                <span class="n">antialiaseds</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span> <span class="n">offset_position</span><span class="p">):</span>
            <span class="n">path</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">path_id</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">(</span>
                            <span class="n">transform</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">())</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">xo</span><span class="p">,</span> <span class="n">yo</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_path</span><span class="p">(</span><span class="n">gc0</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">rgbFace</span><span class="p">)</span></div>

<div class="viewcode-block" id="RendererBase.draw_quad_mesh"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_quad_mesh.html#matplotlib.patheffects.RendererBase.draw_quad_mesh">[docs]</a>    <span class="k">def</span> <span class="nf">draw_quad_mesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">master_transform</span><span class="p">,</span> <span class="n">meshWidth</span><span class="p">,</span> <span class="n">meshHeight</span><span class="p">,</span>
                       <span class="n">coordinates</span><span class="p">,</span> <span class="n">offsets</span><span class="p">,</span> <span class="n">offsetTrans</span><span class="p">,</span> <span class="n">facecolors</span><span class="p">,</span>
                       <span class="n">antialiased</span><span class="p">,</span> <span class="n">edgecolors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This provides a fallback implementation of</span>
<span class="sd">        :meth:`draw_quad_mesh` that generates paths and then calls</span>
<span class="sd">        :meth:`draw_path_collection`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">matplotlib.collections</span> <span class="k">import</span> <span class="n">QuadMesh</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="n">QuadMesh</span><span class="o">.</span><span class="n">convert_mesh_to_paths</span><span class="p">(</span>
            <span class="n">meshWidth</span><span class="p">,</span> <span class="n">meshHeight</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">edgecolors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">edgecolors</span> <span class="o">=</span> <span class="n">facecolors</span>
        <span class="n">linewidths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">gc</span><span class="o">.</span><span class="n">get_linewidth</span><span class="p">()],</span> <span class="n">np</span><span class="o">.</span><span class="n">float_</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_path_collection</span><span class="p">(</span>
            <span class="n">gc</span><span class="p">,</span> <span class="n">master_transform</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span> <span class="p">[],</span> <span class="n">offsets</span><span class="p">,</span> <span class="n">offsetTrans</span><span class="p">,</span> <span class="n">facecolors</span><span class="p">,</span>
            <span class="n">edgecolors</span><span class="p">,</span> <span class="n">linewidths</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[</span><span class="n">antialiased</span><span class="p">],</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span> <span class="s1">&#39;screen&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="RendererBase.draw_gouraud_triangle"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_gouraud_triangle.html#matplotlib.patheffects.RendererBase.draw_gouraud_triangle">[docs]</a>    <span class="k">def</span> <span class="nf">draw_gouraud_triangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">transform</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a Gouraud-shaded triangle.</span>

<span class="sd">        *points* is a 3x2 array of (x, y) points for the triangle.</span>

<span class="sd">        *colors* is a 3x4 array of RGBA colors for each point of the</span>
<span class="sd">        triangle.</span>

<span class="sd">        *transform* is an affine transform to apply to the points.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="RendererBase.draw_gouraud_triangles"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_gouraud_triangles.html#matplotlib.patheffects.RendererBase.draw_gouraud_triangles">[docs]</a>    <span class="k">def</span> <span class="nf">draw_gouraud_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">triangles_array</span><span class="p">,</span> <span class="n">colors_array</span><span class="p">,</span>
                               <span class="n">transform</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a series of Gouraud triangles.</span>

<span class="sd">        *points* is a Nx3x2 array of (x, y) points for the trianglex.</span>

<span class="sd">        *colors* is a Nx3x4 array of RGBA colors for each point of the</span>
<span class="sd">        triangles.</span>

<span class="sd">        *transform* is an affine transform to apply to the points.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transform</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">tri</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">triangles_array</span><span class="p">,</span> <span class="n">colors_array</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_gouraud_triangle</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="n">tri</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">transform</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_iter_collection_raw_paths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master_transform</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span>
                                   <span class="n">all_transforms</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is a helper method (along with :meth:`_iter_collection`) to make</span>
<span class="sd">        it easier to write a space-efficent :meth:`draw_path_collection`</span>
<span class="sd">        implementation in a backend.</span>

<span class="sd">        This method yields all of the base path/transform</span>
<span class="sd">        combinations, given a master transform, a list of paths and</span>
<span class="sd">        list of transforms.</span>

<span class="sd">        The arguments should be exactly what is passed in to</span>
<span class="sd">        :meth:`draw_path_collection`.</span>

<span class="sd">        The backend should take each yielded path and transform and</span>
<span class="sd">        create an object that can be referenced (reused) later.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Npaths</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
        <span class="n">Ntransforms</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_transforms</span><span class="p">)</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Npaths</span><span class="p">,</span> <span class="n">Ntransforms</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">Npaths</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">transform</span> <span class="o">=</span> <span class="n">transforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Npaths</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Ntransforms</span><span class="p">:</span>
                <span class="n">transform</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">(</span><span class="n">all_transforms</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Ntransforms</span><span class="p">])</span>
            <span class="k">yield</span> <span class="n">path</span><span class="p">,</span> <span class="n">transform</span> <span class="o">+</span> <span class="n">master_transform</span>

    <span class="k">def</span> <span class="nf">_iter_collection_uses_per_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span> <span class="n">all_transforms</span><span class="p">,</span>
                                       <span class="n">offsets</span><span class="p">,</span> <span class="n">facecolors</span><span class="p">,</span> <span class="n">edgecolors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute how many times each raw path object returned by</span>
<span class="sd">        _iter_collection_raw_paths would be used when calling</span>
<span class="sd">        _iter_collection. This is intended for the backend to decide</span>
<span class="sd">        on the tradeoff between using the paths in-line and storing</span>
<span class="sd">        them once and reusing. Rounds up in case the number of uses</span>
<span class="sd">        is not the same for every path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Npaths</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Npaths</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">facecolors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">edgecolors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">Npath_ids</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Npaths</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_transforms</span><span class="p">))</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Npath_ids</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">offsets</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">N</span> <span class="o">+</span> <span class="n">Npath_ids</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">Npath_ids</span>

    <span class="k">def</span> <span class="nf">_iter_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">master_transform</span><span class="p">,</span> <span class="n">all_transforms</span><span class="p">,</span>
                         <span class="n">path_ids</span><span class="p">,</span> <span class="n">offsets</span><span class="p">,</span> <span class="n">offsetTrans</span><span class="p">,</span> <span class="n">facecolors</span><span class="p">,</span>
                         <span class="n">edgecolors</span><span class="p">,</span> <span class="n">linewidths</span><span class="p">,</span> <span class="n">linestyles</span><span class="p">,</span>
                         <span class="n">antialiaseds</span><span class="p">,</span> <span class="n">urls</span><span class="p">,</span> <span class="n">offset_position</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is a helper method (along with</span>
<span class="sd">        :meth:`_iter_collection_raw_paths`) to make it easier to write</span>
<span class="sd">        a space-efficent :meth:`draw_path_collection` implementation in a</span>
<span class="sd">        backend.</span>

<span class="sd">        This method yields all of the path, offset and graphics</span>
<span class="sd">        context combinations to draw the path collection.  The caller</span>
<span class="sd">        should already have looped over the results of</span>
<span class="sd">        :meth:`_iter_collection_raw_paths` to draw this collection.</span>

<span class="sd">        The arguments should be the same as that passed into</span>
<span class="sd">        :meth:`draw_path_collection`, with the exception of</span>
<span class="sd">        *path_ids*, which is a list of arbitrary objects that the</span>
<span class="sd">        backend will use to reference one of the paths created in the</span>
<span class="sd">        :meth:`_iter_collection_raw_paths` stage.</span>

<span class="sd">        Each yielded result is of the form::</span>

<span class="sd">           xo, yo, path_id, gc, rgbFace</span>

<span class="sd">        where *xo*, *yo* is an offset; *path_id* is one of the elements of</span>
<span class="sd">        *path_ids*; *gc* is a graphics context and *rgbFace* is a color to</span>
<span class="sd">        use for filling the path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Ntransforms</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_transforms</span><span class="p">)</span>
        <span class="n">Npaths</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_ids</span><span class="p">)</span>
        <span class="n">Noffsets</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">offsets</span><span class="p">)</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Npaths</span><span class="p">,</span> <span class="n">Noffsets</span><span class="p">)</span>
        <span class="n">Nfacecolors</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">facecolors</span><span class="p">)</span>
        <span class="n">Nedgecolors</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">edgecolors</span><span class="p">)</span>
        <span class="n">Nlinewidths</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">linewidths</span><span class="p">)</span>
        <span class="n">Nlinestyles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">linestyles</span><span class="p">)</span>
        <span class="n">Naa</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">antialiaseds</span><span class="p">)</span>
        <span class="n">Nurls</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">Nfacecolors</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">Nedgecolors</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="n">Npaths</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">Noffsets</span><span class="p">:</span>
            <span class="n">toffsets</span> <span class="o">=</span> <span class="n">offsetTrans</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">offsets</span><span class="p">)</span>

        <span class="n">gc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_gc</span><span class="p">()</span>
        <span class="n">gc0</span><span class="o">.</span><span class="n">copy_properties</span><span class="p">(</span><span class="n">gc</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">Nfacecolors</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rgbFace</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">Nedgecolors</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">gc0</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="n">xo</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">path_id</span> <span class="o">=</span> <span class="n">path_ids</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Npaths</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Noffsets</span><span class="p">:</span>
                <span class="n">xo</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">toffsets</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Noffsets</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">offset_position</span> <span class="o">==</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Ntransforms</span><span class="p">:</span>
                        <span class="n">transform</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">Affine2D</span><span class="p">(</span><span class="n">all_transforms</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Ntransforms</span><span class="p">])</span> <span class="o">+</span>
                            <span class="n">master_transform</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">transform</span> <span class="o">=</span> <span class="n">master_transform</span>
                    <span class="n">xo</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">xo</span><span class="p">,</span> <span class="n">yo</span><span class="p">))</span>
                    <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
                    <span class="n">xo</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">xp</span> <span class="o">-</span> <span class="n">xo</span><span class="p">)</span>
                    <span class="n">yo</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">yp</span> <span class="o">-</span> <span class="n">yo</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">xo</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">yo</span><span class="p">)):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">Nfacecolors</span><span class="p">:</span>
                <span class="n">rgbFace</span> <span class="o">=</span> <span class="n">facecolors</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Nfacecolors</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Nedgecolors</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Nlinewidths</span><span class="p">:</span>
                    <span class="n">gc0</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="n">linewidths</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Nlinewidths</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Nlinestyles</span><span class="p">:</span>
                    <span class="n">gc0</span><span class="o">.</span><span class="n">set_dashes</span><span class="p">(</span><span class="o">*</span><span class="n">linestyles</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Nlinestyles</span><span class="p">])</span>
                <span class="n">fg</span> <span class="o">=</span> <span class="n">edgecolors</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Nedgecolors</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fg</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">fg</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                        <span class="n">gc0</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">gc0</span><span class="o">.</span><span class="n">set_foreground</span><span class="p">(</span><span class="n">fg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">gc0</span><span class="o">.</span><span class="n">set_foreground</span><span class="p">(</span><span class="n">fg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rgbFace</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgbFace</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rgbFace</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">rgbFace</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">gc0</span><span class="o">.</span><span class="n">set_antialiased</span><span class="p">(</span><span class="n">antialiaseds</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Naa</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">Nurls</span><span class="p">:</span>
                <span class="n">gc0</span><span class="o">.</span><span class="n">set_url</span><span class="p">(</span><span class="n">urls</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">Nurls</span><span class="p">])</span>

            <span class="k">yield</span> <span class="n">xo</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">path_id</span><span class="p">,</span> <span class="n">gc0</span><span class="p">,</span> <span class="n">rgbFace</span>
        <span class="n">gc0</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>

<div class="viewcode-block" id="RendererBase.get_image_magnification"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.get_image_magnification.html#matplotlib.patheffects.RendererBase.get_image_magnification">[docs]</a>    <span class="k">def</span> <span class="nf">get_image_magnification</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the factor by which to magnify images passed to :meth:`draw_image`.</span>
<span class="sd">        Allows a backend to have images at a different resolution to other</span>
<span class="sd">        artists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mf">1.0</span></div>

<div class="viewcode-block" id="RendererBase.draw_image"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_image.html#matplotlib.patheffects.RendererBase.draw_image">[docs]</a>    <span class="k">def</span> <span class="nf">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">im</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the image instance into the current axes;</span>

<span class="sd">        *gc*</span>
<span class="sd">            a GraphicsContext containing clipping information</span>

<span class="sd">        *x*</span>
<span class="sd">            is the distance in pixels from the left hand side of the canvas.</span>

<span class="sd">        *y*</span>
<span class="sd">            the distance from the origin.  That is, if origin is</span>
<span class="sd">            upper, y is the distance from top.  If origin is lower, y</span>
<span class="sd">            is the distance from bottom</span>

<span class="sd">        *im*</span>
<span class="sd">            the :class:`matplotlib._image.Image` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="RendererBase.option_image_nocomposite"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.option_image_nocomposite.html#matplotlib.patheffects.RendererBase.option_image_nocomposite">[docs]</a>    <span class="k">def</span> <span class="nf">option_image_nocomposite</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        override this method for renderers that do not necessarily always</span>
<span class="sd">        want to rescale and composite raster images. (like SVG, PDF, or PS)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="RendererBase.option_scale_image"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.option_scale_image.html#matplotlib.patheffects.RendererBase.option_scale_image">[docs]</a>    <span class="k">def</span> <span class="nf">option_scale_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        override this method for renderers that support arbitrary</span>
<span class="sd">        scaling of image (most of the vector backend).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="RendererBase.draw_tex"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_tex.html#matplotlib.patheffects.RendererBase.draw_tex">[docs]</a>    <span class="k">def</span> <span class="nf">draw_tex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">ismath</span><span class="o">=</span><span class="s1">&#39;TeX!&#39;</span><span class="p">,</span> <span class="n">mtext</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_draw_text_as_path</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">ismath</span><span class="o">=</span><span class="s2">&quot;TeX&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="RendererBase.draw_text"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.draw_text.html#matplotlib.patheffects.RendererBase.draw_text">[docs]</a>    <span class="k">def</span> <span class="nf">draw_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">ismath</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mtext</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the text instance</span>

<span class="sd">        *gc*</span>
<span class="sd">            the :class:`GraphicsContextBase` instance</span>

<span class="sd">        *x*</span>
<span class="sd">            the x location of the text in display coords</span>

<span class="sd">        *y*</span>
<span class="sd">            the y location of the text baseline in display coords</span>

<span class="sd">        *s*</span>
<span class="sd">            the text string</span>

<span class="sd">        *prop*</span>
<span class="sd">          a :class:`matplotlib.font_manager.FontProperties` instance</span>

<span class="sd">        *angle*</span>
<span class="sd">            the rotation angle in degrees</span>

<span class="sd">        *mtext*</span>
<span class="sd">            a :class:`matplotlib.text.Text` instance</span>

<span class="sd">        **backend implementers note**</span>

<span class="sd">        When you are trying to determine if you have gotten your bounding box</span>
<span class="sd">        right (which is what enables the text layout/alignment to work</span>
<span class="sd">        properly), it helps to change the line in text.py::</span>

<span class="sd">            if 0: bbox_artist(self, renderer)</span>

<span class="sd">        to if 1, and then the actual bounding box will be plotted along with</span>
<span class="sd">        your text.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_draw_text_as_path</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">ismath</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_text_path_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">ismath</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the text path and transform</span>

<span class="sd">        *prop*</span>
<span class="sd">          font property</span>

<span class="sd">        *s*</span>
<span class="sd">          text to be converted</span>

<span class="sd">        *usetex*</span>
<span class="sd">          If True, use matplotlib usetex mode.</span>

<span class="sd">        *ismath*</span>
<span class="sd">          If True, use mathtext parser. If &quot;TeX&quot;, use *usetex* mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">text2path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text2path</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">get_size_in_points</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">ismath</span> <span class="o">==</span> <span class="s2">&quot;TeX&quot;</span><span class="p">:</span>
            <span class="n">verts</span><span class="p">,</span> <span class="n">codes</span> <span class="o">=</span> <span class="n">text2path</span><span class="o">.</span><span class="n">get_text_path</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">ismath</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                   <span class="n">usetex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">verts</span><span class="p">,</span> <span class="n">codes</span> <span class="o">=</span> <span class="n">text2path</span><span class="o">.</span><span class="n">get_text_path</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">ismath</span><span class="o">=</span><span class="n">ismath</span><span class="p">,</span>
                                                   <span class="n">usetex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">verts</span><span class="p">,</span> <span class="n">codes</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">angle</span> <span class="o">/</span> <span class="mf">180.</span> <span class="o">*</span> <span class="mf">3.141592</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flipy</span><span class="p">():</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">/</span> <span class="n">text2path</span><span class="o">.</span><span class="n">FONT_SCALE</span><span class="p">,</span>
                                         <span class="n">fontsize</span> <span class="o">/</span> <span class="n">text2path</span><span class="o">.</span><span class="n">FONT_SCALE</span><span class="p">)</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">/</span> <span class="n">text2path</span><span class="o">.</span><span class="n">FONT_SCALE</span><span class="p">,</span>
                                         <span class="n">fontsize</span> <span class="o">/</span> <span class="n">text2path</span><span class="o">.</span><span class="n">FONT_SCALE</span><span class="p">)</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">path</span><span class="p">,</span> <span class="n">transform</span>

    <span class="k">def</span> <span class="nf">_draw_text_as_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">ismath</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        draw the text by converting them to paths using textpath module.</span>

<span class="sd">        *prop*</span>
<span class="sd">          font property</span>

<span class="sd">        *s*</span>
<span class="sd">          text to be converted</span>

<span class="sd">        *usetex*</span>
<span class="sd">          If True, use matplotlib usetex mode.</span>

<span class="sd">        *ismath*</span>
<span class="sd">          If True, use mathtext parser. If &quot;TeX&quot;, use *usetex* mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_text_path_transform</span><span class="p">(</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">ismath</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">get_rgb</span><span class="p">()</span>

        <span class="n">gc</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_path</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">transform</span><span class="p">,</span> <span class="n">rgbFace</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

<div class="viewcode-block" id="RendererBase.get_text_width_height_descent"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.get_text_width_height_descent.html#matplotlib.patheffects.RendererBase.get_text_width_height_descent">[docs]</a>    <span class="k">def</span> <span class="nf">get_text_width_height_descent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">ismath</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the width and height, and the offset from the bottom to the</span>
<span class="sd">        baseline (descent), in display coords of the string s with</span>
<span class="sd">        :class:`~matplotlib.font_manager.FontProperties` prop</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ismath</span> <span class="o">==</span> <span class="s1">&#39;TeX&#39;</span><span class="p">:</span>
            <span class="c1"># todo: handle props</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_size_in_points</span><span class="p">()</span>
            <span class="n">texmanager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text2path</span><span class="o">.</span><span class="n">get_texmanager</span><span class="p">()</span>
            <span class="n">fontsize</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_size_in_points</span><span class="p">()</span>
            <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">texmanager</span><span class="o">.</span><span class="n">get_text_width_height_descent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">,</span>
                                                               <span class="n">renderer</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span>

        <span class="n">dpi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_to_pixels</span><span class="p">(</span><span class="mi">72</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ismath</span><span class="p">:</span>
            <span class="n">dims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text2path</span><span class="o">.</span><span class="n">mathtext_parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">dpi</span><span class="p">,</span> <span class="n">prop</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># return width, height, descent</span>

        <span class="n">flags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text2path</span><span class="o">.</span><span class="n">_get_hinting_flag</span><span class="p">()</span>
        <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text2path</span><span class="o">.</span><span class="n">_get_font</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_size_in_points</span><span class="p">()</span>
        <span class="n">font</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span>
        <span class="c1"># the width and height of unrotated string</span>
        <span class="n">font</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">flags</span><span class="p">)</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">get_width_height</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">get_descent</span><span class="p">()</span>
        <span class="n">w</span> <span class="o">/=</span> <span class="mf">64.0</span>  <span class="c1"># convert from subpixels</span>
        <span class="n">h</span> <span class="o">/=</span> <span class="mf">64.0</span>
        <span class="n">d</span> <span class="o">/=</span> <span class="mf">64.0</span>
        <span class="k">return</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span></div>

<div class="viewcode-block" id="RendererBase.flipy"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.flipy.html#matplotlib.patheffects.RendererBase.flipy">[docs]</a>    <span class="k">def</span> <span class="nf">flipy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return true if y small numbers are top for renderer Is used</span>
<span class="sd">        for drawing text (:mod:`matplotlib.text`) and images</span>
<span class="sd">        (:mod:`matplotlib.image`) only</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="RendererBase.get_canvas_width_height"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.get_canvas_width_height.html#matplotlib.patheffects.RendererBase.get_canvas_width_height">[docs]</a>    <span class="k">def</span> <span class="nf">get_canvas_width_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;return the canvas width and height in display coords&#39;</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="RendererBase.get_texmanager"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.get_texmanager.html#matplotlib.patheffects.RendererBase.get_texmanager">[docs]</a>    <span class="k">def</span> <span class="nf">get_texmanager</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the :class:`matplotlib.texmanager.TexManager` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texmanager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">matplotlib.texmanager</span> <span class="k">import</span> <span class="n">TexManager</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texmanager</span> <span class="o">=</span> <span class="n">TexManager</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texmanager</span></div>

<div class="viewcode-block" id="RendererBase.new_gc"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.new_gc.html#matplotlib.patheffects.RendererBase.new_gc">[docs]</a>    <span class="k">def</span> <span class="nf">new_gc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return an instance of a :class:`GraphicsContextBase`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">GraphicsContextBase</span><span class="p">()</span></div>

<div class="viewcode-block" id="RendererBase.points_to_pixels"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.points_to_pixels.html#matplotlib.patheffects.RendererBase.points_to_pixels">[docs]</a>    <span class="k">def</span> <span class="nf">points_to_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert points to display units</span>

<span class="sd">        *points*</span>
<span class="sd">            a float or a numpy array of float</span>

<span class="sd">        return points converted to pixels</span>

<span class="sd">        You need to override this function (unless your backend</span>
<span class="sd">        doesn&#39;t have a dpi, e.g., postscript or svg).  Some imaging</span>
<span class="sd">        systems assume some value for pixels per inch::</span>

<span class="sd">            points to pixels = points * pixels_per_inch/72.0 * dpi/72.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">points</span></div>

<div class="viewcode-block" id="RendererBase.strip_math"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.strip_math.html#matplotlib.patheffects.RendererBase.strip_math">[docs]</a>    <span class="k">def</span> <span class="nf">strip_math</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">strip_math</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="RendererBase.start_rasterizing"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.start_rasterizing.html#matplotlib.patheffects.RendererBase.start_rasterizing">[docs]</a>    <span class="k">def</span> <span class="nf">start_rasterizing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used in MixedModeRenderer. Switch to the raster renderer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="RendererBase.stop_rasterizing"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.stop_rasterizing.html#matplotlib.patheffects.RendererBase.stop_rasterizing">[docs]</a>    <span class="k">def</span> <span class="nf">stop_rasterizing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used in MixedModeRenderer. Switch back to the vector renderer</span>
<span class="sd">        and draw the contents of the raster renderer as an image on</span>
<span class="sd">        the vector renderer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="RendererBase.start_filter"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.start_filter.html#matplotlib.patheffects.RendererBase.start_filter">[docs]</a>    <span class="k">def</span> <span class="nf">start_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used in AggRenderer. Switch to a temporary renderer for image</span>
<span class="sd">        filtering effects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="RendererBase.stop_filter"><a class="viewcode-back" href="../../generated/generated/matplotlib.text.RendererBase.stop_filter.html#matplotlib.patheffects.RendererBase.stop_filter">[docs]</a>    <span class="k">def</span> <span class="nf">stop_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used in AggRenderer. Switch back to the original renderer.</span>
<span class="sd">        The contents of the temporary renderer is processed with the</span>
<span class="sd">        *filter_func* and is drawn on the original renderer as an</span>
<span class="sd">        image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div></div>


<span class="k">class</span> <span class="nc">GraphicsContextBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An abstract base class that provides color, line styles, etc...</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># a mapping from dash styles to suggested offset, dash pairs</span>
    <span class="n">dashd</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;solid&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="s1">&#39;dashed&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)),</span>
        <span class="s1">&#39;dashdot&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)),</span>
        <span class="s1">&#39;dotted&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)),</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forced_alpha</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># if True, _alpha overrides A from RGBA</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_antialiased</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># use 0,1 not True, False for extension code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_capstyle</span> <span class="o">=</span> <span class="s1">&#39;butt&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cliprect</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clippath</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_joinstyle</span> <span class="o">=</span> <span class="s1">&#39;round&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linestyle</span> <span class="o">=</span> <span class="s1">&#39;solid&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linewidth</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hatch</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_snap</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">copy_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gc</span><span class="p">):</span>
        <span class="s1">&#39;Copy properties from gc to self&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forced_alpha</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_forced_alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_antialiased</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_antialiased</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_capstyle</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_capstyle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cliprect</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_cliprect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clippath</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_clippath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashes</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_dashes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_joinstyle</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_joinstyle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linestyle</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_linestyle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linewidth</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_linewidth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_rgb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hatch</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_hatch</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gid</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_gid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_snap</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_snap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">_sketch</span>

    <span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restore the graphics context from the stack - needed only</span>
<span class="sd">        for backends that save graphics contexts on a stack</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the alpha value used for blending - not supported on</span>
<span class="sd">        all backends</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span>

    <span class="k">def</span> <span class="nf">get_antialiased</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Return true if the object should try to do antialiased rendering&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_antialiased</span>

    <span class="k">def</span> <span class="nf">get_capstyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the capstyle as a string in (&#39;butt&#39;, &#39;round&#39;, &#39;projecting&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capstyle</span>

    <span class="k">def</span> <span class="nf">get_clip_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the clip rectangle as a :class:`~matplotlib.transforms.Bbox`</span>
<span class="sd">        instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cliprect</span>

    <span class="k">def</span> <span class="nf">get_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the clip path in the form (path, transform), where path</span>
<span class="sd">        is a :class:`~matplotlib.path.Path` instance, and transform is</span>
<span class="sd">        an affine transform to apply to the path before clipping.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clippath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clippath</span><span class="o">.</span><span class="n">get_transformed_path_and_affine</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_dashes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the dash information as an offset dashlist tuple.</span>

<span class="sd">        The dash list is a even size list that gives the ink on, ink</span>
<span class="sd">        off in pixels.</span>

<span class="sd">        See p107 of to PostScript `BLUEBOOK</span>
<span class="sd">        &lt;http://www-cdf.fnal.gov/offline/PostScript/BLUEBOOK.PDF&gt;`_</span>
<span class="sd">        for more info.</span>

<span class="sd">        Default value is None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dashes</span>

    <span class="k">def</span> <span class="nf">get_forced_alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether the value given by get_alpha() should be used to</span>
<span class="sd">        override any other alpha-channel values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forced_alpha</span>

    <span class="k">def</span> <span class="nf">get_joinstyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the line join style as one of (&#39;miter&#39;, &#39;round&#39;, &#39;bevel&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_joinstyle</span>

    <span class="k">def</span> <span class="nf">get_linestyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the linestyle: one of (&#39;solid&#39;, &#39;dashed&#39;, &#39;dashdot&#39;,</span>
<span class="sd">        &#39;dotted&#39;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linestyle</span>

    <span class="k">def</span> <span class="nf">get_linewidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the line width in points as a scalar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linewidth</span>

    <span class="k">def</span> <span class="nf">get_rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns a tuple of three or four floats from 0-1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span>

    <span class="k">def</span> <span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns a url if one is set, None otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span>

    <span class="k">def</span> <span class="nf">get_gid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the object identifier if one is set, None otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gid</span>

    <span class="k">def</span> <span class="nf">get_snap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns the snap setting which may be:</span>

<span class="sd">          * True: snap vertices to the nearest pixel center</span>

<span class="sd">          * False: leave vertices as-is</span>

<span class="sd">          * None: (auto) If the path contains only rectilinear line</span>
<span class="sd">            segments, round to the nearest pixel center</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_snap</span>

    <span class="k">def</span> <span class="nf">set_alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the alpha value used for blending - not supported on all backends.</span>
<span class="sd">        If ``alpha=None`` (the default), the alpha components of the</span>
<span class="sd">        foreground and fill colors will be used to set their respective</span>
<span class="sd">        transparencies (where applicable); otherwise, ``alpha`` will override</span>
<span class="sd">        them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span> <span class="o">=</span> <span class="n">alpha</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_forced_alpha</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_forced_alpha</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_foreground</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span><span class="p">,</span> <span class="n">isRGBA</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_antialiased</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        True if object should be drawn with antialiased rendering</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># use 0, 1 to make life easier on extension code trying to read the gc</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_antialiased</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_antialiased</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">set_capstyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the capstyle as a string in (&#39;butt&#39;, &#39;round&#39;, &#39;projecting&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cs</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;butt&#39;</span><span class="p">,</span> <span class="s1">&#39;round&#39;</span><span class="p">,</span> <span class="s1">&#39;projecting&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_capstyle</span> <span class="o">=</span> <span class="n">cs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Unrecognized cap style.  Found </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_clip_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the clip rectangle with sequence (left, bottom, width, height)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cliprect</span> <span class="o">=</span> <span class="n">rectangle</span>

    <span class="k">def</span> <span class="nf">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the clip path and transformation.  Path should be a</span>
<span class="sd">        :class:`~matplotlib.transforms.TransformedPath` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span>
                <span class="n">transforms</span><span class="o">.</span><span class="n">TransformedPath</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Path should be a matplotlib.transforms.TransformedPath&quot;</span>
                   <span class="s2">&quot;instance.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clippath</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span> <span class="nf">set_dashes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dash_offset</span><span class="p">,</span> <span class="n">dash_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the dash style for the gc.</span>

<span class="sd">        *dash_offset*</span>
<span class="sd">            is the offset (usually 0).</span>

<span class="sd">        *dash_list*</span>
<span class="sd">            specifies the on-off sequence as points.</span>
<span class="sd">            ``(None, None)`` specifies a solid line</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dash_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">dash_list</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">dl</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All values in the dash list must be positive&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dashes</span> <span class="o">=</span> <span class="n">dash_offset</span><span class="p">,</span> <span class="n">dash_list</span>

    <span class="k">def</span> <span class="nf">set_foreground</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fg</span><span class="p">,</span> <span class="n">isRGBA</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the foreground color.  fg can be a MATLAB format string, a</span>
<span class="sd">        html hex color string, an rgb or rgba unit tuple, or a float between 0</span>
<span class="sd">        and 1.  In the latter case, grayscale is used.</span>

<span class="sd">        If you know fg is rgba, set ``isRGBA=True`` for efficiency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forced_alpha</span> <span class="ow">and</span> <span class="n">isRGBA</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span> <span class="o">=</span> <span class="n">fg</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span><span class="p">,)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forced_alpha</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">colorConverter</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">fg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">isRGBA</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span> <span class="o">=</span> <span class="n">fg</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">colorConverter</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">fg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_graylevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frac</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the foreground color to be a gray level with *frac*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># When removing, remember to remove all overrides in subclasses.</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;set_graylevel is deprecated for removal in 1.6; &quot;</span>
                <span class="s2">&quot;you can achieve the same result by using &quot;</span>
                <span class="s2">&quot;set_foreground((frac, frac, frac))&quot;</span><span class="p">)</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">mplDeprecation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rgb</span> <span class="o">=</span> <span class="p">(</span><span class="n">frac</span><span class="p">,</span> <span class="n">frac</span><span class="p">,</span> <span class="n">frac</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_alpha</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_joinstyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the join style to be one of (&#39;miter&#39;, &#39;round&#39;, &#39;bevel&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">js</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;miter&#39;</span><span class="p">,</span> <span class="s1">&#39;round&#39;</span><span class="p">,</span> <span class="s1">&#39;bevel&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_joinstyle</span> <span class="o">=</span> <span class="n">js</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Unrecognized join style.  Found </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">js</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_linewidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the linewidth in points</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linewidth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_linestyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the linestyle to be one of (&#39;solid&#39;, &#39;dashed&#39;, &#39;dashdot&#39;,</span>
<span class="sd">        &#39;dotted&#39;). One may specify customized dash styles by providing</span>
<span class="sd">        a tuple of (offset, dash pairs). For example, the predefiend</span>
<span class="sd">        linestyles have following values.:</span>

<span class="sd">         &#39;dashed&#39;  : (0, (6.0, 6.0)),</span>
<span class="sd">         &#39;dashdot&#39; : (0, (3.0, 5.0, 1.0, 5.0)),</span>
<span class="sd">         &#39;dotted&#39;  : (0, (1.0, 3.0)),</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dashd</span><span class="p">:</span>
            <span class="n">offset</span><span class="p">,</span> <span class="n">dashes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dashd</span><span class="p">[</span><span class="n">style</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">offset</span><span class="p">,</span> <span class="n">dashes</span> <span class="o">=</span> <span class="n">style</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Unrecognized linestyle: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">style</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_linestyle</span> <span class="o">=</span> <span class="n">style</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_dashes</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">dashes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the url for links in compatible backends</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>

    <span class="k">def</span> <span class="nf">set_gid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gid</span> <span class="o">=</span> <span class="nb">id</span>

    <span class="k">def</span> <span class="nf">set_snap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">snap</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the snap setting which may be:</span>

<span class="sd">          * True: snap vertices to the nearest pixel center</span>

<span class="sd">          * False: leave vertices as-is</span>

<span class="sd">          * None: (auto) If the path contains only rectilinear line</span>
<span class="sd">            segments, round to the nearest pixel center</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_snap</span> <span class="o">=</span> <span class="n">snap</span>

    <span class="k">def</span> <span class="nf">set_hatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hatch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the hatch style for filling</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hatch</span> <span class="o">=</span> <span class="n">hatch</span>

    <span class="k">def</span> <span class="nf">get_hatch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the current hatch style</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hatch</span>

    <span class="k">def</span> <span class="nf">get_hatch_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="mf">6.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a Path for the current hatch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hatch</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">Path</span><span class="o">.</span><span class="n">hatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hatch</span><span class="p">,</span> <span class="n">density</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_sketch_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the sketch parameters for the artist.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        sketch_params : tuple or `None`</span>

<span class="sd">        A 3-tuple with the following elements:</span>

<span class="sd">          * `scale`: The amplitude of the wiggle perpendicular to the</span>
<span class="sd">            source line.</span>

<span class="sd">          * `length`: The length of the wiggle along the line.</span>

<span class="sd">          * `randomness`: The scale factor by which the length is</span>
<span class="sd">            shrunken or expanded.</span>

<span class="sd">        May return `None` if no sketch parameters were set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sketch</span>

    <span class="k">def</span> <span class="nf">set_sketch_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">randomness</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the sketch parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        scale : float, optional</span>
<span class="sd">            The amplitude of the wiggle perpendicular to the source</span>
<span class="sd">            line, in pixels.  If scale is `None`, or not provided, no</span>
<span class="sd">            sketch filter will be provided.</span>

<span class="sd">        length : float, optional</span>
<span class="sd">             The length of the wiggle along the line, in pixels</span>
<span class="sd">             (default 128.0)</span>

<span class="sd">        randomness : float, optional</span>
<span class="sd">            The scale factor by which the length is shrunken or</span>
<span class="sd">            expanded (default 16.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sketch</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_sketch</span> <span class="o">=</span> <span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">length</span> <span class="ow">or</span> <span class="mf">128.0</span><span class="p">,</span> <span class="n">randomness</span> <span class="ow">or</span> <span class="mf">16.0</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TimerBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    A base class for providing timer events, useful for things animations.</span>
<span class="sd">    Backends need to implement a few specific methods in order to use their</span>
<span class="sd">    own timing mechanisms so that the timer events are integrated into their</span>
<span class="sd">    event loops.</span>

<span class="sd">    Mandatory functions that must be implemented:</span>

<span class="sd">        * `_timer_start`: Contains backend-specific code for starting</span>
<span class="sd">          the timer</span>

<span class="sd">        * `_timer_stop`: Contains backend-specific code for stopping</span>
<span class="sd">          the timer</span>

<span class="sd">    Optional overrides:</span>

<span class="sd">        * `_timer_set_single_shot`: Code for setting the timer to</span>
<span class="sd">          single shot operating mode, if supported by the timer</span>
<span class="sd">          object. If not, the `Timer` class itself will store the flag</span>
<span class="sd">          and the `_on_timer` method should be overridden to support</span>
<span class="sd">          such behavior.</span>

<span class="sd">        * `_timer_set_interval`: Code for setting the interval on the</span>
<span class="sd">          timer, if there is a method for doing so on the timer</span>
<span class="sd">          object.</span>

<span class="sd">        * `_on_timer`: This is the internal function that any timer</span>
<span class="sd">          object should call, which will handle the task of running</span>
<span class="sd">          all callbacks that have been set.</span>

<span class="sd">    Attributes:</span>

<span class="sd">        * `interval`: The time between timer events in</span>
<span class="sd">          milliseconds. Default is 1000 ms.</span>

<span class="sd">        * `single_shot`: Boolean flag indicating whether this timer</span>
<span class="sd">          should operate as single shot (run once and then</span>
<span class="sd">          stop). Defaults to `False`.</span>

<span class="sd">        * `callbacks`: Stores list of (func, args) tuples that will be</span>
<span class="sd">          called upon timer events. This list can be manipulated</span>
<span class="sd">          directly, or the functions `add_callback` and</span>
<span class="sd">          `remove_callback` can be used.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#Initialize empty callbacks list and setup default settings if necssary</span>
        <span class="k">if</span> <span class="n">callbacks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="n">callbacks</span><span class="p">[:]</span>  <span class="c1"># Create a copy</span>

        <span class="k">if</span> <span class="n">interval</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_interval</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_interval</span> <span class="o">=</span> <span class="n">interval</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_single</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Default attribute for holding the GUI-specific timer object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Need to stop timer and possibly disconnect timer.&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_stop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Start the timer object. `interval` is optional and will be used</span>
<span class="sd">        to reset the timer interval first if provided.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">interval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_interval</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Stop the timer.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_stop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_timer_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_timer_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_get_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interval</span>

    <span class="k">def</span> <span class="nf">_set_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="p">):</span>
        <span class="c1"># Force to int since none of the backends actually support fractional</span>
        <span class="c1"># milliseconds, and some error or give warnings.</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_set_interval</span><span class="p">()</span>

    <span class="n">interval</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_interval</span><span class="p">,</span> <span class="n">_set_interval</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_single_shot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_single</span>

    <span class="k">def</span> <span class="nf">_set_single_shot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ss</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_single</span> <span class="o">=</span> <span class="n">ss</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_set_single_shot</span><span class="p">()</span>

    <span class="n">single_shot</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_single_shot</span><span class="p">,</span> <span class="n">_set_single_shot</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Register `func` to be called by timer when the event fires. Any</span>
<span class="sd">        additional arguments provided will be passed to `func`.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">remove_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Remove `func` from list of callbacks. `args` and `kwargs` are optional</span>
<span class="sd">        and used to distinguish between copies of the same function registered</span>
<span class="sd">        to be called with different arguments.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">funcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">funcs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">funcs</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_timer_set_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Used to set interval on underlying timer object.&#39;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_timer_set_single_shot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Used to set single shot on underlying timer object.&#39;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_on_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Runs all function that have been registered as callbacks. Functions</span>
<span class="sd">        can return False (or 0) if they should not be called any more. If there</span>
<span class="sd">        are no callbacks, the timer is automatically stopped.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># docstring above explains why we use `if ret == False` here,</span>
            <span class="c1"># instead of `if not ret`.</span>
            <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">Event</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A matplotlib event.  Attach additional attributes as defined in</span>
<span class="sd">    :meth:`FigureCanvasBase.mpl_connect`.  The following attributes</span>
<span class="sd">    are defined and shown with their default values</span>

<span class="sd">    *name*</span>
<span class="sd">        the event name</span>

<span class="sd">    *canvas*</span>
<span class="sd">        the FigureCanvas instance generating the event</span>

<span class="sd">    *guiEvent*</span>
<span class="sd">        the GUI event that triggered the matplotlib event</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">canvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">guiEvent</span> <span class="o">=</span> <span class="n">guiEvent</span>


<span class="k">class</span> <span class="nc">IdleEvent</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An event triggered by the GUI backend when it is idle -- useful</span>
<span class="sd">    for passive animation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">DrawEvent</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An event triggered by a draw operation on the canvas</span>

<span class="sd">    In addition to the :class:`Event` attributes, the following event</span>
<span class="sd">    attributes are defined:</span>

<span class="sd">    *renderer*</span>
<span class="sd">        the :class:`RendererBase` instance for the draw event</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="n">Event</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">renderer</span> <span class="o">=</span> <span class="n">renderer</span>


<span class="k">class</span> <span class="nc">ResizeEvent</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An event triggered by a canvas resize</span>

<span class="sd">    In addition to the :class:`Event` attributes, the following event</span>
<span class="sd">    attributes are defined:</span>

<span class="sd">    *width*</span>
<span class="sd">        width of the canvas in pixels</span>

<span class="sd">    *height*</span>
<span class="sd">        height of the canvas in pixels</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">):</span>
        <span class="n">Event</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">get_width_height</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">CloseEvent</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An event triggered by a figure being closed</span>

<span class="sd">    In addition to the :class:`Event` attributes, the following event</span>
<span class="sd">    attributes are defined:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">Event</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">guiEvent</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">LocationEvent</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An event that has a screen location</span>

<span class="sd">    The following additional attributes are defined and shown with</span>
<span class="sd">    their default values.</span>

<span class="sd">    In addition to the :class:`Event` attributes, the following</span>
<span class="sd">    event attributes are defined:</span>

<span class="sd">    *x*</span>
<span class="sd">        x position - pixels from left of canvas</span>

<span class="sd">    *y*</span>
<span class="sd">        y position - pixels from bottom of canvas</span>

<span class="sd">    *inaxes*</span>
<span class="sd">        the :class:`~matplotlib.axes.Axes` instance if mouse is over axes</span>

<span class="sd">    *xdata*</span>
<span class="sd">        x coord of mouse in data coords</span>

<span class="sd">    *ydata*</span>
<span class="sd">        y coord of mouse in data coords</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>       <span class="c1"># x position - pixels from left of canvas</span>
    <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>       <span class="c1"># y position - pixels from right of canvas</span>
    <span class="n">inaxes</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># the Axes instance if mouse us over axes</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># x coord of mouse in data coords</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># y coord of mouse in data coords</span>

    <span class="c1"># the last event that was triggered before this one</span>
    <span class="n">lastevent</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *x*, *y* in figure coords, 0,0 = bottom, left</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Event</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># cannot check if event was in axes if no x,y info</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_enter_leave</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># Find all axes containing the mouse</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axes_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()</span>
                         <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">in_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mouse_grabber</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># None found</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_enter_leave</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">axes_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># Overlap, get the highest zorder</span>
            <span class="n">axes_list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">zorder</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">=</span> <span class="n">axes_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Use the highest zorder</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Just found one hit</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">=</span> <span class="n">axes_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
            <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">xdata</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="n">ydata</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_enter_leave</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_update_enter_leave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;process the figure/axes enter leave events&#39;</span>
        <span class="k">if</span> <span class="n">LocationEvent</span><span class="o">.</span><span class="n">lastevent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">LocationEvent</span><span class="o">.</span><span class="n">lastevent</span>
            <span class="k">if</span> <span class="n">last</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span><span class="p">:</span>
                <span class="c1"># process axes enter/leave events</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">last</span><span class="o">.</span><span class="n">inaxes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">last</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;axes_leave_event&#39;</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                    <span class="c1"># See ticket 2901582.</span>
                    <span class="c1"># I think this is a valid exception to the rule</span>
                    <span class="c1"># against catching all exceptions; if anything goes</span>
                    <span class="c1"># wrong, we simply want to move on and process the</span>
                    <span class="c1"># current event.</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;axes_enter_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># process a figure enter event</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;axes_enter_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="n">LocationEvent</span><span class="o">.</span><span class="n">lastevent</span> <span class="o">=</span> <span class="bp">self</span>


<span class="k">class</span> <span class="nc">MouseEvent</span><span class="p">(</span><span class="n">LocationEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A mouse event (&#39;button_press_event&#39;,</span>
<span class="sd">                   &#39;button_release_event&#39;,</span>
<span class="sd">                   &#39;scroll_event&#39;,</span>
<span class="sd">                   &#39;motion_notify_event&#39;).</span>

<span class="sd">    In addition to the :class:`Event` and :class:`LocationEvent`</span>
<span class="sd">    attributes, the following attributes are defined:</span>

<span class="sd">    *button*</span>
<span class="sd">        button pressed None, 1, 2, 3, &#39;up&#39;, &#39;down&#39; (up and down are used</span>
<span class="sd">        for scroll events).  Note that in the nbagg backend, both the</span>
<span class="sd">        middle and right clicks return 3 since right clicking will bring</span>
<span class="sd">        up the context menu in some browsers.</span>

<span class="sd">    *key*</span>
<span class="sd">        the key depressed when the mouse event triggered (see</span>
<span class="sd">        :class:`KeyEvent`)</span>

<span class="sd">    *step*</span>
<span class="sd">        number of scroll steps (positive for &#39;up&#39;, negative for &#39;down&#39;)</span>


<span class="sd">    Example usage::</span>

<span class="sd">        def on_press(event):</span>
<span class="sd">            print(&#39;you pressed&#39;, event.button, event.xdata, event.ydata)</span>

<span class="sd">        cid = fig.canvas.mpl_connect(&#39;button_press_event&#39;, on_press)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># x position - pixels from left of canvas</span>
    <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># y position - pixels from right of canvas</span>
    <span class="n">button</span> <span class="o">=</span> <span class="kc">None</span>    <span class="c1"># button pressed None, 1, 2, 3</span>
    <span class="n">dblclick</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># whether or not the event is the result of a double click</span>
    <span class="n">inaxes</span> <span class="o">=</span> <span class="kc">None</span>    <span class="c1"># the Axes instance if mouse us over axes</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># x coord of mouse in data coords</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># y coord of mouse in data coords</span>
    <span class="n">step</span> <span class="o">=</span> <span class="kc">None</span>      <span class="c1"># scroll steps for scroll events</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">step</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dblclick</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        x, y in figure coords, 0,0 = bottom, left</span>
<span class="sd">        button pressed None, 1, 2, 3, &#39;up&#39;, &#39;down&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LocationEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button</span> <span class="o">=</span> <span class="n">button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="n">step</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dblclick</span> <span class="o">=</span> <span class="n">dblclick</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;MPL MouseEvent: xy=(</span><span class="si">%d</span><span class="s2">,</span><span class="si">%d</span><span class="s2">) xydata=(</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">) button=</span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">+</span>
                <span class="s2">&quot;dblclick=</span><span class="si">%s</span><span class="s2"> inaxes=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">button</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">dblclick</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inaxes</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">PickEvent</span><span class="p">(</span><span class="n">Event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a pick event, fired when the user picks a location on the canvas</span>
<span class="sd">    sufficiently close to an artist.</span>

<span class="sd">    Attrs: all the :class:`Event` attributes plus</span>

<span class="sd">    *mouseevent*</span>
<span class="sd">        the :class:`MouseEvent` that generated the pick</span>

<span class="sd">    *artist*</span>
<span class="sd">        the :class:`~matplotlib.artist.Artist` picked</span>

<span class="sd">    other</span>
<span class="sd">        extra class dependent attrs -- e.g., a</span>
<span class="sd">        :class:`~matplotlib.lines.Line2D` pick may define different</span>
<span class="sd">        extra attributes than a</span>
<span class="sd">        :class:`~matplotlib.collections.PatchCollection` pick event</span>


<span class="sd">    Example usage::</span>

<span class="sd">        line, = ax.plot(rand(100), &#39;o&#39;, picker=5)  # 5 points tolerance</span>

<span class="sd">        def on_pick(event):</span>
<span class="sd">            thisline = event.artist</span>
<span class="sd">            xdata, ydata = thisline.get_data()</span>
<span class="sd">            ind = event.ind</span>
<span class="sd">            print(&#39;on pick line:&#39;, zip(xdata[ind], ydata[ind]))</span>

<span class="sd">        cid = fig.canvas.mpl_connect(&#39;pick_event&#39;, on_pick)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span>
                 <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Event</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseevent</span> <span class="o">=</span> <span class="n">mouseevent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artist</span> <span class="o">=</span> <span class="n">artist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">KeyEvent</span><span class="p">(</span><span class="n">LocationEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A key event (key press, key release).</span>

<span class="sd">    Attach additional attributes as defined in</span>
<span class="sd">    :meth:`FigureCanvasBase.mpl_connect`.</span>

<span class="sd">    In addition to the :class:`Event` and :class:`LocationEvent`</span>
<span class="sd">    attributes, the following attributes are defined:</span>

<span class="sd">    *key*</span>
<span class="sd">        the key(s) pressed. Could be **None**, a single case sensitive ascii</span>
<span class="sd">        character (&quot;g&quot;, &quot;G&quot;, &quot;#&quot;, etc.), a special key</span>
<span class="sd">        (&quot;control&quot;, &quot;shift&quot;, &quot;f1&quot;, &quot;up&quot;, etc.) or a</span>
<span class="sd">        combination of the above (e.g., &quot;ctrl+alt+g&quot;, &quot;ctrl+alt+G&quot;).</span>

<span class="sd">    .. note::</span>

<span class="sd">        Modifier keys will be prefixed to the pressed key and will be in the</span>
<span class="sd">        order &quot;ctrl&quot;, &quot;alt&quot;, &quot;super&quot;. The exception to this rule is when the</span>
<span class="sd">        pressed key is itself a modifier key, therefore &quot;ctrl+alt&quot; and</span>
<span class="sd">        &quot;alt+control&quot; can both be valid key values.</span>


<span class="sd">    Example usage::</span>

<span class="sd">        def on_key(event):</span>
<span class="sd">            print(&#39;you pressed&#39;, event.key, event.xdata, event.ydata)</span>

<span class="sd">        cid = fig.canvas.mpl_connect(&#39;key_press_event&#39;, on_key)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">LocationEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>


<div class="viewcode-block" id="FigureCanvasBase"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.html#matplotlib.patheffects.FigureCanvasBase">[docs]</a><span class="k">class</span> <span class="nc">FigureCanvasBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The canvas the figure renders into.</span>

<span class="sd">    Public attributes</span>

<span class="sd">        *figure*</span>
<span class="sd">            A :class:`matplotlib.figure.Figure` instance</span>

<span class="sd">      &quot;&quot;&quot;</span>
    <span class="n">events</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;resize_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;draw_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;key_press_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;key_release_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;button_release_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;scroll_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pick_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;idle_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;figure_enter_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;figure_leave_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;axes_enter_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;axes_leave_event&#39;</span><span class="p">,</span>
        <span class="s1">&#39;close_event&#39;</span>
    <span class="p">]</span>

    <span class="n">supports_blit</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">fixed_dpi</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">filetypes</span> <span class="o">=</span> <span class="n">_default_filetypes</span>
    <span class="k">if</span> <span class="n">_has_pil</span><span class="p">:</span>
        <span class="c1"># JPEG support</span>
        <span class="n">register_backend</span><span class="p">(</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;matplotlib.backends.backend_agg&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;Joint Photographic Experts Group&#39;</span><span class="p">)</span>
        <span class="n">register_backend</span><span class="p">(</span><span class="s1">&#39;jpeg&#39;</span><span class="p">,</span> <span class="s1">&#39;matplotlib.backends.backend_agg&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;Joint Photographic Experts Group&#39;</span><span class="p">)</span>

        <span class="c1"># TIFF support</span>
        <span class="n">register_backend</span><span class="p">(</span><span class="s1">&#39;tif&#39;</span><span class="p">,</span> <span class="s1">&#39;matplotlib.backends.backend_agg&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;Tagged Image File Format&#39;</span><span class="p">)</span>
        <span class="n">register_backend</span><span class="p">(</span><span class="s1">&#39;tiff&#39;</span><span class="p">,</span> <span class="s1">&#39;matplotlib.backends.backend_agg&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;Tagged Image File Format&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="FigureCanvasBase.__init__"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.__init__.html#matplotlib.patheffects.FigureCanvasBase.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figure</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_idle_drawing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_saving</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">set_canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">figure</span>
        <span class="c1"># a dictionary from event name to a dictionary that maps cid-&gt;func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">CallbackRegistry</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widgetlock</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">LockDraw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_button</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># the button pressed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># the key pressed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lasty</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_pick_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_pick_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;scroll_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># the axes currently grabbing mouse</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># NavigationToolbar2 will set me</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_idle_drawing</span> <span class="o">=</span> <span class="kc">False</span></div>

    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">_idle_draw_cntx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_idle_drawing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">yield</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_idle_drawing</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="FigureCanvasBase.is_saving"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.is_saving.html#matplotlib.patheffects.FigureCanvasBase.is_saving">[docs]</a>    <span class="k">def</span> <span class="nf">is_saving</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns `True` when the renderer is in the process of saving</span>
<span class="sd">        to a file, rather than rendering for an on-screen buffer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_saving</span></div>

<div class="viewcode-block" id="FigureCanvasBase.onRemove"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.onRemove.html#matplotlib.patheffects.FigureCanvasBase.onRemove">[docs]</a>    <span class="k">def</span> <span class="nf">onRemove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mouse event processor which removes the top artist</span>
<span class="sd">        under the cursor.  Connect this to the &#39;mouse_press_event&#39;</span>
<span class="sd">        using::</span>

<span class="sd">            canvas.mpl_connect(&#39;mouse_press_event&#39;,canvas.onRemove)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find the top artist under the cursor</span>
        <span class="n">under</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">hitlist</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
        <span class="n">under</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">zorder</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">under</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">under</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Try deleting that artist, or its parent if you</span>
        <span class="c1"># can&#39;t delete the artist</span>
        <span class="k">while</span> <span class="n">h</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">h</span><span class="o">.</span><span class="n">remove</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
                <span class="k">break</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">under</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">get_children</span><span class="p">():</span>
                    <span class="n">parent</span> <span class="o">=</span> <span class="n">p</span>
                    <span class="k">break</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">parent</span></div>

<div class="viewcode-block" id="FigureCanvasBase.onHilite"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.onHilite.html#matplotlib.patheffects.FigureCanvasBase.onHilite">[docs]</a>    <span class="k">def</span> <span class="nf">onHilite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mouse event processor which highlights the artists</span>
<span class="sd">        under the cursor.  Connect this to the &#39;motion_notify_event&#39;</span>
<span class="sd">        using::</span>

<span class="sd">            canvas.mpl_connect(&#39;motion_notify_event&#39;,canvas.onHilite)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;onHilite has been deprecated in 1.5 and will be removed &quot;</span>
               <span class="s2">&quot;in 1.6.  This function has not been used internally by mpl &quot;</span>
               <span class="s2">&quot;since 2007.&quot;</span><span class="p">)</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">mplDeprecation</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_active&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="n">under</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">hitlist</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
        <span class="n">enter</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">under</span> <span class="k">if</span> <span class="n">a</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">]</span>
        <span class="n">leave</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="k">if</span> <span class="n">a</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">under</span><span class="p">]</span>
        <span class="c1"># On leave restore the captured colour</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">leave</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;get_color&#39;</span><span class="p">):</span>
                <span class="n">a</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;get_edgecolor&#39;</span><span class="p">):</span>
                <span class="n">a</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">a</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
        <span class="c1"># On enter, capture the color and repaint the artist</span>
        <span class="c1"># with the highlight colour.  Capturing colour has to</span>
        <span class="c1"># be done first in case the parent recolouring affects</span>
        <span class="c1"># the child.</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">enter</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;get_color&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_color</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;get_edgecolor&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">get_edgecolor</span><span class="p">(),</span> <span class="n">a</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">enter</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;get_color&#39;</span><span class="p">):</span>
                <span class="n">a</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;get_edgecolor&#39;</span><span class="p">):</span>
                <span class="n">a</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
                <span class="n">a</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;lightblue&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span></div>

<div class="viewcode-block" id="FigureCanvasBase.pick"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.pick.html#matplotlib.patheffects.FigureCanvasBase.pick">[docs]</a>    <span class="k">def</span> <span class="nf">pick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetlock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.blit"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.blit.html#matplotlib.patheffects.FigureCanvasBase.blit">[docs]</a>    <span class="k">def</span> <span class="nf">blit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        blit the canvas in bbox (default entire canvas)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="FigureCanvasBase.resize"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.resize.html#matplotlib.patheffects.FigureCanvasBase.resize">[docs]</a>    <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the canvas size in pixels</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="FigureCanvasBase.draw_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.draw_event.html#matplotlib.patheffects.FigureCanvasBase.draw_event">[docs]</a>    <span class="k">def</span> <span class="nf">draw_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;draw_event&#39; with a :class:`DrawEvent`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;draw_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">DrawEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.resize_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.resize_event.html#matplotlib.patheffects.FigureCanvasBase.resize_event">[docs]</a>    <span class="k">def</span> <span class="nf">resize_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;resize_event&#39; with a :class:`ResizeEvent`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;resize_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">ResizeEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.close_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.close_event.html#matplotlib.patheffects.FigureCanvasBase.close_event">[docs]</a>    <span class="k">def</span> <span class="nf">close_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method will be called by all functions connected to the</span>
<span class="sd">        &#39;close_event&#39; with a :class:`CloseEvent`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;close_event&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">CloseEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
            <span class="k">pass</span></div>
            <span class="c1"># Suppress the TypeError when the python session is being killed.</span>
            <span class="c1"># It may be that a better solution would be a mechanism to</span>
            <span class="c1"># disconnect all callbacks upon shutdown.</span>
            <span class="c1"># AttributeError occurs on OSX with qt4agg upon exiting</span>
            <span class="c1"># with an open window; &#39;callbacks&#39; attribute no longer exists.</span>

<div class="viewcode-block" id="FigureCanvasBase.key_press_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.key_press_event.html#matplotlib.patheffects.FigureCanvasBase.key_press_event">[docs]</a>    <span class="k">def</span> <span class="nf">key_press_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;key_press_event&#39; with a :class:`KeyEvent`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">key</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;key_press_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">KeyEvent</span><span class="p">(</span>
            <span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lasty</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.key_release_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.key_release_event.html#matplotlib.patheffects.FigureCanvasBase.key_release_event">[docs]</a>    <span class="k">def</span> <span class="nf">key_release_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;key_release_event&#39; with a :class:`KeyEvent`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;key_release_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">KeyEvent</span><span class="p">(</span>
            <span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lasty</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="FigureCanvasBase.pick_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.pick_event.html#matplotlib.patheffects.FigureCanvasBase.pick_event">[docs]</a>    <span class="k">def</span> <span class="nf">pick_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method will be called by artists who are picked and will</span>
<span class="sd">        fire off :class:`PickEvent` callbacks registered listeners</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;pick_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">PickEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span>
                          <span class="n">guiEvent</span><span class="o">=</span><span class="n">mouseevent</span><span class="o">.</span><span class="n">guiEvent</span><span class="p">,</span>
                          <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.scroll_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.scroll_event.html#matplotlib.patheffects.FigureCanvasBase.scroll_event">[docs]</a>    <span class="k">def</span> <span class="nf">scroll_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Backend derived classes should call this function on any</span>
<span class="sd">        scroll wheel event.  x,y are the canvas coords: 0,0 is lower,</span>
<span class="sd">        left.  button and key are as defined in MouseEvent.</span>

<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;scroll_event&#39; with a :class:`MouseEvent` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">step</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button</span> <span class="o">=</span> <span class="s1">&#39;up&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button</span> <span class="o">=</span> <span class="s1">&#39;down&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;scroll_event&#39;</span>
        <span class="n">mouseevent</span> <span class="o">=</span> <span class="n">MouseEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_button</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span>
                                <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.button_press_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.button_press_event.html#matplotlib.patheffects.FigureCanvasBase.button_press_event">[docs]</a>    <span class="k">def</span> <span class="nf">button_press_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">dblclick</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Backend derived classes should call this function on any mouse</span>
<span class="sd">        button press.  x,y are the canvas coords: 0,0 is lower, left.</span>
<span class="sd">        button and key are as defined in :class:`MouseEvent`.</span>

<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;button_press_event&#39; with a :class:`MouseEvent` instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_button</span> <span class="o">=</span> <span class="n">button</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;button_press_event&#39;</span>
        <span class="n">mouseevent</span> <span class="o">=</span> <span class="n">MouseEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span>
                                <span class="n">dblclick</span><span class="o">=</span><span class="n">dblclick</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.button_release_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.button_release_event.html#matplotlib.patheffects.FigureCanvasBase.button_release_event">[docs]</a>    <span class="k">def</span> <span class="nf">button_release_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Backend derived classes should call this function on any mouse</span>
<span class="sd">        button release.</span>

<span class="sd">        *x*</span>
<span class="sd">            the canvas coordinates where 0=left</span>

<span class="sd">        *y*</span>
<span class="sd">            the canvas coordinates where 0=bottom</span>

<span class="sd">        *guiEvent*</span>
<span class="sd">            the native UI event that generated the mpl event</span>


<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;button_release_event&#39; with a :class:`MouseEvent` instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;button_release_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">MouseEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_button</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="FigureCanvasBase.motion_notify_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.motion_notify_event.html#matplotlib.patheffects.FigureCanvasBase.motion_notify_event">[docs]</a>    <span class="k">def</span> <span class="nf">motion_notify_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Backend derived classes should call this function on any</span>
<span class="sd">        motion-notify-event.</span>

<span class="sd">        *x*</span>
<span class="sd">            the canvas coordinates where 0=left</span>

<span class="sd">        *y*</span>
<span class="sd">            the canvas coordinates where 0=bottom</span>

<span class="sd">        *guiEvent*</span>
<span class="sd">            the native UI event that generated the mpl event</span>


<span class="sd">        This method will be call all functions connected to the</span>
<span class="sd">        &#39;motion_notify_event&#39; with a :class:`MouseEvent` instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lasty</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;motion_notify_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">MouseEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_button</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span>
                           <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.leave_notify_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.leave_notify_event.html#matplotlib.patheffects.FigureCanvasBase.leave_notify_event">[docs]</a>    <span class="k">def</span> <span class="nf">leave_notify_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Backend derived classes should call this function when leaving</span>
<span class="sd">        canvas</span>

<span class="sd">        *guiEvent*</span>
<span class="sd">            the native UI event that generated the mpl event</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;figure_leave_event&#39;</span><span class="p">,</span> <span class="n">LocationEvent</span><span class="o">.</span><span class="n">lastevent</span><span class="p">)</span>
        <span class="n">LocationEvent</span><span class="o">.</span><span class="n">lastevent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lasty</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="FigureCanvasBase.enter_notify_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.enter_notify_event.html#matplotlib.patheffects.FigureCanvasBase.enter_notify_event">[docs]</a>    <span class="k">def</span> <span class="nf">enter_notify_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Backend derived classes should call this function when entering</span>
<span class="sd">        canvas</span>

<span class="sd">        *guiEvent*</span>
<span class="sd">            the native UI event that generated the mpl event</span>
<span class="sd">        *xy*</span>
<span class="sd">            the coordinate location of the pointer when the canvas is</span>
<span class="sd">            entered</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">xy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xy</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lastx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lasty</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="s1">&#39;figure_enter_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;figure_enter_event&#39;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.idle_event"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.idle_event.html#matplotlib.patheffects.FigureCanvasBase.idle_event">[docs]</a>    <span class="k">def</span> <span class="nf">idle_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when GUI is idle.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;idle_event&#39;</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">IdleEvent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">guiEvent</span><span class="o">=</span><span class="n">guiEvent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.grab_mouse"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.grab_mouse.html#matplotlib.patheffects.FigureCanvasBase.grab_mouse">[docs]</a>    <span class="k">def</span> <span class="nf">grab_mouse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the child axes which are currently grabbing the mouse events.</span>
<span class="sd">        Usually called by the widgets themselves.</span>
<span class="sd">        It is an error to call this if the mouse is already grabbed by</span>
<span class="sd">        another axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;two different attempted to grab mouse input&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="o">=</span> <span class="n">ax</span></div>

<div class="viewcode-block" id="FigureCanvasBase.release_mouse"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.release_mouse.html#matplotlib.patheffects.FigureCanvasBase.release_mouse">[docs]</a>    <span class="k">def</span> <span class="nf">release_mouse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Release the mouse grab held by the axes, ax.</span>
<span class="sd">        Usually called by the widgets.</span>
<span class="sd">        It is ok to call this even if you ax doesn&#39;t have the mouse</span>
<span class="sd">        grab currently.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="ow">is</span> <span class="n">ax</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="FigureCanvasBase.draw"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.draw.html#matplotlib.patheffects.FigureCanvasBase.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render the :class:`~matplotlib.figure.Figure`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="FigureCanvasBase.draw_idle"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.draw_idle.html#matplotlib.patheffects.FigureCanvasBase.draw_idle">[docs]</a>    <span class="k">def</span> <span class="nf">draw_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :meth:`draw` only if idle; defaults to draw but backends can overrride</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_idle_drawing</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idle_draw_cntx</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.draw_cursor"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.draw_cursor.html#matplotlib.patheffects.FigureCanvasBase.draw_cursor">[docs]</a>    <span class="k">def</span> <span class="nf">draw_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a cursor in the event.axes if inaxes is not None.  Use</span>
<span class="sd">        native GUI drawing for efficiency if possible</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="FigureCanvasBase.get_width_height"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.get_width_height.html#matplotlib.patheffects.FigureCanvasBase.get_width_height">[docs]</a>    <span class="k">def</span> <span class="nf">get_width_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the figure width and height in points or pixels</span>
<span class="sd">        (depending on the backend), truncated to integers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">width</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="FigureCanvasBase.get_supported_filetypes"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.get_supported_filetypes.html#matplotlib.patheffects.FigureCanvasBase.get_supported_filetypes">[docs]</a>    <span class="k">def</span> <span class="nf">get_supported_filetypes</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return dict of savefig file formats supported by this backend&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">filetypes</span></div>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="FigureCanvasBase.get_supported_filetypes_grouped"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.get_supported_filetypes_grouped.html#matplotlib.patheffects.FigureCanvasBase.get_supported_filetypes_grouped">[docs]</a>    <span class="k">def</span> <span class="nf">get_supported_filetypes_grouped</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dict of savefig file formats supported by this backend,</span>
<span class="sd">        where the keys are a file type name, such as &#39;Joint Photographic</span>
<span class="sd">        Experts Group&#39;, and the values are a list of filename extensions used</span>
<span class="sd">        for that filetype, such as [&#39;jpg&#39;, &#39;jpeg&#39;].&quot;&quot;&quot;</span>
        <span class="n">groupings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ext</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">filetypes</span><span class="p">):</span>
            <span class="n">groupings</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
            <span class="n">groupings</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">groupings</span></div>

    <span class="k">def</span> <span class="nf">_get_output_canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a canvas that is suitable for saving figures to a specified</span>
<span class="sd">        file format. If necessary, this function will switch to a registered</span>
<span class="sd">        backend that supports the format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">method_name</span> <span class="o">=</span> <span class="s1">&#39;print_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">format</span>

        <span class="c1"># check if this canvas supports the requested format</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="c1"># check if there is a default canvas for the requested format</span>
        <span class="n">canvas_class</span> <span class="o">=</span> <span class="n">get_registered_canvas_class</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">canvas_class</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_backends</span><span class="p">(</span><span class="n">canvas_class</span><span class="p">)</span>

        <span class="c1"># else report error for unsupported format</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_supported_filetypes</span><span class="p">())</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Format &quot;</span><span class="si">%s</span><span class="s1">&quot; is not supported.</span><span class="se">\n</span><span class="s1">&#39;</span>
                         <span class="s1">&#39;Supported formats: &#39;</span>
                         <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">formats</span><span class="p">)))</span>

<div class="viewcode-block" id="FigureCanvasBase.print_figure"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.print_figure.html#matplotlib.patheffects.FigureCanvasBase.print_figure">[docs]</a>    <span class="k">def</span> <span class="nf">print_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span>
                     <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;portrait&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render the figure to hardcopy. Set the figure patch face and edge</span>
<span class="sd">        colors.  This is useful because some of the GUIs have a gray figure</span>
<span class="sd">        face color background and you&#39;ll probably want to override this on</span>
<span class="sd">        hardcopy.</span>

<span class="sd">        Arguments are:</span>

<span class="sd">        *filename*</span>
<span class="sd">            can also be a file object on image backends</span>

<span class="sd">        *orientation*</span>
<span class="sd">            only currently applies to PostScript printing.</span>

<span class="sd">        *dpi*</span>
<span class="sd">            the dots per inch to save the figure in; if None, use savefig.dpi</span>

<span class="sd">        *facecolor*</span>
<span class="sd">            the facecolor of the figure</span>

<span class="sd">        *edgecolor*</span>
<span class="sd">            the edgecolor of the figure</span>

<span class="sd">        *orientation*</span>
<span class="sd">            landscape&#39; | &#39;portrait&#39; (not supported on all backends)</span>

<span class="sd">        *format*</span>
<span class="sd">            when set, forcibly set the file format to save to</span>

<span class="sd">        *bbox_inches*</span>
<span class="sd">            Bbox in inches. Only the given portion of the figure is</span>
<span class="sd">            saved. If &#39;tight&#39;, try to figure out the tight bbox of</span>
<span class="sd">            the figure. If None, use savefig.bbox</span>

<span class="sd">        *pad_inches*</span>
<span class="sd">            Amount of padding around the figure when bbox_inches is</span>
<span class="sd">            &#39;tight&#39;. If None, use savefig.pad_inches</span>

<span class="sd">        *bbox_extra_artists*</span>
<span class="sd">            A list of extra artists that will be considered when the</span>
<span class="sd">            tight bbox is calculated.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_saving</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># get format from filename, or from backend&#39;s default filetype</span>
            <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_string_like</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_default_filetype</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_string_like</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
                    <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nb">format</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="nb">format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="c1"># get canvas object and print method for format</span>
        <span class="n">canvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_output_canvas</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
        <span class="n">print_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="s1">&#39;print_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">format</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">dpi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dpi</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;savefig.dpi&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">dpi</span> <span class="o">==</span> <span class="s1">&#39;figure&#39;</span><span class="p">:</span>
                <span class="n">dpi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span>

        <span class="n">origDPI</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span>
        <span class="n">origfacecolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">()</span>
        <span class="n">origedgecolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_edgecolor</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">=</span> <span class="n">dpi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">facecolor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="n">edgecolor</span><span class="p">)</span>

        <span class="n">bbox_inches</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;bbox_inches&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bbox_inches</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bbox_inches</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;savefig.bbox&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">bbox_inches</span><span class="p">:</span>
            <span class="c1"># call adjust_bbox to save only the given area</span>
            <span class="k">if</span> <span class="n">bbox_inches</span> <span class="o">==</span> <span class="s2">&quot;tight&quot;</span><span class="p">:</span>
                <span class="c1"># when bbox_inches == &quot;tight&quot;, it saves the figure</span>
                <span class="c1"># twice. The first save command is just to estimate</span>
                <span class="c1"># the bounding box of the figure. A stringIO object is</span>
                <span class="c1"># used as a temporary file object, but it causes a</span>
                <span class="c1"># problem for some backends (ps backend with</span>
                <span class="c1"># usetex=True) if they expect a filename, not a</span>
                <span class="c1"># file-like object. As I think it is best to change</span>
                <span class="c1"># the backend to support file-like object, i&#39;m going</span>
                <span class="c1"># to leave it as it is. However, a better solution</span>
                <span class="c1"># than stringIO seems to be needed. -JJL</span>
                <span class="c1">#result = getattr(self, method_name)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">print_method</span><span class="p">(</span>
                    <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(),</span>
                    <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
                    <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>
                    <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgecolor</span><span class="p">,</span>
                    <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
                    <span class="n">dryrun</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_cachedRenderer</span>
                <span class="n">bbox_inches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

                <span class="n">bbox_artists</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;bbox_extra_artists&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">bbox_artists</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">bbox_artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_default_bbox_extra_artists</span><span class="p">()</span>

                <span class="n">bbox_filtered</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">bbox_artists</span><span class="p">:</span>
                    <span class="n">bbox</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_clip_on</span><span class="p">():</span>
                        <span class="n">clip_box</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_clip_box</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">clip_box</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">bbox</span> <span class="o">=</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">clip_box</span><span class="p">)</span>
                        <span class="n">clip_path</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">clip_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">clip_path</span> <span class="o">=</span> <span class="n">clip_path</span><span class="o">.</span><span class="n">get_fully_transformed_path</span><span class="p">()</span>
                            <span class="n">bbox</span> <span class="o">=</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span>
                                                     <span class="n">clip_path</span><span class="o">.</span><span class="n">get_extents</span><span class="p">())</span>
                    <span class="k">if</span> <span class="n">bbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bbox</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span>
                                             <span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="n">bbox_filtered</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">bbox_filtered</span><span class="p">:</span>
                    <span class="n">_bbox</span> <span class="o">=</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">bbox_filtered</span><span class="p">)</span>
                    <span class="n">trans</span> <span class="o">=</span> <span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span><span class="p">)</span>
                    <span class="n">bbox_extra</span> <span class="o">=</span> <span class="n">TransformedBbox</span><span class="p">(</span><span class="n">_bbox</span><span class="p">,</span> <span class="n">trans</span><span class="p">)</span>
                    <span class="n">bbox_inches</span> <span class="o">=</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">([</span><span class="n">bbox_inches</span><span class="p">,</span> <span class="n">bbox_extra</span><span class="p">])</span>

                <span class="n">pad</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pad_inches&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pad</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">pad</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;savefig.pad_inches&#39;</span><span class="p">]</span>

                <span class="n">bbox_inches</span> <span class="o">=</span> <span class="n">bbox_inches</span><span class="o">.</span><span class="n">padded</span><span class="p">(</span><span class="n">pad</span><span class="p">)</span>

            <span class="n">restore_bbox</span> <span class="o">=</span> <span class="n">tight_bbox</span><span class="o">.</span><span class="n">adjust_bbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="p">,</span>
                                                  <span class="n">canvas</span><span class="o">.</span><span class="n">fixed_dpi</span><span class="p">)</span>

            <span class="n">_bbox_inches_restore</span> <span class="o">=</span> <span class="p">(</span><span class="n">bbox_inches</span><span class="p">,</span> <span class="n">restore_bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_bbox_inches_restore</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#result = getattr(self, method_name)(</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">print_method</span><span class="p">(</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
                <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>
                <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgecolor</span><span class="p">,</span>
                <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
                <span class="n">bbox_inches_restore</span><span class="o">=</span><span class="n">_bbox_inches_restore</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bbox_inches</span> <span class="ow">and</span> <span class="n">restore_bbox</span><span class="p">:</span>
                <span class="n">restore_bbox</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">=</span> <span class="n">origDPI</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">origfacecolor</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="n">origedgecolor</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_saving</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1">#self.figure.canvas.draw() ## seems superfluous</span>
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="FigureCanvasBase.get_default_filetype"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.get_default_filetype.html#matplotlib.patheffects.FigureCanvasBase.get_default_filetype">[docs]</a>    <span class="k">def</span> <span class="nf">get_default_filetype</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the default savefig file format as specified in rcParam</span>
<span class="sd">        ``savefig.format``. Returned string excludes period. Overridden</span>
<span class="sd">        in backends that only support a single file type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;savefig.format&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="FigureCanvasBase.get_window_title"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.get_window_title.html#matplotlib.patheffects.FigureCanvasBase.get_window_title">[docs]</a>    <span class="k">def</span> <span class="nf">get_window_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the title text of the window containing the figure.</span>
<span class="sd">        Return None if there is no window (e.g., a PS backend).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;manager&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_window_title</span><span class="p">()</span></div>

<div class="viewcode-block" id="FigureCanvasBase.set_window_title"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.set_window_title.html#matplotlib.patheffects.FigureCanvasBase.set_window_title">[docs]</a>    <span class="k">def</span> <span class="nf">set_window_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the title text of the window containing the figure.  Note that</span>
<span class="sd">        this has no effect if there is no window (e.g., a PS backend).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;manager&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">set_window_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.get_default_filename"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.get_default_filename.html#matplotlib.patheffects.FigureCanvasBase.get_default_filename">[docs]</a>    <span class="k">def</span> <span class="nf">get_default_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string, which includes extension, suitable for use as</span>
<span class="sd">        a default filename.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">default_basename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_window_title</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;image&#39;</span>
        <span class="n">default_basename</span> <span class="o">=</span> <span class="n">default_basename</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">default_filetype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_default_filetype</span><span class="p">()</span>
        <span class="n">default_filename</span> <span class="o">=</span> <span class="n">default_basename</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">default_filetype</span>

        <span class="n">save_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">rcParams</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;savefig.directory&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>

        <span class="c1"># ensure non-existing filename in save dir</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_dir</span><span class="p">,</span> <span class="n">default_filename</span><span class="p">)):</span>
            <span class="c1"># attach numerical count to basename</span>
            <span class="n">default_filename</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">-</span><span class="si">{1}</span><span class="s1">.</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">default_basename</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">default_filetype</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">default_filename</span></div>

<div class="viewcode-block" id="FigureCanvasBase.switch_backends"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.switch_backends.html#matplotlib.patheffects.FigureCanvasBase.switch_backends">[docs]</a>    <span class="k">def</span> <span class="nf">switch_backends</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">FigureCanvasClass</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instantiate an instance of FigureCanvasClass</span>

<span class="sd">        This is used for backend switching, e.g., to instantiate a</span>
<span class="sd">        FigureCanvasPS from a FigureCanvasGTK.  Note, deep copying is</span>
<span class="sd">        not done, so any changes to one of the instances (e.g., setting</span>
<span class="sd">        figure size or line props), will be reflected in the other</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newCanvas</span> <span class="o">=</span> <span class="n">FigureCanvasClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="n">newCanvas</span><span class="o">.</span><span class="n">_is_saving</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_saving</span>
        <span class="k">return</span> <span class="n">newCanvas</span></div>

<div class="viewcode-block" id="FigureCanvasBase.mpl_connect"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.mpl_connect.html#matplotlib.patheffects.FigureCanvasBase.mpl_connect">[docs]</a>    <span class="k">def</span> <span class="nf">mpl_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Connect event with string *s* to *func*.  The signature of *func* is::</span>

<span class="sd">          def func(event)</span>

<span class="sd">        where event is a :class:`matplotlib.backend_bases.Event`.  The</span>
<span class="sd">        following events are recognized</span>

<span class="sd">        - &#39;button_press_event&#39;</span>
<span class="sd">        - &#39;button_release_event&#39;</span>
<span class="sd">        - &#39;draw_event&#39;</span>
<span class="sd">        - &#39;key_press_event&#39;</span>
<span class="sd">        - &#39;key_release_event&#39;</span>
<span class="sd">        - &#39;motion_notify_event&#39;</span>
<span class="sd">        - &#39;pick_event&#39;</span>
<span class="sd">        - &#39;resize_event&#39;</span>
<span class="sd">        - &#39;scroll_event&#39;</span>
<span class="sd">        - &#39;figure_enter_event&#39;,</span>
<span class="sd">        - &#39;figure_leave_event&#39;,</span>
<span class="sd">        - &#39;axes_enter_event&#39;,</span>
<span class="sd">        - &#39;axes_leave_event&#39;</span>
<span class="sd">        - &#39;close_event&#39;</span>

<span class="sd">        For the location events (button and key press/release), if the</span>
<span class="sd">        mouse is over the axes, the variable ``event.inaxes`` will be</span>
<span class="sd">        set to the :class:`~matplotlib.axes.Axes` the event occurs is</span>
<span class="sd">        over, and additionally, the variables ``event.xdata`` and</span>
<span class="sd">        ``event.ydata`` will be defined.  This is the mouse location</span>
<span class="sd">        in data coords.  See</span>
<span class="sd">        :class:`~matplotlib.backend_bases.KeyEvent` and</span>
<span class="sd">        :class:`~matplotlib.backend_bases.MouseEvent` for more info.</span>

<span class="sd">        Return value is a connection id that can be used with</span>
<span class="sd">        :meth:`~matplotlib.backend_bases.Event.mpl_disconnect`.</span>

<span class="sd">        Example usage::</span>

<span class="sd">            def on_press(event):</span>
<span class="sd">                print(&#39;you pressed&#39;, event.button, event.xdata, event.ydata)</span>

<span class="sd">            cid = canvas.mpl_connect(&#39;button_press_event&#39;, on_press)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;idle_event&#39;</span><span class="p">:</span>
            <span class="n">warn_deprecated</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span>
                <span class="s2">&quot;idle_event is only implemented for the wx backend, and will &quot;</span>
                <span class="s2">&quot;be removed in matplotlib 2.1. Use the animations module &quot;</span>
                <span class="s2">&quot;instead.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.mpl_disconnect"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.mpl_disconnect.html#matplotlib.patheffects.FigureCanvasBase.mpl_disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disconnect callback id cid</span>

<span class="sd">        Example usage::</span>

<span class="sd">            cid = canvas.mpl_connect(&#39;button_press_event&#39;, on_press)</span>
<span class="sd">            #...later</span>
<span class="sd">            canvas.mpl_disconnect(cid)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.new_timer"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.new_timer.html#matplotlib.patheffects.FigureCanvasBase.new_timer">[docs]</a>    <span class="k">def</span> <span class="nf">new_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new backend-specific subclass of</span>
<span class="sd">        :class:`backend_bases.Timer`. This is useful for getting periodic</span>
<span class="sd">        events through the backend&#39;s native event loop. Implemented only for</span>
<span class="sd">        backends with GUIs.</span>

<span class="sd">        optional arguments:</span>

<span class="sd">        *interval*</span>
<span class="sd">          Timer interval in milliseconds</span>
<span class="sd">        *callbacks*</span>
<span class="sd">          Sequence of (func, args, kwargs) where func(*args, **kwargs) will</span>
<span class="sd">          be executed by the timer every *interval*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TimerBase</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="FigureCanvasBase.flush_events"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.flush_events.html#matplotlib.patheffects.FigureCanvasBase.flush_events">[docs]</a>    <span class="k">def</span> <span class="nf">flush_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Flush the GUI events for the figure. Implemented only for</span>
<span class="sd">        backends with GUIs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="FigureCanvasBase.start_event_loop"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.start_event_loop.html#matplotlib.patheffects.FigureCanvasBase.start_event_loop">[docs]</a>    <span class="k">def</span> <span class="nf">start_event_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start an event loop.  This is used to start a blocking event</span>
<span class="sd">        loop so that interactive functions, such as ginput and</span>
<span class="sd">        waitforbuttonpress, can wait for events.  This should not be</span>
<span class="sd">        confused with the main GUI event loop, which is always running</span>
<span class="sd">        and has nothing to do with this.</span>

<span class="sd">        This is implemented only for backends with GUIs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="FigureCanvasBase.stop_event_loop"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.stop_event_loop.html#matplotlib.patheffects.FigureCanvasBase.stop_event_loop">[docs]</a>    <span class="k">def</span> <span class="nf">stop_event_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop an event loop.  This is used to stop a blocking event</span>
<span class="sd">        loop so that interactive functions, such as ginput and</span>
<span class="sd">        waitforbuttonpress, can wait for events.</span>

<span class="sd">        This is implemented only for backends with GUIs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="FigureCanvasBase.start_event_loop_default"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.start_event_loop_default.html#matplotlib.patheffects.FigureCanvasBase.start_event_loop_default">[docs]</a>    <span class="k">def</span> <span class="nf">start_event_loop_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start an event loop.  This is used to start a blocking event</span>
<span class="sd">        loop so that interactive functions, such as ginput and</span>
<span class="sd">        waitforbuttonpress, can wait for events.  This should not be</span>
<span class="sd">        confused with the main GUI event loop, which is always running</span>
<span class="sd">        and has nothing to do with this.</span>

<span class="sd">        This function provides default event loop functionality based</span>
<span class="sd">        on time.sleep that is meant to be used until event loop</span>
<span class="sd">        functions for each of the GUI backends can be written.  As</span>
<span class="sd">        such, it throws a deprecated warning.</span>

<span class="sd">        Call signature::</span>

<span class="sd">            start_event_loop_default(self,timeout=0)</span>

<span class="sd">        This call blocks until a callback function triggers</span>
<span class="sd">        stop_event_loop() or *timeout* is reached.  If *timeout* is</span>
<span class="sd">        &lt;=0, never timeout.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Using default event loop until function specific&quot;</span>
        <span class="nb">str</span> <span class="o">+=</span> <span class="s2">&quot; to this GUI is implemented&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">mplDeprecation</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="n">timestep</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_looping</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_looping</span> <span class="ow">and</span> <span class="n">counter</span> <span class="o">*</span> <span class="n">timestep</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flush_events</span><span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">timestep</span><span class="p">)</span>
            <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="FigureCanvasBase.stop_event_loop_default"><a class="viewcode-back" href="../../generated/generated/matplotlib.pyplot.FigureCanvasBase.stop_event_loop_default.html#matplotlib.patheffects.FigureCanvasBase.stop_event_loop_default">[docs]</a>    <span class="k">def</span> <span class="nf">stop_event_loop_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop an event loop.  This is used to stop a blocking event</span>
<span class="sd">        loop so that interactive functions, such as ginput and</span>
<span class="sd">        waitforbuttonpress, can wait for events.</span>

<span class="sd">        Call signature::</span>

<span class="sd">          stop_event_loop_default(self)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_looping</span> <span class="o">=</span> <span class="kc">False</span></div></div>


<span class="k">def</span> <span class="nf">key_press_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">toolbar</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implement the default mpl key bindings for the canvas and toolbar</span>
<span class="sd">    described at :ref:`key-event-handling`</span>

<span class="sd">    *event*</span>
<span class="sd">      a :class:`KeyEvent` instance</span>
<span class="sd">    *canvas*</span>
<span class="sd">      a :class:`FigureCanvasBase` instance</span>
<span class="sd">    *toolbar*</span>
<span class="sd">      a :class:`NavigationToolbar2` instance</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># these bindings happen whether you are over an axes or not</span>

    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Load key-mappings from your matplotlibrc file.</span>
    <span class="n">fullscreen_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.fullscreen&#39;</span><span class="p">]</span>
    <span class="n">home_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.home&#39;</span><span class="p">]</span>
    <span class="n">back_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.back&#39;</span><span class="p">]</span>
    <span class="n">forward_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.forward&#39;</span><span class="p">]</span>
    <span class="n">pan_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.pan&#39;</span><span class="p">]</span>
    <span class="n">zoom_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.zoom&#39;</span><span class="p">]</span>
    <span class="n">save_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.save&#39;</span><span class="p">]</span>
    <span class="n">quit_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.quit&#39;</span><span class="p">]</span>
    <span class="n">grid_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.grid&#39;</span><span class="p">]</span>
    <span class="n">toggle_yscale_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.yscale&#39;</span><span class="p">]</span>
    <span class="n">toggle_xscale_keys</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.xscale&#39;</span><span class="p">]</span>
    <span class="nb">all</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;keymap.all_axes&#39;</span><span class="p">]</span>

    <span class="c1"># toggle fullscreen mode (default key &#39;f&#39;)</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">fullscreen_keys</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">canvas</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">full_screen_toggle</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># quit the figure (defaut key &#39;ctrl+w&#39;)</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">quit_keys</span><span class="p">:</span>
        <span class="n">Gcf</span><span class="o">.</span><span class="n">destroy_fig</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">toolbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># home or reset mnemonic  (default key &#39;h&#39;, &#39;home&#39; and &#39;r&#39;)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">home_keys</span><span class="p">:</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>
        <span class="c1"># forward / backward keys to enable left handed quick navigation</span>
        <span class="c1"># (default key for backward: &#39;left&#39;, &#39;backspace&#39; and &#39;c&#39;)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">back_keys</span><span class="p">:</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">back</span><span class="p">()</span>
        <span class="c1"># (default key for forward: &#39;right&#39; and &#39;v&#39;)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">forward_keys</span><span class="p">:</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="c1"># pan mnemonic (default key &#39;p&#39;)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">pan_keys</span><span class="p">:</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">pan</span><span class="p">()</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">_set_cursor</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># zoom mnemonic (default key &#39;o&#39;)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">zoom_keys</span><span class="p">:</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">zoom</span><span class="p">()</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">_set_cursor</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># saving current figure (default key &#39;s&#39;)</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">save_keys</span><span class="p">:</span>
            <span class="n">toolbar</span><span class="o">.</span><span class="n">save_figure</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># these bindings require the mouse to be over an axes to trigger</span>

    <span class="c1"># switching on/off a grid in current axes (default key &#39;g&#39;)</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">grid_keys</span><span class="p">:</span>
        <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="c1"># toggle scaling of y-axes between &#39;log and &#39;linear&#39; (default key &#39;l&#39;)</span>
    <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">toggle_yscale_keys</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;linear&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="c1"># toggle scaling of x-axes between &#39;log and &#39;linear&#39; (default key &#39;k&#39;)</span>
    <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">toggle_xscale_keys</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span>
        <span class="n">scalex</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scalex</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">scalex</span> <span class="o">==</span> <span class="s1">&#39;linear&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">elif</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="nb">all</span><span class="p">:</span>
        <span class="c1"># keys in list &#39;all&#39; enables all axes (default key &#39;a&#39;),</span>
        <span class="c1"># otherwise if key is a number only enable this particular axes</span>
        <span class="c1"># if it was the axes, where the event was raised</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="nb">all</span><span class="p">):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()):</span>
            <span class="c1"># consider axes, in which the event was raised</span>
            <span class="c1"># FIXME: Why only this axes?</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> \
                    <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">in_axes</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="nb">all</span><span class="p">:</span>
                    <span class="n">a</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">a</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span>


<div class="viewcode-block" id="NonGuiException"><a class="viewcode-back" href="../../generated/matplotlib.figure.NonGuiException.html#matplotlib.patheffects.NonGuiException">[docs]</a><span class="k">class</span> <span class="nc">NonGuiException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>


<span class="k">class</span> <span class="nc">FigureManagerBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper class for pyplot mode, wraps everything up into a neat bundle</span>

<span class="sd">    Public attibutes:</span>

<span class="sd">    *canvas*</span>
<span class="sd">        A :class:`FigureCanvasBase` instance</span>

<span class="sd">    *num*</span>
<span class="sd">        The figure number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">canvas</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">manager</span> <span class="o">=</span> <span class="bp">self</span>  <span class="c1"># store a pointer to parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>

        <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;toolbar&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;toolmanager&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">key_press_handler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
                                                <span class="s1">&#39;key_press_event&#39;</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">key_press</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">key_press_handler_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The returned id from connecting the default key handler via</span>
<span class="sd">        :meth:`FigureCanvasBase.mpl_connnect`.</span>

<span class="sd">        To disable default key press handling::</span>

<span class="sd">            manager, canvas = figure.canvas.manager, figure.canvas</span>
<span class="sd">            canvas.mpl_disconnect(manager.key_press_handler_id)</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For GUI backends, show the figure window and redraw.</span>
<span class="sd">        For non-GUI backends, raise an exception to be caught</span>
<span class="sd">        by :meth:`~matplotlib.figure.Figure.show`, for an</span>
<span class="sd">        optional warning.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="n">NonGuiException</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">full_screen_toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;For gui backends, resize the window (in pixels).&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Implement the default mpl key bindings defined at</span>
<span class="sd">        :ref:`key-event-handling`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;toolbar&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;toolmanager&#39;</span><span class="p">:</span>
            <span class="n">key_press_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">toolbar</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">show_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display message in a popup -- GUI only</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_window_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the title text of the window containing the figure.</span>
<span class="sd">        Return None for non-GUI backends (e.g., a PS backend).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;image&#39;</span>

    <span class="k">def</span> <span class="nf">set_window_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the title text of the window containing the figure.  Note that</span>
<span class="sd">        this has no effect for non-GUI backends (e.g., a PS backend).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


<span class="n">cursors</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">cursors</span>


<span class="k">class</span> <span class="nc">NavigationToolbar2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for the navigation cursor, version 2</span>

<span class="sd">    backends must implement a canvas that handles connections for</span>
<span class="sd">    &#39;button_press_event&#39; and &#39;button_release_event&#39;.  See</span>
<span class="sd">    :meth:`FigureCanvasBase.mpl_connect` for more information</span>


<span class="sd">    They must also define</span>

<span class="sd">      :meth:`save_figure`</span>
<span class="sd">         save the current figure</span>

<span class="sd">      :meth:`set_cursor`</span>
<span class="sd">         if you want the pointer icon to change</span>

<span class="sd">      :meth:`_init_toolbar`</span>
<span class="sd">         create your toolbar widget</span>

<span class="sd">      :meth:`draw_rubberband` (optional)</span>
<span class="sd">         draw the zoom to rect &quot;rubberband&quot; rectangle</span>

<span class="sd">      :meth:`press`  (optional)</span>
<span class="sd">         whenever a mouse button is pressed, you&#39;ll be notified with</span>
<span class="sd">         the event</span>

<span class="sd">      :meth:`release` (optional)</span>
<span class="sd">         whenever a mouse button is released, you&#39;ll be notified with</span>
<span class="sd">         the event</span>

<span class="sd">      :meth:`dynamic_update` (optional)</span>
<span class="sd">         dynamically update the window while navigating</span>

<span class="sd">      :meth:`set_message` (optional)</span>
<span class="sd">         display message</span>

<span class="sd">      :meth:`set_history_buttons` (optional)</span>
<span class="sd">         you can change the history back / forward buttons to</span>
<span class="sd">         indicate disabled / enabled state.</span>

<span class="sd">    That&#39;s it, we&#39;ll do the rest!</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># list of toolitems to add to the toolbar, format is:</span>
    <span class="c1"># (</span>
    <span class="c1">#   text, # the text of the button (often not visible to users)</span>
    <span class="c1">#   tooltip_text, # the tooltip shown on hover (where possible)</span>
    <span class="c1">#   image_file, # name of the image for the button (without the extension)</span>
    <span class="c1">#   name_of_method, # name of the method in NavigationToolbar2 to call</span>
    <span class="c1"># )</span>
    <span class="n">toolitems</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;Home&#39;</span><span class="p">,</span> <span class="s1">&#39;Reset original view&#39;</span><span class="p">,</span> <span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;home&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Back&#39;</span><span class="p">,</span> <span class="s1">&#39;Back to  previous view&#39;</span><span class="p">,</span> <span class="s1">&#39;back&#39;</span><span class="p">,</span> <span class="s1">&#39;back&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Forward&#39;</span><span class="p">,</span> <span class="s1">&#39;Forward to next view&#39;</span><span class="p">,</span> <span class="s1">&#39;forward&#39;</span><span class="p">,</span> <span class="s1">&#39;forward&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Pan&#39;</span><span class="p">,</span> <span class="s1">&#39;Pan axes with left mouse, zoom with right&#39;</span><span class="p">,</span> <span class="s1">&#39;move&#39;</span><span class="p">,</span> <span class="s1">&#39;pan&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Zoom&#39;</span><span class="p">,</span> <span class="s1">&#39;Zoom to rectangle&#39;</span><span class="p">,</span> <span class="s1">&#39;zoom_to_rect&#39;</span><span class="p">,</span> <span class="s1">&#39;zoom&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Subplots&#39;</span><span class="p">,</span> <span class="s1">&#39;Configure subplots&#39;</span><span class="p">,</span> <span class="s1">&#39;subplots&#39;</span><span class="p">,</span> <span class="s1">&#39;configure_subplots&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;Save&#39;</span><span class="p">,</span> <span class="s1">&#39;Save the figure&#39;</span><span class="p">,</span> <span class="s1">&#39;filesave&#39;</span><span class="p">,</span> <span class="s1">&#39;save_figure&#39;</span><span class="p">),</span>
      <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">canvas</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">toolbar</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="c1"># a dict from axes index to a list of view limits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_views</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Stack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_positions</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Stack</span><span class="p">()</span>  <span class="c1"># stack of subplot positions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># the location and axis info at the time</span>
                              <span class="c1"># of the press</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastCursor</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_toolbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idDrag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_move</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ids_zoom</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># determined by the button pressed</span>
                                     <span class="c1"># at start</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># a mode string for the status bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_history_buttons</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Display a message on toolbar or in status bar&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;move back up the view lim stack&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="o">.</span><span class="n">back</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_positions</span><span class="o">.</span><span class="n">back</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_history_buttons</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_view</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">dynamic_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">draw_rubberband</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw a rectangle rubberband to indicate zoom limits&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">remove_rubberband</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove the rubberband&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move forward in the view lim stack&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_positions</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_history_buttons</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_view</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Restore the original view&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_positions</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_history_buttons</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_view</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_init_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is where you actually build the GUI widgets (called by</span>
<span class="sd">        __init__).  The icons ``home.xpm``, ``back.xpm``, ``forward.xpm``,</span>
<span class="sd">        ``hand.xpm``, ``zoom_to_rect.xpm`` and ``filesave.xpm`` are standard</span>
<span class="sd">        across backends (there are ppm versions in CVS also).</span>

<span class="sd">        You just need to set the callbacks</span>

<span class="sd">        home         : self.home</span>
<span class="sd">        back         : self.back</span>
<span class="sd">        forward      : self.forward</span>
<span class="sd">        hand         : self.pan</span>
<span class="sd">        zoom_to_rect : self.zoom</span>
<span class="sd">        filesave     : self.save_figure</span>

<span class="sd">        You only need to define the last one - the others are in the base</span>
<span class="sd">        class implementation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">_set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastCursor</span> <span class="o">!=</span> <span class="n">cursors</span><span class="o">.</span><span class="n">POINTER</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="n">cursors</span><span class="o">.</span><span class="n">POINTER</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lastCursor</span> <span class="o">=</span> <span class="n">cursors</span><span class="o">.</span><span class="n">POINTER</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">==</span> <span class="s1">&#39;ZOOM&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastCursor</span> <span class="o">!=</span> <span class="n">cursors</span><span class="o">.</span><span class="n">SELECT_REGION</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="n">cursors</span><span class="o">.</span><span class="n">SELECT_REGION</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_lastCursor</span> <span class="o">=</span> <span class="n">cursors</span><span class="o">.</span><span class="n">SELECT_REGION</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">==</span> <span class="s1">&#39;PAN&#39;</span> <span class="ow">and</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">_lastCursor</span> <span class="o">!=</span> <span class="n">cursors</span><span class="o">.</span><span class="n">MOVE</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="n">cursors</span><span class="o">.</span><span class="n">MOVE</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_lastCursor</span> <span class="o">=</span> <span class="n">cursors</span><span class="o">.</span><span class="n">MOVE</span>

    <span class="k">def</span> <span class="nf">mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_cursor</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">get_navigate</span><span class="p">():</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">format_coord</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">OverflowError</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">mouseover_set</span>
                           <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)]</span>

                <span class="k">if</span> <span class="n">artists</span><span class="p">:</span>

                    <span class="n">a</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">artists</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">zorder</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">patch</span><span class="p">:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_cursor_data</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; [</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">a</span><span class="o">.</span><span class="n">format_cursor_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Activate the pan/zoom tool. pan with left button, zoom with right&quot;&quot;&quot;</span>
        <span class="c1"># set the pointer icon and button press funcs to the</span>
        <span class="c1"># appropriate callbacks</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">==</span> <span class="s1">&#39;PAN&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="s1">&#39;PAN&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
                <span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">press_pan</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
                <span class="s1">&#39;button_release_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">release_pan</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;pan/zoom&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">widgetlock</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">widgetlock</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called whenver a mouse button is pressed.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">press_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the press mouse button in pan/zoom mode callback&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>

        <span class="c1"># push the current view to define home if stack is empty</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">push_current</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">in_axes</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="n">a</span><span class="o">.</span><span class="n">get_navigate</span><span class="p">()</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">can_pan</span><span class="p">()):</span>
                <span class="n">a</span><span class="o">.</span><span class="n">start_pan</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idDrag</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_idDrag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span>
                                                       <span class="bp">self</span><span class="o">.</span><span class="n">drag_pan</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">press</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">press_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the press mouse button in zoom to rect mode callback&quot;&quot;&quot;</span>
        <span class="c1"># If we&#39;re already in the middle of a zoom, pressing another</span>
        <span class="c1"># button works to &quot;cancel&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ids_zoom</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="k">for</span> <span class="n">zoom_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ids_zoom</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="n">zoom_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ids_zoom</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>

        <span class="c1"># push the current view to define home if stack is empty</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">push_current</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">in_axes</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="n">a</span><span class="o">.</span><span class="n">get_navigate</span><span class="p">()</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">can_zoom</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">_get_view</span><span class="p">()))</span>

        <span class="n">id1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">drag_zoom</span><span class="p">)</span>
        <span class="n">id2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;key_press_event&#39;</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">_switch_on_zoom_mode</span><span class="p">)</span>
        <span class="n">id3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;key_release_event&#39;</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">_switch_off_zoom_mode</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ids_zoom</span> <span class="o">=</span> <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">id3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">press</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_switch_on_zoom_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_move</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_switch_off_zoom_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_move</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">push_current</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;push the current view limits and position onto the stack&quot;&quot;&quot;</span>
        <span class="n">views</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
            <span class="n">views</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">_get_view</span><span class="p">())</span>
            <span class="c1"># Store both the original and modified positions</span>
            <span class="n">pos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
                <span class="n">a</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
                <span class="n">a</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span><span class="o">.</span><span class="n">frozen</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">views</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_positions</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_history_buttons</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;this will be called whenever mouse button is released&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">release_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the release mouse button callback in pan/zoom mode&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idDrag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idDrag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_move</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="p">:</span>
            <span class="n">a</span><span class="o">.</span><span class="n">end_pan</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">push_current</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">drag_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the drag callback in pan/zoom mode&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="p">:</span>
            <span class="c1">#safer to use the recorded button at the press than current button:</span>
            <span class="c1">#multiple button can get pressed during motion...</span>
            <span class="n">a</span><span class="o">.</span><span class="n">drag_pan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dynamic_update</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">drag_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the drag callback in zoom mode&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>
            <span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># adjust x, last, y, last</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">extents</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">lastx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lastx</span><span class="p">),</span> <span class="n">x1</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lastx</span><span class="p">),</span> <span class="n">x2</span><span class="p">)</span>
            <span class="n">y</span><span class="p">,</span> <span class="n">lasty</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">lasty</span><span class="p">),</span> <span class="n">y1</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">lasty</span><span class="p">),</span> <span class="n">y2</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
                <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">extents</span>
                <span class="n">y</span><span class="p">,</span> <span class="n">lasty</span> <span class="o">=</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">extents</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">lastx</span> <span class="o">=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">draw_rubberband</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">release_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the release mouse button callback in zoom to rect mode&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">zoom_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ids_zoom</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="n">zoom_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ids_zoom</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">remove_rubberband</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">last_a</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">cur_xypress</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>
            <span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">view</span> <span class="o">=</span> <span class="n">cur_xypress</span>
            <span class="c1"># ignore singular clicks - 5 pixels is a threshold</span>
            <span class="c1"># allows the user to &quot;cancel&quot; a zoom action</span>
            <span class="c1"># by zooming by less than 5 pixels</span>
            <span class="k">if</span> <span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">lastx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span><span class="o">!=</span><span class="s2">&quot;y&quot;</span><span class="p">)</span> <span class="ow">or</span>
                    <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">lasty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span><span class="o">!=</span><span class="s2">&quot;x&quot;</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
                <span class="k">return</span>

            <span class="c1"># detect twinx,y axes and avoid double zooming</span>
            <span class="n">twinx</span><span class="p">,</span> <span class="n">twiny</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">last_a</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">la</span> <span class="ow">in</span> <span class="n">last_a</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_shared_x_axes</span><span class="p">()</span><span class="o">.</span><span class="n">joined</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">la</span><span class="p">):</span>
                        <span class="n">twinx</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_shared_y_axes</span><span class="p">()</span><span class="o">.</span><span class="n">joined</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">la</span><span class="p">):</span>
                        <span class="n">twiny</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">last_a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;in&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;out&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">a</span><span class="o">.</span><span class="n">_set_view_from_bbox</span><span class="p">((</span><span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">direction</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span><span class="p">,</span> <span class="n">twinx</span><span class="p">,</span> <span class="n">twiny</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xypress</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_button_pressed</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_mode</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_current</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Redraw the canvases, update the locators&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
            <span class="n">xaxis</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;xaxis&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">yaxis</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;yaxis&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">locators</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">locators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">())</span>
                <span class="n">locators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_minor_locator</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">locators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">())</span>
                <span class="n">locators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minor_locator</span><span class="p">())</span>

            <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">locators</span><span class="p">:</span>
                <span class="n">loc</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_update_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the viewlim and position from the view and</span>
<span class="sd">        position stack for each axes</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">views</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">views</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_positions</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()):</span>
            <span class="n">a</span><span class="o">.</span><span class="n">_set_view</span><span class="p">(</span><span class="n">views</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="c1"># Restore both the original and modified positions</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;original&#39;</span><span class="p">)</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;active&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">save_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the current figure&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cursor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current cursor to one of the :class:`Cursors`</span>
<span class="sd">        enums values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset the axes stack&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_views</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_positions</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_history_buttons</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Activate zoom to rect mode&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">==</span> <span class="s1">&#39;ZOOM&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="s1">&#39;ZOOM&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idPress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">press_zoom</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idRelease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_release_event&#39;</span><span class="p">,</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">release_zoom</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;zoom rect&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">widgetlock</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">widgetlock</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_history_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable or disable back/forward button&quot;&quot;&quot;</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">ToolContainerBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for all tool containers, e.g. toolbars.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    toolmanager : `ToolManager` object that holds the tools that</span>
<span class="sd">        this `ToolContainer` wants to communicate with.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolmanager</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolmanager</span> <span class="o">=</span> <span class="n">toolmanager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolmanager</span><span class="o">.</span><span class="n">toolmanager_connect</span><span class="p">(</span><span class="s1">&#39;tool_removed_event&#39;</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">_remove_tool_cbk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_tool_toggled_cbk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Captures the &#39;tool_trigger_[name]&#39;</span>

<span class="sd">        This only gets used for toggled tools</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_toolitem</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">tool</span><span class="o">.</span><span class="n">toggled</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">position</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a tool to this container</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tool : tool_like</span>
<span class="sd">            The tool to add, see `ToolManager.get_tool`.</span>
<span class="sd">        group : str</span>
<span class="sd">            The name of the group to add this tool to.</span>
<span class="sd">        position : int (optional)</span>
<span class="sd">            The position within the group to place this tool.  Defaults to end.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolmanager</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="n">tool</span><span class="p">)</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_image_filename</span><span class="p">(</span><span class="n">tool</span><span class="o">.</span><span class="n">image</span><span class="p">)</span>
        <span class="n">toggle</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="s1">&#39;toggled&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_toolitem</span><span class="p">(</span><span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span>
                          <span class="n">image</span><span class="p">,</span> <span class="n">tool</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">toggle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">toggle</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toolmanager</span><span class="o">.</span><span class="n">toolmanager_connect</span><span class="p">(</span><span class="s1">&#39;tool_trigger_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">_tool_toggled_cbk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_remove_tool_cbk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Captures the &#39;tool_removed_event&#39; signal and removes the tool&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_toolitem</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_image_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find the image based on its name&quot;&quot;&quot;</span>
        <span class="c1"># TODO: better search for images, they are not always in the</span>
        <span class="c1"># datapath</span>
        <span class="n">basedir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;datapath&#39;</span><span class="p">],</span> <span class="s1">&#39;images&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">image</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basedir</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fname</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">fname</span>

    <span class="k">def</span> <span class="nf">trigger_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Trigger the tool</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : String</span>
<span class="sd">            Name(id) of the tool triggered from within the container</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolmanager</span><span class="o">.</span><span class="n">trigger_tool</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_toolitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">toggle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a toolitem to the container</span>

<span class="sd">        This method must get implemented per backend</span>

<span class="sd">        The callback associated with the button click event,</span>
<span class="sd">        must be **EXACTLY** `self.trigger_tool(name)`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : string</span>
<span class="sd">            Name of the tool to add, this gets used as the tool&#39;s ID and as the</span>
<span class="sd">            default label of the buttons</span>
<span class="sd">        group : String</span>
<span class="sd">            Name of the group that this tool belongs to</span>
<span class="sd">        position : Int</span>
<span class="sd">            Position of the tool within its group, if -1 it goes at the End</span>
<span class="sd">        image_file : String</span>
<span class="sd">            Filename of the image for the button or `None`</span>
<span class="sd">        description : String</span>
<span class="sd">            Description of the tool, used for the tooltips</span>
<span class="sd">        toggle : Bool</span>
<span class="sd">            * `True` : The button is a toggle (change the pressed/unpressed</span>
<span class="sd">              state between consecutive clicks)</span>
<span class="sd">            * `False` : The button is a normal button (returns to unpressed</span>
<span class="sd">              state after release)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">toggle_toolitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">toggled</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggle the toolitem without firing event</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : String</span>
<span class="sd">            Id of the tool to toggle</span>
<span class="sd">        toggled : bool</span>
<span class="sd">            Whether to set this tool as toggled or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">remove_toolitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove a toolitem from the `ToolContainer`</span>

<span class="sd">        This method must get implemented per backend</span>

<span class="sd">        Called when `ToolManager` emits a `tool_removed_event`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : string</span>
<span class="sd">            Name of the tool to remove</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="k">class</span> <span class="nc">StatusbarBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for the statusbar&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolmanager</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolmanager</span> <span class="o">=</span> <span class="n">toolmanager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolmanager</span><span class="o">.</span><span class="n">toolmanager_connect</span><span class="p">(</span><span class="s1">&#39;tool_message_event&#39;</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">_message_cbk</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_message_cbk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Captures the &#39;tool_message_event&#39; and set the message&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display a message on toolbar or in status bar</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s : str</span>
<span class="sd">            Message text</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">pass</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
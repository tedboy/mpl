

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mpl.dates</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="" href="../../index.html"/>
        <link rel="up" title="mpl" href="../mpl.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> My Project
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Autogenerated API</span></p>
<ul class="simple">
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../generated/mpl.html"><code class="docutils literal"><span class="pre">mpl</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/mpl.pyplot.html"><code class="docutils literal"><span class="pre">mpl.pyplot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/mpl.axes.html"><code class="docutils literal"><span class="pre">mpl.axes</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/mpl.axis.html"><code class="docutils literal"><span class="pre">mpl.axis</span></code></a></li>
</ul>
<p class="caption"><span class="caption-text">Autogenerated API - More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../others.html">Other modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infreq.html">Infreqeuntly used</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">My Project</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../mpl.html">mpl</a> &raquo;</li>
        
      <li>mpl.dates</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for mpl.dates</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Matplotlib provides sophisticated date plotting capabilities, standing on the</span>
<span class="sd">shoulders of python :mod:`datetime`, the add-on modules :mod:`pytz` and</span>
<span class="sd">:mod:`dateutil`.  :class:`datetime` objects are converted to floating point</span>
<span class="sd">numbers which represent time in days since 0001-01-01 UTC, plus 1.  For</span>
<span class="sd">example, 0001-01-01, 06:00 is 1.25, not 0.25.  The helper functions</span>
<span class="sd">:func:`date2num`, :func:`num2date` and :func:`drange` are used to facilitate</span>
<span class="sd">easy conversion to and from :mod:`datetime` and numeric ranges.</span>

<span class="sd">.. note::</span>

<span class="sd">   Like Python&#39;s datetime, mpl uses the Gregorian calendar for all</span>
<span class="sd">   conversions between dates and floating point numbers. This practice</span>
<span class="sd">   is not universal, and calendar differences can cause confusing</span>
<span class="sd">   differences between what Python and mpl give as the number of days</span>
<span class="sd">   since 0001-01-01 and what other software and databases yield.  For</span>
<span class="sd">   example, the US Naval Observatory uses a calendar that switches</span>
<span class="sd">   from Julian to Gregorian in October, 1582.  Hence, using their</span>
<span class="sd">   calculator, the number of days between 0001-01-01 and 2006-04-01 is</span>
<span class="sd">   732403, whereas using the Gregorian calendar via the datetime</span>
<span class="sd">   module we find::</span>

<span class="sd">     In [31]:date(2006,4,1).toordinal() - date(1,1,1).toordinal()</span>
<span class="sd">     Out[31]:732401</span>


<span class="sd">A wide range of specific and general purpose date tick locators and</span>
<span class="sd">formatters are provided in this module.  See</span>
<span class="sd">:mod:`matplotlib.ticker` for general information on tick locators</span>
<span class="sd">and formatters.  These are described below.</span>

<span class="sd">All the matplotlib date converters, tickers and formatters are</span>
<span class="sd">timezone aware, and the default timezone is given by the timezone</span>
<span class="sd">parameter in your :file:`matplotlibrc` file.  If you leave out a</span>
<span class="sd">:class:`tz` timezone instance, the default from your rc file will be</span>
<span class="sd">assumed.  If you want to use a custom time zone, pass a</span>
<span class="sd">:class:`pytz.timezone` instance with the tz keyword argument to</span>
<span class="sd">:func:`num2date`, :func:`plot_date`, and any custom date tickers or</span>
<span class="sd">locators you create.  See `pytz &lt;http://pythonhosted.org/pytz/&gt;`_ for</span>
<span class="sd">information on :mod:`pytz` and timezone handling.</span>

<span class="sd">The `dateutil module &lt;https://dateutil.readthedocs.org&gt;`_ provides</span>
<span class="sd">additional code to handle date ticking, making it easy to place ticks</span>
<span class="sd">on any kinds of dates.  See examples below.</span>

<span class="sd">Date tickers</span>
<span class="sd">------------</span>

<span class="sd">Most of the date tickers can locate single or multiple values.  For</span>
<span class="sd">example::</span>

<span class="sd">    # import constants for the days of the week</span>
<span class="sd">    from matplotlib.dates import MO, TU, WE, TH, FR, SA, SU</span>

<span class="sd">    # tick on mondays every week</span>
<span class="sd">    loc = WeekdayLocator(byweekday=MO, tz=tz)</span>

<span class="sd">    # tick on mondays and saturdays</span>
<span class="sd">    loc = WeekdayLocator(byweekday=(MO, SA))</span>

<span class="sd">In addition, most of the constructors take an interval argument::</span>

<span class="sd">    # tick on mondays every second week</span>
<span class="sd">    loc = WeekdayLocator(byweekday=MO, interval=2)</span>

<span class="sd">The rrule locator allows completely general date ticking::</span>

<span class="sd">    # tick every 5th easter</span>
<span class="sd">    rule = rrulewrapper(YEARLY, byeaster=1, interval=5)</span>
<span class="sd">    loc = RRuleLocator(rule)</span>

<span class="sd">Here are all the date tickers:</span>

<span class="sd">    * :class:`MinuteLocator`: locate minutes</span>

<span class="sd">    * :class:`HourLocator`: locate hours</span>

<span class="sd">    * :class:`DayLocator`: locate specifed days of the month</span>

<span class="sd">    * :class:`WeekdayLocator`: Locate days of the week, e.g., MO, TU</span>

<span class="sd">    * :class:`MonthLocator`: locate months, e.g., 7 for july</span>

<span class="sd">    * :class:`YearLocator`: locate years that are multiples of base</span>

<span class="sd">    * :class:`RRuleLocator`: locate using a</span>
<span class="sd">      :class:`matplotlib.dates.rrulewrapper`.  The</span>
<span class="sd">      :class:`rrulewrapper` is a simple wrapper around a</span>
<span class="sd">      :class:`dateutil.rrule` (`dateutil</span>
<span class="sd">      &lt;https://dateutil.readthedocs.org&gt;`_) which allow almost</span>
<span class="sd">      arbitrary date tick specifications.  See `rrule example</span>
<span class="sd">      &lt;../examples/pylab_examples/date_demo_rrule.html&gt;`_.</span>

<span class="sd">    * :class:`AutoDateLocator`: On autoscale, this class picks the best</span>
<span class="sd">      :class:`MultipleDateLocator` to set the view limits and the tick</span>
<span class="sd">      locations.</span>

<span class="sd">Date formatters</span>
<span class="sd">---------------</span>

<span class="sd">Here all all the date formatters:</span>

<span class="sd">    * :class:`AutoDateFormatter`: attempts to figure out the best format</span>
<span class="sd">      to use.  This is most useful when used with the :class:`AutoDateLocator`.</span>

<span class="sd">    * :class:`DateFormatter`: use :func:`strftime` format strings</span>

<span class="sd">    * :class:`IndexDateFormatter`: date plots with implicit *x*</span>
<span class="sd">      indexing.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">matplotlib.externals</span> <span class="kn">import</span> <span class="n">six</span>
<span class="kn">from</span> <span class="nn">matplotlib.externals.six.moves</span> <span class="kn">import</span> <span class="nb">xrange</span><span class="p">,</span> <span class="nb">zip</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">import</span> <span class="nn">warnings</span>


<span class="kn">from</span> <span class="nn">dateutil.rrule</span> <span class="kn">import</span> <span class="p">(</span><span class="n">rrule</span><span class="p">,</span> <span class="n">MO</span><span class="p">,</span> <span class="n">TU</span><span class="p">,</span> <span class="n">WE</span><span class="p">,</span> <span class="n">TH</span><span class="p">,</span> <span class="n">FR</span><span class="p">,</span> <span class="n">SA</span><span class="p">,</span> <span class="n">SU</span><span class="p">,</span> <span class="n">YEARLY</span><span class="p">,</span>
                            <span class="n">MONTHLY</span><span class="p">,</span> <span class="n">WEEKLY</span><span class="p">,</span> <span class="n">DAILY</span><span class="p">,</span> <span class="n">HOURLY</span><span class="p">,</span> <span class="n">MINUTELY</span><span class="p">,</span>
                            <span class="n">SECONDLY</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">dateutil.relativedelta</span> <span class="kn">import</span> <span class="n">relativedelta</span>
<span class="kn">import</span> <span class="nn">dateutil.parser</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>


<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.units</span> <span class="kn">as</span> <span class="nn">units</span>
<span class="kn">import</span> <span class="nn">matplotlib.cbook</span> <span class="kn">as</span> <span class="nn">cbook</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="kn">as</span> <span class="nn">ticker</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;date2num&#39;</span><span class="p">,</span> <span class="s1">&#39;num2date&#39;</span><span class="p">,</span> <span class="s1">&#39;drange&#39;</span><span class="p">,</span> <span class="s1">&#39;epoch2num&#39;</span><span class="p">,</span>
           <span class="s1">&#39;num2epoch&#39;</span><span class="p">,</span> <span class="s1">&#39;mx2num&#39;</span><span class="p">,</span> <span class="s1">&#39;DateFormatter&#39;</span><span class="p">,</span>
           <span class="s1">&#39;IndexDateFormatter&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoDateFormatter&#39;</span><span class="p">,</span> <span class="s1">&#39;DateLocator&#39;</span><span class="p">,</span>
           <span class="s1">&#39;RRuleLocator&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoDateLocator&#39;</span><span class="p">,</span> <span class="s1">&#39;YearLocator&#39;</span><span class="p">,</span>
           <span class="s1">&#39;MonthLocator&#39;</span><span class="p">,</span> <span class="s1">&#39;WeekdayLocator&#39;</span><span class="p">,</span>
           <span class="s1">&#39;DayLocator&#39;</span><span class="p">,</span> <span class="s1">&#39;HourLocator&#39;</span><span class="p">,</span> <span class="s1">&#39;MinuteLocator&#39;</span><span class="p">,</span>
           <span class="s1">&#39;SecondLocator&#39;</span><span class="p">,</span> <span class="s1">&#39;MicrosecondLocator&#39;</span><span class="p">,</span>
           <span class="s1">&#39;rrule&#39;</span><span class="p">,</span> <span class="s1">&#39;MO&#39;</span><span class="p">,</span> <span class="s1">&#39;TU&#39;</span><span class="p">,</span> <span class="s1">&#39;WE&#39;</span><span class="p">,</span> <span class="s1">&#39;TH&#39;</span><span class="p">,</span> <span class="s1">&#39;FR&#39;</span><span class="p">,</span> <span class="s1">&#39;SA&#39;</span><span class="p">,</span> <span class="s1">&#39;SU&#39;</span><span class="p">,</span>
           <span class="s1">&#39;YEARLY&#39;</span><span class="p">,</span> <span class="s1">&#39;MONTHLY&#39;</span><span class="p">,</span> <span class="s1">&#39;WEEKLY&#39;</span><span class="p">,</span> <span class="s1">&#39;DAILY&#39;</span><span class="p">,</span>
           <span class="s1">&#39;HOURLY&#39;</span><span class="p">,</span> <span class="s1">&#39;MINUTELY&#39;</span><span class="p">,</span> <span class="s1">&#39;SECONDLY&#39;</span><span class="p">,</span> <span class="s1">&#39;MICROSECONDLY&#39;</span><span class="p">,</span> <span class="s1">&#39;relativedelta&#39;</span><span class="p">,</span>
           <span class="s1">&#39;seconds&#39;</span><span class="p">,</span> <span class="s1">&#39;minutes&#39;</span><span class="p">,</span> <span class="s1">&#39;hours&#39;</span><span class="p">,</span> <span class="s1">&#39;weeks&#39;</span><span class="p">)</span>


<span class="c1"># Make a simple UTC instance so we don&#39;t always have to import</span>
<span class="c1"># pytz.  From the python datetime library docs:</span>

<span class="k">class</span> <span class="nc">_UTC</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;UTC&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">utcoffset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tzname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;UTC&quot;</span>

    <span class="k">def</span> <span class="nf">dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">UTC</span> <span class="o">=</span> <span class="n">_UTC</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_get_rc_timezone</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve the preferred timeszone from the rcParams dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;timezone&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;UTC&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">UTC</span>
    <span class="kn">import</span> <span class="nn">pytz</span>
    <span class="k">return</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Time-related constants.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">EPOCH_OFFSET</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">toordinal</span><span class="p">())</span>
<span class="n">JULIAN_OFFSET</span> <span class="o">=</span> <span class="mf">1721424.5</span>                         <span class="c1"># Julian date at 0001-01-01</span>
<span class="n">MICROSECONDLY</span> <span class="o">=</span> <span class="n">SECONDLY</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">HOURS_PER_DAY</span> <span class="o">=</span> <span class="mf">24.</span>
<span class="n">MIN_PER_HOUR</span> <span class="o">=</span> <span class="mf">60.</span>
<span class="n">SEC_PER_MIN</span> <span class="o">=</span> <span class="mf">60.</span>
<span class="n">MONTHS_PER_YEAR</span> <span class="o">=</span> <span class="mf">12.</span>

<span class="n">DAYS_PER_WEEK</span> <span class="o">=</span> <span class="mf">7.</span>
<span class="n">DAYS_PER_MONTH</span> <span class="o">=</span> <span class="mf">30.</span>
<span class="n">DAYS_PER_YEAR</span> <span class="o">=</span> <span class="mf">365.0</span>

<span class="n">MINUTES_PER_DAY</span> <span class="o">=</span> <span class="n">MIN_PER_HOUR</span> <span class="o">*</span> <span class="n">HOURS_PER_DAY</span>

<span class="n">SEC_PER_HOUR</span> <span class="o">=</span> <span class="n">SEC_PER_MIN</span> <span class="o">*</span> <span class="n">MIN_PER_HOUR</span>
<span class="n">SEC_PER_DAY</span> <span class="o">=</span> <span class="n">SEC_PER_HOUR</span> <span class="o">*</span> <span class="n">HOURS_PER_DAY</span>
<span class="n">SEC_PER_WEEK</span> <span class="o">=</span> <span class="n">SEC_PER_DAY</span> <span class="o">*</span> <span class="n">DAYS_PER_WEEK</span>

<span class="n">MUSECONDS_PER_DAY</span> <span class="o">=</span> <span class="mf">1e6</span> <span class="o">*</span> <span class="n">SEC_PER_DAY</span>

<span class="n">MONDAY</span><span class="p">,</span> <span class="n">TUESDAY</span><span class="p">,</span> <span class="n">WEDNESDAY</span><span class="p">,</span> <span class="n">THURSDAY</span><span class="p">,</span> <span class="n">FRIDAY</span><span class="p">,</span> <span class="n">SATURDAY</span><span class="p">,</span> <span class="n">SUNDAY</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">MO</span><span class="p">,</span> <span class="n">TU</span><span class="p">,</span> <span class="n">WE</span><span class="p">,</span> <span class="n">TH</span><span class="p">,</span> <span class="n">FR</span><span class="p">,</span> <span class="n">SA</span><span class="p">,</span> <span class="n">SU</span><span class="p">)</span>
<span class="n">WEEKDAYS</span> <span class="o">=</span> <span class="p">(</span><span class="n">MONDAY</span><span class="p">,</span> <span class="n">TUESDAY</span><span class="p">,</span> <span class="n">WEDNESDAY</span><span class="p">,</span> <span class="n">THURSDAY</span><span class="p">,</span> <span class="n">FRIDAY</span><span class="p">,</span> <span class="n">SATURDAY</span><span class="p">,</span> <span class="n">SUNDAY</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_to_ordinalf</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert :mod:`datetime` or :mod:`date` to the Gregorian date as UTC float</span>
<span class="sd">    days, preserving hours, minutes, seconds and microseconds.  Return value</span>
<span class="sd">    is a :func:`float`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="s1">&#39;tzinfo&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">delta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">dt</span> <span class="o">-=</span> <span class="n">delta</span>

    <span class="n">base</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">toordinal</span><span class="p">())</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
        <span class="c1"># Get a datetime object at midnight in the same time zone as dt.</span>
        <span class="n">cdate</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
        <span class="n">midnight_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>

        <span class="n">rdt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">cdate</span><span class="p">,</span> <span class="n">midnight_time</span><span class="p">)</span>
        <span class="n">td_remainder</span> <span class="o">=</span> <span class="n">_total_seconds</span><span class="p">(</span><span class="n">dt</span> <span class="o">-</span> <span class="n">rdt</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">td_remainder</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">base</span> <span class="o">+=</span> <span class="n">td_remainder</span> <span class="o">/</span> <span class="n">SEC_PER_DAY</span>

    <span class="k">return</span> <span class="n">base</span>


<span class="c1"># a version of _to_ordinalf that can operate on numpy arrays</span>
<span class="n">_to_ordinalf_np_vectorized</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">_to_ordinalf</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Available as a native method in Python &gt;= 2.7.</span>
    <span class="n">_total_seconds</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="o">.</span><span class="n">total_seconds</span>
<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">_total_seconds</span><span class="p">(</span><span class="n">tdelta</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Alias providing support for datetime.timedelta.total_seconds() function</span>
<span class="sd">        calls even in Python &lt; 2.7.</span>

<span class="sd">        The input `tdelta` is a datetime.timedelta object, and returns a float</span>
<span class="sd">        containing the total number of seconds representing the `tdelta`</span>
<span class="sd">        duration. For large durations (&gt; 270 on most platforms), this loses</span>
<span class="sd">        microsecond accuracy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">tdelta</span><span class="o">.</span><span class="n">microseconds</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">tdelta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">+</span> <span class="n">tdelta</span><span class="o">.</span><span class="n">days</span> <span class="o">*</span> <span class="n">SEC_PER_DAY</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e-6</span>


<span class="k">def</span> <span class="nf">_from_ordinalf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert Gregorian float of the date, preserving hours, minutes,</span>
<span class="sd">    seconds and microseconds.  Return value is a :class:`datetime`.</span>

<span class="sd">    The input date `x` is a float in ordinal days at UTC, and the output will</span>
<span class="sd">    be the specified :class:`datetime` object corresponding to that time in</span>
<span class="sd">    timezone `tz`, or if `tz` is `None`, in the timezone specified in</span>
<span class="sd">    `rcParams[&#39;timezone&#39;]`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">tz</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tz</span> <span class="o">=</span> <span class="n">_get_rc_timezone</span><span class="p">()</span>

    <span class="n">ix</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromordinal</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">UTC</span><span class="p">)</span>

    <span class="n">remainder</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">ix</span>

    <span class="c1"># Round down to the nearest microsecond.</span>
    <span class="n">dt</span> <span class="o">+=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">remainder</span> <span class="o">*</span> <span class="n">MUSECONDS_PER_DAY</span><span class="p">))</span>

    <span class="c1"># Compensate for rounding errors</span>
    <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">&gt;</span> <span class="mi">999990</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">+=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mf">1e6</span> <span class="o">-</span> <span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>


<span class="c1"># a version of _from_ordinalf that can operate on numpy arrays</span>
<span class="n">_from_ordinalf_np_vectorized</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">_from_ordinalf</span><span class="p">)</span>


<div class="viewcode-block" id="strpdate2num"><a class="viewcode-back" href="../../generated/generated/mpl.dates.strpdate2num.html#mpl.dates.strpdate2num">[docs]</a><span class="k">class</span> <span class="nc">strpdate2num</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this class to parse date strings to matplotlib datenums when</span>
<span class="sd">    you know the date format string of the date you are parsing.  See</span>
<span class="sd">    :file:`examples/load_demo.py`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="strpdate2num.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.strpdate2num.__init__.html#mpl.dates.strpdate2num.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; fmt: any valid strptime format is supported &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;s : string to be converted</span>
<span class="sd">           return value: a date2num float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">date2num</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="o">*</span><span class="n">time</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">)[:</span><span class="mi">6</span><span class="p">]))</span></div>


<div class="viewcode-block" id="bytespdate2num"><a class="viewcode-back" href="../../generated/generated/mpl.dates.bytespdate2num.html#mpl.dates.bytespdate2num">[docs]</a><span class="k">class</span> <span class="nc">bytespdate2num</span><span class="p">(</span><span class="n">strpdate2num</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this class to parse date strings to matplotlib datenums when</span>
<span class="sd">    you know the date format string of the date you are parsing.  See</span>
<span class="sd">    :file:`examples/load_demo.py`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="bytespdate2num.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.bytespdate2num.__init__.html#mpl.dates.bytespdate2num.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            fmt: any valid strptime format is supported</span>
<span class="sd">            encoding: encoding to use on byte input (default: &#39;utf-8&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">bytespdate2num</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">encoding</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            b: byte input to be converted</span>
<span class="sd">        Returns:</span>
<span class="sd">            A date2num float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">bytespdate2num</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__call__</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>


<span class="c1"># a version of dateutil.parser.parse that can operate on nump0y arrays</span>
<span class="n">_dateutil_parser_parse_np_vectorized</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">)</span>


<div class="viewcode-block" id="datestr2num"><a class="viewcode-back" href="../../generated/generated/mpl.dates.datestr2num.html#mpl.dates.datestr2num">[docs]</a><span class="k">def</span> <span class="nf">datestr2num</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a date string to a datenum using</span>
<span class="sd">    :func:`dateutil.parser.parse`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    d : string or sequence of strings</span>
<span class="sd">        The dates to convert.</span>

<span class="sd">    default : datetime instance</span>
<span class="sd">        The default date to use when fields are missing in `d`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_string_like</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">date2num</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">d</span><span class="p">]</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">d</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span>
        <span class="k">return</span> <span class="n">date2num</span><span class="p">(</span><span class="n">_dateutil_parser_parse_np_vectorized</span><span class="p">(</span><span class="n">d</span><span class="p">))</span></div>


<div class="viewcode-block" id="date2num"><a class="viewcode-back" href="../../generated/generated/mpl.dates.date2num.html#mpl.dates.date2num">[docs]</a><span class="k">def</span> <span class="nf">date2num</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    *d* is either a :class:`datetime` instance or a sequence of datetimes.</span>

<span class="sd">    Return value is a floating point number (or sequence of floats)</span>
<span class="sd">    which gives the number of days (fraction part represents hours,</span>
<span class="sd">    minutes, seconds) since 0001-01-01 00:00:00 UTC, *plus* *one*.</span>
<span class="sd">    The addition of one here is a historical artifact.  Also, note</span>
<span class="sd">    that the Gregorian calendar is assumed; this is not universal</span>
<span class="sd">    practice.  For details, see the module docstring.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cbook</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_to_ordinalf</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">d</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span>
        <span class="k">return</span> <span class="n">_to_ordinalf_np_vectorized</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></div>


<div class="viewcode-block" id="julian2num"><a class="viewcode-back" href="../../generated/generated/mpl.dates.julian2num.html#mpl.dates.julian2num">[docs]</a><span class="k">def</span> <span class="nf">julian2num</span><span class="p">(</span><span class="n">j</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a Julian date (or sequence) to a matplotlib date (or sequence).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">j</span><span class="p">):</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">j</span> <span class="o">-</span> <span class="n">JULIAN_OFFSET</span></div>


<div class="viewcode-block" id="num2julian"><a class="viewcode-back" href="../../generated/generated/mpl.dates.num2julian.html#mpl.dates.num2julian">[docs]</a><span class="k">def</span> <span class="nf">num2julian</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a matplotlib date (or sequence) to a Julian date (or sequence).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="n">JULIAN_OFFSET</span></div>


<div class="viewcode-block" id="num2date"><a class="viewcode-back" href="../../generated/generated/mpl.dates.num2date.html#mpl.dates.num2date">[docs]</a><span class="k">def</span> <span class="nf">num2date</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    *x* is a float value which gives the number of days</span>
<span class="sd">    (fraction part represents hours, minutes, seconds) since</span>
<span class="sd">    0001-01-01 00:00:00 UTC *plus* *one*.</span>
<span class="sd">    The addition of one here is a historical artifact.  Also, note</span>
<span class="sd">    that the Gregorian calendar is assumed; this is not universal</span>
<span class="sd">    practice.  For details, see the module docstring.</span>

<span class="sd">    Return value is a :class:`datetime` instance in timezone *tz* (default to</span>
<span class="sd">    rcparams TZ value).</span>

<span class="sd">    If *x* is a sequence, a sequence of :class:`datetime` objects will</span>
<span class="sd">    be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">tz</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tz</span> <span class="o">=</span> <span class="n">_get_rc_timezone</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cbook</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_from_ordinalf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="k">return</span> <span class="n">_from_ordinalf_np_vectorized</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span></div>


<div class="viewcode-block" id="drange"><a class="viewcode-back" href="../../generated/generated/mpl.dates.drange.html#mpl.dates.drange">[docs]</a><span class="k">def</span> <span class="nf">drange</span><span class="p">(</span><span class="n">dstart</span><span class="p">,</span> <span class="n">dend</span><span class="p">,</span> <span class="n">delta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a date range as float Gregorian ordinals.  *dstart* and</span>
<span class="sd">    *dend* are :class:`datetime` instances.  *delta* is a</span>
<span class="sd">    :class:`datetime.timedelta` instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">_to_ordinalf</span><span class="p">(</span><span class="n">dstart</span><span class="p">)</span>
    <span class="n">f2</span> <span class="o">=</span> <span class="n">_to_ordinalf</span><span class="p">(</span><span class="n">dend</span><span class="p">)</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">_total_seconds</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> <span class="o">/</span> <span class="n">SEC_PER_DAY</span>

    <span class="c1"># calculate the difference between dend and dstart in times of delta</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">f2</span> <span class="o">-</span> <span class="n">f1</span><span class="p">)</span> <span class="o">/</span> <span class="n">step</span><span class="p">))</span>

    <span class="c1"># calculate end of the interval which will be generated</span>
    <span class="n">dinterval_end</span> <span class="o">=</span> <span class="n">dstart</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">delta</span>

    <span class="c1"># ensure, that an half open interval will be generated [dstart, dend)</span>
    <span class="k">if</span> <span class="n">dinterval_end</span> <span class="o">&gt;=</span> <span class="n">dend</span><span class="p">:</span>
        <span class="c1"># if the endpoint is greated than dend, just subtract one delta</span>
        <span class="n">dinterval_end</span> <span class="o">-=</span> <span class="n">delta</span>
        <span class="n">num</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="n">f2</span> <span class="o">=</span> <span class="n">_to_ordinalf</span><span class="p">(</span><span class="n">dinterval_end</span><span class="p">)</span>  <span class="c1"># new float-endpoint</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></div>

<span class="c1">### date tickers and formatters ###</span>


<div class="viewcode-block" id="DateFormatter"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateFormatter.html#mpl.dates.DateFormatter">[docs]</a><span class="k">class</span> <span class="nc">DateFormatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">Formatter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tick location is seconds since the epoch.  Use a :func:`strftime`</span>
<span class="sd">    format string.</span>

<span class="sd">    Python only supports :mod:`datetime` :func:`strftime` formatting</span>
<span class="sd">    for years greater than 1900.  Thanks to Andrew Dalke, Dalke</span>
<span class="sd">    Scientific Software who contributed the :func:`strftime` code</span>
<span class="sd">    below to include dates earlier than this year.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">illegal_s</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">r&quot;((^|[^%])(</span><span class="si">%%</span><span class="s2">)*</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="DateFormatter.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateFormatter.__init__.html#mpl.dates.DateFormatter.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *fmt* is a :func:`strftime` format string; *tz* is the</span>
<span class="sd">         :class:`tzinfo` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tz</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">tz</span> <span class="o">=</span> <span class="n">_get_rc_timezone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tz</span> <span class="o">=</span> <span class="n">tz</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;DateFormatter found a value of x=0, which is &#39;</span>
                             <span class="s1">&#39;an illegal date.  This usually occurs because &#39;</span>
                             <span class="s1">&#39;you have not informed the axis that it is &#39;</span>
                             <span class="s1">&#39;plotting dates, e.g., with ax.xaxis_date()&#39;</span><span class="p">)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">num2date</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">)</span>

<div class="viewcode-block" id="DateFormatter.set_tzinfo"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateFormatter.set_tzinfo.html#mpl.dates.DateFormatter.set_tzinfo">[docs]</a>    <span class="k">def</span> <span class="nf">set_tzinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tz</span> <span class="o">=</span> <span class="n">tz</span></div>

    <span class="k">def</span> <span class="nf">_replace_common_substr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">sub1</span><span class="p">,</span> <span class="n">sub2</span><span class="p">,</span> <span class="n">replacement</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Helper function for replacing substrings sub1 and sub2</span>
<span class="sd">        located at the same indexes in strings s1 and s2 respectively,</span>
<span class="sd">        with the string replacement.  It is expected that sub1 and sub2</span>
<span class="sd">        have the same length.  Returns the pair s1, s2 after the</span>
<span class="sd">        substitutions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find common indexes of substrings sub1 in s1 and sub2 in s2</span>
        <span class="c1"># and make substitutions inplace. Because this is inplace,</span>
        <span class="c1"># it is okay if len(replacement) != len(sub1), len(sub2).</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">sub1</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="n">i</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">:</span><span class="n">j</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub2</span><span class="p">)]</span> <span class="o">!=</span> <span class="n">sub2</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">s1</span> <span class="o">=</span> <span class="n">s1</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">replacement</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub1</span><span class="p">):]</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="n">s2</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">replacement</span> <span class="o">+</span> <span class="n">s2</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub2</span><span class="p">):]</span>

        <span class="k">return</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span>

<div class="viewcode-block" id="DateFormatter.strftime_pre_1900"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateFormatter.strftime_pre_1900.html#mpl.dates.DateFormatter.strftime_pre_1900">[docs]</a>    <span class="k">def</span> <span class="nf">strftime_pre_1900</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call time.strftime for years before 1900 by rolling</span>
<span class="sd">        forward a multiple of 28 years.</span>

<span class="sd">        *fmt* is a :func:`strftime` format string.</span>

<span class="sd">        Dalke: I hope I did this math right.  Every 28 years the</span>
<span class="sd">        calendar repeats, except through century leap years excepting</span>
<span class="sd">        the 400 year leap years.  But only if you&#39;re using the Gregorian</span>
<span class="sd">        calendar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fmt</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span>

        <span class="c1"># Since python&#39;s time module&#39;s strftime implementation does not</span>
        <span class="c1"># support %f microsecond (but the datetime module does), use a</span>
        <span class="c1"># regular expression substitution to replace instances of %f.</span>
        <span class="c1"># Note that this can be useful since python&#39;s floating-point</span>
        <span class="c1"># precision representation for datetime causes precision to be</span>
        <span class="c1"># more accurate closer to year 0 (around the year 2000, precision</span>
        <span class="c1"># can be at 10s of microseconds).</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">r&#39;((^|[^%])(</span><span class="si">%%</span><span class="s1">)*)</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">,</span>
                     <span class="s1">r&#39;\g&lt;1&gt;{0:06d}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span><span class="p">),</span> <span class="n">fmt</span><span class="p">)</span>

        <span class="n">year</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span>
        <span class="c1"># For every non-leap year century, advance by</span>
        <span class="c1"># 6 years to get into the 28-year repeat cycle</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="mi">2000</span> <span class="o">-</span> <span class="n">year</span>
        <span class="n">off</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="n">delta</span> <span class="o">//</span> <span class="mi">100</span> <span class="o">+</span> <span class="n">delta</span> <span class="o">//</span> <span class="mi">400</span><span class="p">)</span>
        <span class="n">year</span> <span class="o">=</span> <span class="n">year</span> <span class="o">+</span> <span class="n">off</span>

        <span class="c1"># Move to between the years 1973 and 2000</span>
        <span class="n">year1</span> <span class="o">=</span> <span class="n">year</span> <span class="o">+</span> <span class="p">((</span><span class="mi">2000</span> <span class="o">-</span> <span class="n">year</span><span class="p">)</span> <span class="o">//</span> <span class="mi">28</span><span class="p">)</span> <span class="o">*</span> <span class="mi">28</span>
        <span class="n">year2</span> <span class="o">=</span> <span class="n">year1</span> <span class="o">+</span> <span class="mi">28</span>
        <span class="n">timetuple</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()</span>
        <span class="c1"># Generate timestamp string for year and year+28</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="p">(</span><span class="n">year1</span><span class="p">,)</span> <span class="o">+</span> <span class="n">timetuple</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="n">s2</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="p">(</span><span class="n">year2</span><span class="p">,)</span> <span class="o">+</span> <span class="n">timetuple</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

        <span class="c1"># Replace instances of respective years (both 2-digit and 4-digit)</span>
        <span class="c1"># that are located at the same indexes of s1, s2 with dt&#39;s year.</span>
        <span class="c1"># Note that C++&#39;s strftime implementation does not use padded</span>
        <span class="c1"># zeros or padded whitespace for %y or %Y for years before 100, but</span>
        <span class="c1"># uses padded zeros for %x. (For example, try the runnable examples</span>
        <span class="c1"># with .tm_year in the interval [-1900, -1800] on</span>
        <span class="c1"># http://en.cppreference.com/w/c/chrono/strftime.) For ease of</span>
        <span class="c1"># implementation, we always use padded zeros for %y, %Y, and %x.</span>
        <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_replace_common_substr</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span>
                                             <span class="s2">&quot;{0:04d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year1</span><span class="p">),</span>
                                             <span class="s2">&quot;{0:04d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year2</span><span class="p">),</span>
                                             <span class="s2">&quot;{0:04d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">))</span>
        <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_replace_common_substr</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span>
                                             <span class="s2">&quot;{0:02d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year1</span> <span class="o">%</span> <span class="mi">100</span><span class="p">),</span>
                                             <span class="s2">&quot;{0:02d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year2</span> <span class="o">%</span> <span class="mi">100</span><span class="p">),</span>
                                             <span class="s2">&quot;{0:02d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">%</span> <span class="mi">100</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">unicode_safe</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span></div>

<div class="viewcode-block" id="DateFormatter.strftime"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateFormatter.strftime.html#mpl.dates.DateFormatter.strftime">[docs]</a>    <span class="k">def</span> <span class="nf">strftime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Refer to documentation for datetime.strftime.</span>

<span class="sd">        *fmt* is a :func:`strftime` format string.</span>

<span class="sd">        Warning: For years before 1900, depending upon the current</span>
<span class="sd">        locale it is possible that the year displayed with %x might</span>
<span class="sd">        be incorrect. For years before 100, %y and %Y will yield</span>
<span class="sd">        zero-padded strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fmt</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">illegal_s</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">r&quot;\1&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">&gt;=</span> <span class="mi">1900</span><span class="p">:</span>
            <span class="c1"># Note: in python 3.3 this is okay for years &gt;= 1000,</span>
            <span class="c1"># refer to http://bugs.python.org/issue177742</span>
            <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">unicode_safe</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">strftime_pre_1900</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="IndexDateFormatter"><a class="viewcode-back" href="../../generated/generated/mpl.dates.IndexDateFormatter.html#mpl.dates.IndexDateFormatter">[docs]</a><span class="k">class</span> <span class="nc">IndexDateFormatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">Formatter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use with :class:`~matplotlib.ticker.IndexLocator` to cycle format</span>
<span class="sd">    strings by index.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="IndexDateFormatter.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.IndexDateFormatter.__init__.html#mpl.dates.IndexDateFormatter.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *t* is a sequence of dates (floating point days).  *fmt* is a</span>
<span class="sd">        :func:`strftime` format string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tz</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">tz</span> <span class="o">=</span> <span class="n">_get_rc_timezone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">t</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tz</span> <span class="o">=</span> <span class="n">tz</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="s1">&#39;Return the label for time *x* at position *pos*&#39;</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ind</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ind</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

        <span class="n">dt</span> <span class="o">=</span> <span class="n">num2date</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">[</span><span class="n">ind</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">unicode_safe</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt</span><span class="p">))</span></div>


<div class="viewcode-block" id="AutoDateFormatter"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateFormatter.html#mpl.dates.AutoDateFormatter">[docs]</a><span class="k">class</span> <span class="nc">AutoDateFormatter</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">Formatter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class attempts to figure out the best format to use.  This is</span>
<span class="sd">    most useful when used with the :class:`AutoDateLocator`.</span>


<span class="sd">    The AutoDateFormatter has a scale dictionary that maps the scale</span>
<span class="sd">    of the tick (the distance in days between one major tick) and a</span>
<span class="sd">    format string.  The default looks like this::</span>

<span class="sd">        self.scaled = {</span>
<span class="sd">           365.0  : &#39;%Y&#39;,</span>
<span class="sd">           30.    : &#39;%b %Y&#39;,</span>
<span class="sd">           1.0    : &#39;%b %d %Y&#39;,</span>
<span class="sd">           1./24. : &#39;%H:%M:%S&#39;,</span>
<span class="sd">           1. / (24. * 60.): &#39;%H:%M:%S.%f&#39;,</span>
<span class="sd">           }</span>


<span class="sd">    The algorithm picks the key in the dictionary that is &gt;= the</span>
<span class="sd">    current scale and uses that format string.  You can customize this</span>
<span class="sd">    dictionary by doing::</span>


<span class="sd">    &gt;&gt;&gt; formatter = AutoDateFormatter()</span>
<span class="sd">    &gt;&gt;&gt; formatter.scaled[1/(24.*60.)] = &#39;%M:%S&#39; # only show min and sec</span>

<span class="sd">    A custom :class:`~matplotlib.ticker.FuncFormatter` can also be used.</span>
<span class="sd">    The following example shows how to use a custom format function to strip</span>
<span class="sd">    trailing zeros from decimal seconds and adds the date to the first</span>
<span class="sd">    ticklabel::</span>

<span class="sd">        &gt;&gt;&gt; def my_format_function(x, pos=None):</span>
<span class="sd">        ...     x = matplotlib.dates.num2date(x)</span>
<span class="sd">        ...     if pos == 0:</span>
<span class="sd">        ...         fmt = &#39;%D %H:%M:%S.%f&#39;</span>
<span class="sd">        ...     else:</span>
<span class="sd">        ...         fmt = &#39;%H:%M:%S.%f&#39;</span>
<span class="sd">        ...     label = x.strftime(fmt)</span>
<span class="sd">        ...     label = label.rstrip(&quot;0&quot;)</span>
<span class="sd">        ...     label = label.rstrip(&quot;.&quot;)</span>
<span class="sd">        ...     return label</span>
<span class="sd">        &gt;&gt;&gt; from matplotlib.ticker import FuncFormatter</span>
<span class="sd">        &gt;&gt;&gt; formatter.scaled[1/(24.*60.)] = FuncFormatter(my_format_function)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># This can be improved by providing some user-level direction on</span>
    <span class="c1"># how to choose the best format (precedence, etc...)</span>

    <span class="c1"># Perhaps a &#39;struct&#39; that has a field for each time-type where a</span>
    <span class="c1"># zero would indicate &quot;don&#39;t show&quot; and a number would indicate</span>
    <span class="c1"># &quot;show&quot; with some sort of priority.  Same priorities could mean</span>
    <span class="c1"># show all with the same priority.</span>

    <span class="c1"># Or more simply, perhaps just a format string for each</span>
    <span class="c1"># possibility...</span>

<div class="viewcode-block" id="AutoDateFormatter.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateFormatter.__init__.html#mpl.dates.AutoDateFormatter.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locator</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">defaultfmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Autoformat the date labels.  The default format is the one to use</span>
<span class="sd">        if none of the values in ``self.scaled`` are greater than the unit</span>
<span class="sd">        returned by ``locator._get_unit()``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="n">locator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tz</span> <span class="o">=</span> <span class="n">tz</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultfmt</span> <span class="o">=</span> <span class="n">defaultfmt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_formatter</span> <span class="o">=</span> <span class="n">DateFormatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultfmt</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaled</span> <span class="o">=</span> <span class="p">{</span><span class="n">DAYS_PER_YEAR</span><span class="p">:</span> <span class="s1">&#39;%Y&#39;</span><span class="p">,</span>
                       <span class="n">DAYS_PER_MONTH</span><span class="p">:</span> <span class="s1">&#39;%b %Y&#39;</span><span class="p">,</span>
                       <span class="mf">1.0</span><span class="p">:</span> <span class="s1">&#39;%b </span><span class="si">%d</span><span class="s1"> %Y&#39;</span><span class="p">,</span>
                       <span class="mf">1.</span> <span class="o">/</span> <span class="n">HOURS_PER_DAY</span><span class="p">:</span> <span class="s1">&#39;%H:%M:%S&#39;</span><span class="p">,</span>
                       <span class="mf">1.</span> <span class="o">/</span> <span class="p">(</span><span class="n">MINUTES_PER_DAY</span><span class="p">):</span> <span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">}</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">locator_unit_scale</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_locator</span><span class="o">.</span><span class="n">_get_unit</span><span class="p">())</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultfmt</span>

        <span class="c1"># Pick the first scale which is greater than the locator unit.</span>
        <span class="k">for</span> <span class="n">possible_scale</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scaled</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">possible_scale</span> <span class="o">&gt;=</span> <span class="n">locator_unit_scale</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaled</span><span class="p">[</span><span class="n">possible_scale</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_formatter</span> <span class="o">=</span> <span class="n">DateFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tz</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">six</span><span class="o">.</span><span class="n">callable</span><span class="p">(</span><span class="n">fmt</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">fmt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Unexpected type passed to {0!r}.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="rrulewrapper"><a class="viewcode-back" href="../../generated/generated/mpl.dates.rrulewrapper.html#mpl.dates.rrulewrapper">[docs]</a><span class="k">class</span> <span class="nc">rrulewrapper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

<div class="viewcode-block" id="rrulewrapper.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.rrulewrapper.__init__.html#mpl.dates.rrulewrapper.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_construct</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_construct</span><span class="p">[</span><span class="s2">&quot;freq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">freq</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rrule</span> <span class="o">=</span> <span class="n">rrule</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_construct</span><span class="p">)</span></div>

<div class="viewcode-block" id="rrulewrapper.set"><a class="viewcode-back" href="../../generated/generated/mpl.dates.rrulewrapper.set.html#mpl.dates.rrulewrapper.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_construct</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rrule</span> <span class="o">=</span> <span class="n">rrule</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_construct</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rrule</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="DateLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateLocator.html#mpl.dates.DateLocator">[docs]</a><span class="k">class</span> <span class="nc">DateLocator</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">Locator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines the tick locations when plotting dates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hms0d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;byhour&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;byminute&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;bysecond&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<div class="viewcode-block" id="DateLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateLocator.__init__.html#mpl.dates.DateLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *tz* is a :class:`tzinfo` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tz</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">tz</span> <span class="o">=</span> <span class="n">_get_rc_timezone</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tz</span> <span class="o">=</span> <span class="n">tz</span></div>

<div class="viewcode-block" id="DateLocator.set_tzinfo"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateLocator.set_tzinfo.html#mpl.dates.DateLocator.set_tzinfo">[docs]</a>    <span class="k">def</span> <span class="nf">set_tzinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set time zone info.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tz</span> <span class="o">=</span> <span class="n">tz</span></div>

<div class="viewcode-block" id="DateLocator.datalim_to_dt"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateLocator.datalim_to_dt.html#mpl.dates.DateLocator.datalim_to_dt">[docs]</a>    <span class="k">def</span> <span class="nf">datalim_to_dt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert axis data interval to datetime objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_data_interval</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dmin</span> <span class="o">&gt;</span> <span class="n">dmax</span><span class="p">:</span>
            <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="n">dmax</span><span class="p">,</span> <span class="n">dmin</span>

        <span class="k">return</span> <span class="n">num2date</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">),</span> <span class="n">num2date</span><span class="p">(</span><span class="n">dmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span></div>

<div class="viewcode-block" id="DateLocator.viewlim_to_dt"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateLocator.viewlim_to_dt.html#mpl.dates.DateLocator.viewlim_to_dt">[docs]</a>    <span class="k">def</span> <span class="nf">viewlim_to_dt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the view interval to datetime objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_view_interval</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">vmin</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">vmin</span>

        <span class="k">return</span> <span class="n">num2date</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">),</span> <span class="n">num2date</span><span class="p">(</span><span class="n">vmax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return how many days a unit of the locator is; used for</span>
<span class="sd">        intelligent autoscaling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">_get_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the number of units for each tick.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span>

<div class="viewcode-block" id="DateLocator.nonsingular"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateLocator.nonsingular.html#mpl.dates.DateLocator.nonsingular">[docs]</a>    <span class="k">def</span> <span class="nf">nonsingular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the proposed upper and lower extent, adjust the range</span>
<span class="sd">        if it is too close to being singular (i.e. a range of ~0).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unit</span><span class="p">()</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_interval</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-6</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">-=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">unit</span> <span class="o">*</span> <span class="n">interval</span>
            <span class="n">vmax</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">unit</span> <span class="o">*</span> <span class="n">interval</span>
        <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span></div></div>


<div class="viewcode-block" id="RRuleLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.RRuleLocator.html#mpl.dates.RRuleLocator">[docs]</a><span class="k">class</span> <span class="nc">RRuleLocator</span><span class="p">(</span><span class="n">DateLocator</span><span class="p">):</span>
    <span class="c1"># use the dateutil rrule instance</span>

<div class="viewcode-block" id="RRuleLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.RRuleLocator.__init__.html#mpl.dates.RRuleLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">DateLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rule</span> <span class="o">=</span> <span class="n">o</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># if no data have been set, this will tank with a ValueError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewlim_to_dt</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick_values</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">)</span>

<div class="viewcode-block" id="RRuleLocator.tick_values"><a class="viewcode-back" href="../../generated/generated/mpl.dates.RRuleLocator.tick_values.html#mpl.dates.RRuleLocator.tick_values">[docs]</a>    <span class="k">def</span> <span class="nf">tick_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">vmax</span><span class="p">,</span> <span class="n">vmin</span><span class="p">)</span>

        <span class="c1"># We need to cap at the endpoints of valid datetime</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">vmin</span> <span class="o">-</span> <span class="n">delta</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">_from_ordinalf</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">vmax</span> <span class="o">+</span> <span class="n">delta</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># The magic number!</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">_from_ordinalf</span><span class="p">(</span><span class="mf">3652059.9999999</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rule</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">dtstart</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">MAXTICKS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># estimate the number of ticks very approximately so we don&#39;t</span>
        <span class="c1"># have to do a very expensive (and potentially near infinite)</span>
        <span class="c1"># &#39;between&#39; calculation, only to find out it will fail.</span>
        <span class="n">nmax</span><span class="p">,</span> <span class="n">nmin</span> <span class="o">=</span> <span class="n">date2num</span><span class="p">((</span><span class="n">vmax</span><span class="p">,</span> <span class="n">vmin</span><span class="p">))</span>
        <span class="n">estimate</span> <span class="o">=</span> <span class="p">(</span><span class="n">nmax</span> <span class="o">-</span> <span class="n">nmin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unit</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_interval</span><span class="p">())</span>
        <span class="c1"># This estimate is only an estimate, so be really conservative</span>
        <span class="c1"># about bailing...</span>
        <span class="k">if</span> <span class="n">estimate</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAXTICKS</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s1">&#39;RRuleLocator estimated to generate </span><span class="si">%d</span><span class="s1"> ticks from </span><span class="si">%s</span><span class="s1"> to </span><span class="si">%s</span><span class="s1">: &#39;</span>
                <span class="s1">&#39;exceeds Locator.MAXTICKS * 2 (</span><span class="si">%d</span><span class="s1">) &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">estimate</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span>
                                                        <span class="bp">self</span><span class="o">.</span><span class="n">MAXTICKS</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>

        <span class="n">dates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">date2num</span><span class="p">([</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raise_if_exceeds</span><span class="p">(</span><span class="n">date2num</span><span class="p">(</span><span class="n">dates</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">_get_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return how many days a unit of the locator is; used for</span>
<span class="sd">        intelligent autoscaling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule</span><span class="o">.</span><span class="n">_rrule</span><span class="o">.</span><span class="n">_freq</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unit_generic</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="RRuleLocator.get_unit_generic"><a class="viewcode-back" href="../../generated/generated/mpl.dates.RRuleLocator.get_unit_generic.html#mpl.dates.RRuleLocator.get_unit_generic">[docs]</a>    <span class="k">def</span> <span class="nf">get_unit_generic</span><span class="p">(</span><span class="n">freq</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">freq</span> <span class="o">==</span> <span class="n">YEARLY</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DAYS_PER_YEAR</span>
        <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="n">MONTHLY</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DAYS_PER_MONTH</span>
        <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="n">WEEKLY</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DAYS_PER_WEEK</span>
        <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="n">DAILY</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span>
        <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="n">HOURLY</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">HOURS_PER_DAY</span>
        <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="n">MINUTELY</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">MINUTES_PER_DAY</span>
        <span class="k">elif</span> <span class="n">freq</span> <span class="o">==</span> <span class="n">SECONDLY</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">SEC_PER_DAY</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># error</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>   <span class="c1"># or should this just return &#39;1&#39;?</span></div>

    <span class="k">def</span> <span class="nf">_get_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule</span><span class="o">.</span><span class="n">_rrule</span><span class="o">.</span><span class="n">_interval</span>

<div class="viewcode-block" id="RRuleLocator.autoscale"><a class="viewcode-back" href="../../generated/generated/mpl.dates.RRuleLocator.autoscale.html#mpl.dates.RRuleLocator.autoscale">[docs]</a>    <span class="k">def</span> <span class="nf">autoscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the view limits to include the data range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">datalim_to_dt</span><span class="p">()</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">dmax</span><span class="p">,</span> <span class="n">dmin</span><span class="p">)</span>

        <span class="c1"># We need to cap at the endpoints of valid datetime</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">dmin</span> <span class="o">-</span> <span class="n">delta</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">_from_ordinalf</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">dmax</span> <span class="o">+</span> <span class="n">delta</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># The magic number!</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">_from_ordinalf</span><span class="p">(</span><span class="mf">3652059.9999999</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rule</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">dtstart</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="n">stop</span><span class="p">)</span>
        <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">datalim_to_dt</span><span class="p">()</span>

        <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">vmin</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="n">dmin</span>

        <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="n">dmax</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="n">dmax</span>

        <span class="n">vmin</span> <span class="o">=</span> <span class="n">date2num</span><span class="p">(</span><span class="n">vmin</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">date2num</span><span class="p">(</span><span class="n">vmax</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="AutoDateLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.html#mpl.dates.AutoDateLocator">[docs]</a><span class="k">class</span> <span class="nc">AutoDateLocator</span><span class="p">(</span><span class="n">DateLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    On autoscale, this class picks the best</span>
<span class="sd">    :class:`DateLocator` to set the view limits and the tick</span>
<span class="sd">    locations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="AutoDateLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.__init__.html#mpl.dates.AutoDateLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">minticks</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">maxticks</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">interval_multiples</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *minticks* is the minimum number of ticks desired, which is used to</span>
<span class="sd">        select the type of ticking (yearly, monthly, etc.).</span>

<span class="sd">        *maxticks* is the maximum number of ticks desired, which controls</span>
<span class="sd">        any interval between ticks (ticking every other, every 3, etc.).</span>
<span class="sd">        For really fine-grained control, this can be a dictionary mapping</span>
<span class="sd">        individual rrule frequency constants (YEARLY, MONTHLY, etc.)</span>
<span class="sd">        to their own maximum number of ticks.  This can be used to keep</span>
<span class="sd">        the number of ticks appropriate to the format chosen in</span>
<span class="sd">        :class:`AutoDateFormatter`. Any frequency not specified in this</span>
<span class="sd">        dictionary is given a default value.</span>

<span class="sd">        *tz* is a :class:`tzinfo` instance.</span>

<span class="sd">        *interval_multiples* is a boolean that indicates whether ticks</span>
<span class="sd">        should be chosen to be multiple of the interval. This will lock</span>
<span class="sd">        ticks to &#39;nicer&#39; locations. For example, this will force the</span>
<span class="sd">        ticks to be at hours 0,6,12,18 when hourly ticking is done at</span>
<span class="sd">        6 hour intervals.</span>

<span class="sd">        The AutoDateLocator has an interval dictionary that maps the</span>
<span class="sd">        frequency of the tick (a constant from dateutil.rrule) and a</span>
<span class="sd">        multiple allowed for that ticking.  The default looks like this::</span>

<span class="sd">          self.intervald = {</span>
<span class="sd">            YEARLY  : [1, 2, 4, 5, 10, 20, 40, 50, 100, 200, 400, 500,</span>
<span class="sd">                      1000, 2000, 4000, 5000, 10000],</span>
<span class="sd">            MONTHLY : [1, 2, 3, 4, 6],</span>
<span class="sd">            DAILY   : [1, 2, 3, 7, 14],</span>
<span class="sd">            HOURLY  : [1, 2, 3, 4, 6, 12],</span>
<span class="sd">            MINUTELY: [1, 5, 10, 15, 30],</span>
<span class="sd">            SECONDLY: [1, 5, 10, 15, 30],</span>
<span class="sd">            MICROSECONDLY: [1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000,</span>
<span class="sd">                           5000, 10000, 20000, 50000, 100000, 200000, 500000,</span>
<span class="sd">                           1000000],</span>
<span class="sd">            }</span>

<span class="sd">        The interval is used to specify multiples that are appropriate for</span>
<span class="sd">        the frequency of ticking. For instance, every 7 days is sensible</span>
<span class="sd">        for daily ticks, but for minutes/seconds, 15 or 30 make sense.</span>
<span class="sd">        You can customize this dictionary by doing::</span>

<span class="sd">          locator = AutoDateLocator()</span>
<span class="sd">          locator.intervald[HOURLY] = [3] # only show every 3 hours</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DateLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="n">YearLocator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_freq</span> <span class="o">=</span> <span class="n">YEARLY</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_freqs</span> <span class="o">=</span> <span class="p">[</span><span class="n">YEARLY</span><span class="p">,</span> <span class="n">MONTHLY</span><span class="p">,</span> <span class="n">DAILY</span><span class="p">,</span> <span class="n">HOURLY</span><span class="p">,</span> <span class="n">MINUTELY</span><span class="p">,</span>
                       <span class="n">SECONDLY</span><span class="p">,</span> <span class="n">MICROSECONDLY</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minticks</span> <span class="o">=</span> <span class="n">minticks</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">maxticks</span> <span class="o">=</span> <span class="p">{</span><span class="n">YEARLY</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="n">MONTHLY</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">DAILY</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="n">HOURLY</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
                         <span class="n">MINUTELY</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="n">SECONDLY</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="n">MICROSECONDLY</span><span class="p">:</span> <span class="mi">8</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">maxticks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">maxticks</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">maxticks</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="c1"># Assume we were given an integer. Use this as the maximum</span>
                <span class="c1"># number of ticks for every frequency and create a</span>
                <span class="c1"># dictionary for this</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">maxticks</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_freqs</span><span class="p">,</span>
                                         <span class="p">[</span><span class="n">maxticks</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_freqs</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interval_multiples</span> <span class="o">=</span> <span class="n">interval_multiples</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intervald</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">YEARLY</span><span class="p">:</span>   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span>
                       <span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">],</span>
            <span class="n">MONTHLY</span><span class="p">:</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
            <span class="n">DAILY</span><span class="p">:</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span>
            <span class="n">HOURLY</span><span class="p">:</span>   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
            <span class="n">MINUTELY</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
            <span class="n">SECONDLY</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
            <span class="n">MICROSECONDLY</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span>
                            <span class="mi">5000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="mi">50000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">,</span> <span class="mi">200000</span><span class="p">,</span> <span class="mi">500000</span><span class="p">,</span>
                            <span class="mi">1000000</span><span class="p">]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_byranges</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span>
                          <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span> <span class="bp">None</span><span class="p">]</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Return the locations of the ticks&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span><span class="p">()</span>

<div class="viewcode-block" id="AutoDateLocator.tick_values"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.tick_values.html#mpl.dates.AutoDateLocator.tick_values">[docs]</a>    <span class="k">def</span> <span class="nf">tick_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_locator</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span><span class="o">.</span><span class="n">tick_values</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span></div>

<div class="viewcode-block" id="AutoDateLocator.nonsingular"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.nonsingular.html#mpl.dates.AutoDateLocator.nonsingular">[docs]</a>    <span class="k">def</span> <span class="nf">nonsingular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="c1"># whatever is thrown at us, we can scale the unit.</span>
        <span class="c1"># But default nonsingular date plots at an ~4 year period.</span>
        <span class="k">if</span> <span class="n">vmin</span> <span class="o">==</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="n">vmin</span> <span class="o">-</span> <span class="n">DAYS_PER_YEAR</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="n">vmax</span> <span class="o">+</span> <span class="n">DAYS_PER_YEAR</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span></div>

<div class="viewcode-block" id="AutoDateLocator.set_axis"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.set_axis.html#mpl.dates.AutoDateLocator.set_axis">[docs]</a>    <span class="k">def</span> <span class="nf">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="n">DateLocator</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span></div>

<div class="viewcode-block" id="AutoDateLocator.refresh"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.refresh.html#mpl.dates.AutoDateLocator.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Refresh internal information based on current limits.&#39;</span>
        <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewlim_to_dt</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_locator</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freq</span> <span class="ow">in</span> <span class="p">[</span><span class="n">MICROSECONDLY</span><span class="p">]:</span>
            <span class="k">return</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">MUSECONDS_PER_DAY</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RRuleLocator</span><span class="o">.</span><span class="n">get_unit_generic</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_freq</span><span class="p">)</span>

<div class="viewcode-block" id="AutoDateLocator.autoscale"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.autoscale.html#mpl.dates.AutoDateLocator.autoscale">[docs]</a>    <span class="k">def</span> <span class="nf">autoscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Try to choose the view limits intelligently.&#39;</span>
        <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">datalim_to_dt</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_locator</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_locator</span><span class="o">.</span><span class="n">autoscale</span><span class="p">()</span></div>

<div class="viewcode-block" id="AutoDateLocator.get_locator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.AutoDateLocator.get_locator.html#mpl.dates.AutoDateLocator.get_locator">[docs]</a>    <span class="k">def</span> <span class="nf">get_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">):</span>
        <span class="s1">&#39;Pick the best locator based on a distance.&#39;</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">dmax</span><span class="p">,</span> <span class="n">dmin</span><span class="p">)</span>
        <span class="n">tdelta</span> <span class="o">=</span> <span class="n">dmax</span> <span class="o">-</span> <span class="n">dmin</span>

        <span class="c1"># take absolute difference</span>
        <span class="k">if</span> <span class="n">dmin</span> <span class="o">&gt;</span> <span class="n">dmax</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="n">delta</span>
            <span class="n">tdelta</span> <span class="o">=</span> <span class="o">-</span><span class="n">tdelta</span>

        <span class="c1"># The following uses a mix of calls to relativedelta and timedelta</span>
        <span class="c1"># methods because there is incomplete overlap in the functionality of</span>
        <span class="c1"># these similar functions, and it&#39;s best to avoid doing our own math</span>
        <span class="c1"># whenever possible.</span>
        <span class="n">numYears</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">delta</span><span class="o">.</span><span class="n">years</span><span class="p">)</span>
        <span class="n">numMonths</span> <span class="o">=</span> <span class="p">(</span><span class="n">numYears</span> <span class="o">*</span> <span class="n">MONTHS_PER_YEAR</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta</span><span class="o">.</span><span class="n">months</span>
        <span class="n">numDays</span> <span class="o">=</span> <span class="n">tdelta</span><span class="o">.</span><span class="n">days</span>   <span class="c1"># Avoids estimates of days/month, days/year</span>
        <span class="n">numHours</span> <span class="o">=</span> <span class="p">(</span><span class="n">numDays</span> <span class="o">*</span> <span class="n">HOURS_PER_DAY</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta</span><span class="o">.</span><span class="n">hours</span>
        <span class="n">numMinutes</span> <span class="o">=</span> <span class="p">(</span><span class="n">numHours</span> <span class="o">*</span> <span class="n">MIN_PER_HOUR</span><span class="p">)</span> <span class="o">+</span> <span class="n">delta</span><span class="o">.</span><span class="n">minutes</span>
        <span class="n">numSeconds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">_total_seconds</span><span class="p">(</span><span class="n">tdelta</span><span class="p">))</span>
        <span class="n">numMicroseconds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">_total_seconds</span><span class="p">(</span><span class="n">tdelta</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">)</span>

        <span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="n">numYears</span><span class="p">,</span> <span class="n">numMonths</span><span class="p">,</span> <span class="n">numDays</span><span class="p">,</span> <span class="n">numHours</span><span class="p">,</span> <span class="n">numMinutes</span><span class="p">,</span>
                <span class="n">numSeconds</span><span class="p">,</span> <span class="n">numMicroseconds</span><span class="p">]</span>

        <span class="n">use_rrule_locator</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span> <span class="o">*</span> <span class="mi">6</span> <span class="o">+</span> <span class="p">[</span><span class="bp">False</span><span class="p">]</span>

        <span class="c1"># Default setting of bymonth, etc. to pass to rrule</span>
        <span class="c1"># [unused (for year), bymonth, bymonthday, byhour, byminute,</span>
        <span class="c1">#  bysecond, unused (for microseconds)]</span>
        <span class="n">byranges</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">None</span><span class="p">]</span>

        <span class="c1"># Loop over all the frequencies and try to find one that gives at</span>
        <span class="c1"># least a minticks tick positions.  Once this is found, look for</span>
        <span class="c1"># an interval from an list specific to that frequency that gives no</span>
        <span class="c1"># more than maxticks tick positions. Also, set up some ranges</span>
        <span class="c1"># (bymonth, etc.) as appropriate to be passed to rrulewrapper.</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_freqs</span><span class="p">,</span> <span class="n">nums</span><span class="p">)):</span>
            <span class="c1"># If this particular frequency doesn&#39;t give enough ticks, continue</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minticks</span><span class="p">:</span>
                <span class="c1"># Since we&#39;re not using this particular frequency, set</span>
                <span class="c1"># the corresponding by_ to None so the rrule can act as</span>
                <span class="c1"># appropriate</span>
                <span class="n">byranges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">continue</span>

            <span class="c1"># Find the first available interval that doesn&#39;t give too many</span>
            <span class="c1"># ticks</span>
            <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intervald</span><span class="p">[</span><span class="n">freq</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">interval</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxticks</span><span class="p">[</span><span class="n">freq</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># We went through the whole loop without breaking, default to</span>
                <span class="c1"># the last interval in the list and raise a warning</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;AutoDateLocator was unable to pick an &#39;</span>
                              <span class="s1">&#39;appropriate interval for this date range. &#39;</span>
                              <span class="s1">&#39;It may be necessary to add an interval value &#39;</span>
                              <span class="s2">&quot;to the AutoDateLocator&#39;s intervald dictionary.&quot;</span>
                              <span class="s1">&#39; Defaulting to {0}.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">interval</span><span class="p">))</span>

            <span class="c1"># Set some parameters as appropriate</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_freq</span> <span class="o">=</span> <span class="n">freq</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_byranges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval_multiples</span><span class="p">:</span>
                <span class="n">byranges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_byranges</span><span class="p">[</span><span class="n">i</span><span class="p">][::</span><span class="n">interval</span><span class="p">]</span>
                <span class="n">interval</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">byranges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_byranges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="c1"># We found what frequency to use</span>
            <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No sensible date limit could be found in the &#39;</span>
                             <span class="s1">&#39;AutoDateLocator.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">use_rrule_locator</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">bymonth</span><span class="p">,</span> <span class="n">bymonthday</span><span class="p">,</span> <span class="n">byhour</span><span class="p">,</span> <span class="n">byminute</span><span class="p">,</span> <span class="n">bysecond</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">byranges</span>

            <span class="n">rrule</span> <span class="o">=</span> <span class="n">rrulewrapper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_freq</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
                                 <span class="n">dtstart</span><span class="o">=</span><span class="n">dmin</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="n">dmax</span><span class="p">,</span>
                                 <span class="n">bymonth</span><span class="o">=</span><span class="n">bymonth</span><span class="p">,</span> <span class="n">bymonthday</span><span class="o">=</span><span class="n">bymonthday</span><span class="p">,</span>
                                 <span class="n">byhour</span><span class="o">=</span><span class="n">byhour</span><span class="p">,</span> <span class="n">byminute</span><span class="o">=</span><span class="n">byminute</span><span class="p">,</span>
                                 <span class="n">bysecond</span><span class="o">=</span><span class="n">bysecond</span><span class="p">)</span>

            <span class="n">locator</span> <span class="o">=</span> <span class="n">RRuleLocator</span><span class="p">(</span><span class="n">rrule</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">locator</span> <span class="o">=</span> <span class="n">MicrosecondLocator</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span>

        <span class="n">locator</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">)</span>

        <span class="n">locator</span><span class="o">.</span><span class="n">set_view_interval</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_view_interval</span><span class="p">())</span>
        <span class="n">locator</span><span class="o">.</span><span class="n">set_data_interval</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_data_interval</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">locator</span></div></div>


<div class="viewcode-block" id="YearLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.YearLocator.html#mpl.dates.YearLocator">[docs]</a><span class="k">class</span> <span class="nc">YearLocator</span><span class="p">(</span><span class="n">DateLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on a given day of each year that is a multiple of base.</span>

<span class="sd">    Examples::</span>

<span class="sd">      # Tick every year on Jan 1st</span>
<span class="sd">      locator = YearLocator()</span>

<span class="sd">      # Tick every 5 years on July 4th</span>
<span class="sd">      locator = YearLocator(5, month=7, day=4)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="YearLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.YearLocator.__init__.html#mpl.dates.YearLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark years that are multiple of base on a given month and day</span>
<span class="sd">        (default jan 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DateLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">ticker</span><span class="o">.</span><span class="n">Base</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replaced</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;month&#39;</span><span class="p">:</span>  <span class="n">month</span><span class="p">,</span>
                         <span class="s1">&#39;day&#39;</span><span class="p">:</span>    <span class="n">day</span><span class="p">,</span>
                         <span class="s1">&#39;hour&#39;</span><span class="p">:</span>   <span class="mi">0</span><span class="p">,</span>
                         <span class="s1">&#39;minute&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                         <span class="s1">&#39;second&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                         <span class="s1">&#39;tzinfo&#39;</span><span class="p">:</span> <span class="n">tz</span>
                         <span class="p">}</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># if no data have been set, this will tank with a ValueError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewlim_to_dt</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick_values</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">)</span>

<div class="viewcode-block" id="YearLocator.tick_values"><a class="viewcode-back" href="../../generated/generated/mpl.dates.YearLocator.tick_values.html#mpl.dates.YearLocator.tick_values">[docs]</a>    <span class="k">def</span> <span class="nf">tick_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="n">vmin</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="n">vmax</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>

        <span class="n">ticks</span> <span class="o">=</span> <span class="p">[</span><span class="n">vmin</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">ymin</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">replaced</span><span class="p">)]</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">ticks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">&gt;=</span> <span class="n">ymax</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">date2num</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span>
            <span class="n">year</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">get_base</span><span class="p">()</span>
            <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">replaced</span><span class="p">))</span></div>

<div class="viewcode-block" id="YearLocator.autoscale"><a class="viewcode-back" href="../../generated/generated/mpl.dates.YearLocator.autoscale.html#mpl.dates.YearLocator.autoscale">[docs]</a>    <span class="k">def</span> <span class="nf">autoscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the view limits to include the data range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">datalim_to_dt</span><span class="p">()</span>

        <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="n">dmin</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="n">dmax</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="n">dmin</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">ymin</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">replaced</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">dmax</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">ymax</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">replaced</span><span class="p">)</span>

        <span class="n">vmin</span> <span class="o">=</span> <span class="n">date2num</span><span class="p">(</span><span class="n">vmin</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">date2num</span><span class="p">(</span><span class="n">vmax</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MonthLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MonthLocator.html#mpl.dates.MonthLocator">[docs]</a><span class="k">class</span> <span class="nc">MonthLocator</span><span class="p">(</span><span class="n">RRuleLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on occurances of each month month, e.g., 1, 3, 12.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="MonthLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MonthLocator.__init__.html#mpl.dates.MonthLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bymonth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bymonthday</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark every month in *bymonth*; *bymonth* can be an int or</span>
<span class="sd">        sequence.  Default is ``range(1,13)``, i.e. every month.</span>

<span class="sd">        *interval* is the interval between each iteration.  For</span>
<span class="sd">        example, if ``interval=2``, mark every second occurance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bymonth</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">bymonth</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bymonth</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="c1"># This fixes a bug in dateutil &lt;= 2.3 which prevents the use of</span>
            <span class="c1"># numpy arrays in (among other things) the bymonthday, byweekday</span>
            <span class="c1"># and bymonth parameters.</span>
            <span class="n">bymonth</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">item</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bymonth</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)]</span>

        <span class="n">rule</span> <span class="o">=</span> <span class="n">rrulewrapper</span><span class="p">(</span><span class="n">MONTHLY</span><span class="p">,</span> <span class="n">bymonth</span><span class="o">=</span><span class="n">bymonth</span><span class="p">,</span> <span class="n">bymonthday</span><span class="o">=</span><span class="n">bymonthday</span><span class="p">,</span>
                         <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">hms0d</span><span class="p">)</span>
        <span class="n">RRuleLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="WeekdayLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.WeekdayLocator.html#mpl.dates.WeekdayLocator">[docs]</a><span class="k">class</span> <span class="nc">WeekdayLocator</span><span class="p">(</span><span class="n">RRuleLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on occurances of each weekday.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="WeekdayLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.WeekdayLocator.__init__.html#mpl.dates.WeekdayLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">byweekday</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark every weekday in *byweekday*; *byweekday* can be a number or</span>
<span class="sd">        sequence.</span>

<span class="sd">        Elements of *byweekday* must be one of MO, TU, WE, TH, FR, SA,</span>
<span class="sd">        SU, the constants from :mod:`dateutil.rrule`, which have been</span>
<span class="sd">        imported into the :mod:`matplotlib.dates` namespace.</span>

<span class="sd">        *interval* specifies the number of weeks to skip.  For example,</span>
<span class="sd">        ``interval=2`` plots every second week.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">byweekday</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="c1"># This fixes a bug in dateutil &lt;= 2.3 which prevents the use of</span>
            <span class="c1"># numpy arrays in (among other things) the bymonthday, byweekday</span>
            <span class="c1"># and bymonth parameters.</span>
            <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">item</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">byweekday</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)]</span>

        <span class="n">rule</span> <span class="o">=</span> <span class="n">rrulewrapper</span><span class="p">(</span><span class="n">DAILY</span><span class="p">,</span> <span class="n">byweekday</span><span class="o">=</span><span class="n">byweekday</span><span class="p">,</span>
                            <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">hms0d</span><span class="p">)</span>
        <span class="n">RRuleLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DayLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DayLocator.html#mpl.dates.DayLocator">[docs]</a><span class="k">class</span> <span class="nc">DayLocator</span><span class="p">(</span><span class="n">RRuleLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on occurances of each day of the month.  For example,</span>
<span class="sd">    1, 15, 30.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="DayLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DayLocator.__init__.html#mpl.dates.DayLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bymonthday</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark every day in *bymonthday*; *bymonthday* can be an int or</span>
<span class="sd">        sequence.</span>

<span class="sd">        Default is to tick every day of the month: ``bymonthday=range(1,32)``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bymonthday</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">bymonthday</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bymonthday</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="c1"># This fixes a bug in dateutil &lt;= 2.3 which prevents the use of</span>
            <span class="c1"># numpy arrays in (among other things) the bymonthday, byweekday</span>
            <span class="c1"># and bymonth parameters.</span>
            <span class="n">bymonthday</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">item</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bymonthday</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)]</span>

        <span class="n">rule</span> <span class="o">=</span> <span class="n">rrulewrapper</span><span class="p">(</span><span class="n">DAILY</span><span class="p">,</span> <span class="n">bymonthday</span><span class="o">=</span><span class="n">bymonthday</span><span class="p">,</span>
                            <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">hms0d</span><span class="p">)</span>
        <span class="n">RRuleLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="HourLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.HourLocator.html#mpl.dates.HourLocator">[docs]</a><span class="k">class</span> <span class="nc">HourLocator</span><span class="p">(</span><span class="n">RRuleLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on occurances of each hour.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="HourLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.HourLocator.__init__.html#mpl.dates.HourLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">byhour</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark every hour in *byhour*; *byhour* can be an int or sequence.</span>
<span class="sd">        Default is to tick every hour: ``byhour=range(24)``</span>

<span class="sd">        *interval* is the interval between each iteration.  For</span>
<span class="sd">        example, if ``interval=2``, mark every second occurrence.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">byhour</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">byhour</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>

        <span class="n">rule</span> <span class="o">=</span> <span class="n">rrulewrapper</span><span class="p">(</span><span class="n">HOURLY</span><span class="p">,</span> <span class="n">byhour</span><span class="o">=</span><span class="n">byhour</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
                            <span class="n">byminute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bysecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">RRuleLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MinuteLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MinuteLocator.html#mpl.dates.MinuteLocator">[docs]</a><span class="k">class</span> <span class="nc">MinuteLocator</span><span class="p">(</span><span class="n">RRuleLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on occurances of each minute.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="MinuteLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MinuteLocator.__init__.html#mpl.dates.MinuteLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">byminute</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark every minute in *byminute*; *byminute* can be an int or</span>
<span class="sd">        sequence.  Default is to tick every minute: ``byminute=range(60)``</span>

<span class="sd">        *interval* is the interval between each iteration.  For</span>
<span class="sd">        example, if ``interval=2``, mark every second occurrence.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">byminute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">byminute</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>

        <span class="n">rule</span> <span class="o">=</span> <span class="n">rrulewrapper</span><span class="p">(</span><span class="n">MINUTELY</span><span class="p">,</span> <span class="n">byminute</span><span class="o">=</span><span class="n">byminute</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
                            <span class="n">bysecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">RRuleLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SecondLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.SecondLocator.html#mpl.dates.SecondLocator">[docs]</a><span class="k">class</span> <span class="nc">SecondLocator</span><span class="p">(</span><span class="n">RRuleLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on occurances of each second.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="SecondLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.SecondLocator.__init__.html#mpl.dates.SecondLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bysecond</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark every second in *bysecond*; *bysecond* can be an int or</span>
<span class="sd">        sequence.  Default is to tick every second: ``bysecond = range(60)``</span>

<span class="sd">        *interval* is the interval between each iteration.  For</span>
<span class="sd">        example, if ``interval=2``, mark every second occurrence.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bysecond</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">bysecond</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>

        <span class="n">rule</span> <span class="o">=</span> <span class="n">rrulewrapper</span><span class="p">(</span><span class="n">SECONDLY</span><span class="p">,</span> <span class="n">bysecond</span><span class="o">=</span><span class="n">bysecond</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">)</span>
        <span class="n">RRuleLocator</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MicrosecondLocator"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MicrosecondLocator.html#mpl.dates.MicrosecondLocator">[docs]</a><span class="k">class</span> <span class="nc">MicrosecondLocator</span><span class="p">(</span><span class="n">DateLocator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make ticks on occurances of each microsecond.</span>

<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="MicrosecondLocator.__init__"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MicrosecondLocator.__init__.html#mpl.dates.MicrosecondLocator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *interval* is the interval between each iteration.  For</span>
<span class="sd">        example, if ``interval=2``, mark every second microsecond.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped_locator</span> <span class="o">=</span> <span class="n">ticker</span><span class="o">.</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="n">interval</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tz</span> <span class="o">=</span> <span class="n">tz</span></div>

<div class="viewcode-block" id="MicrosecondLocator.set_axis"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MicrosecondLocator.set_axis.html#mpl.dates.MicrosecondLocator.set_axis">[docs]</a>    <span class="k">def</span> <span class="nf">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped_locator</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DateLocator</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span></div>

<div class="viewcode-block" id="MicrosecondLocator.set_view_interval"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MicrosecondLocator.set_view_interval.html#mpl.dates.MicrosecondLocator.set_view_interval">[docs]</a>    <span class="k">def</span> <span class="nf">set_view_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped_locator</span><span class="o">.</span><span class="n">set_view_interval</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DateLocator</span><span class="o">.</span><span class="n">set_view_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span></div>

<div class="viewcode-block" id="MicrosecondLocator.set_data_interval"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MicrosecondLocator.set_data_interval.html#mpl.dates.MicrosecondLocator.set_data_interval">[docs]</a>    <span class="k">def</span> <span class="nf">set_data_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped_locator</span><span class="o">.</span><span class="n">set_data_interval</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DateLocator</span><span class="o">.</span><span class="n">set_data_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># if no data have been set, this will tank with a ValueError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewlim_to_dt</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick_values</span><span class="p">(</span><span class="n">dmin</span><span class="p">,</span> <span class="n">dmax</span><span class="p">)</span>

<div class="viewcode-block" id="MicrosecondLocator.tick_values"><a class="viewcode-back" href="../../generated/generated/mpl.dates.MicrosecondLocator.tick_values.html#mpl.dates.MicrosecondLocator.tick_values">[docs]</a>    <span class="k">def</span> <span class="nf">tick_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="n">nmin</span><span class="p">,</span> <span class="n">nmax</span> <span class="o">=</span> <span class="n">date2num</span><span class="p">((</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">))</span>
        <span class="n">nmin</span> <span class="o">*=</span> <span class="n">MUSECONDS_PER_DAY</span>
        <span class="n">nmax</span> <span class="o">*=</span> <span class="n">MUSECONDS_PER_DAY</span>
        <span class="n">ticks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped_locator</span><span class="o">.</span><span class="n">tick_values</span><span class="p">(</span><span class="n">nmin</span><span class="p">,</span> <span class="n">nmax</span><span class="p">)</span>
        <span class="n">ticks</span> <span class="o">=</span> <span class="p">[</span><span class="n">tick</span> <span class="o">/</span> <span class="n">MUSECONDS_PER_DAY</span> <span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">ticks</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ticks</span></div>

    <span class="k">def</span> <span class="nf">_get_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return how many days a unit of the locator is; used for</span>
<span class="sd">        intelligent autoscaling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">MUSECONDS_PER_DAY</span>

    <span class="k">def</span> <span class="nf">_get_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the number of units for each tick.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interval</span></div>


<span class="k">def</span> <span class="nf">_close_to_dt</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assert that datetimes *d1* and *d2* are within *epsilon* microseconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span>
    <span class="n">mus</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_total_seconds</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e6</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">mus</span> <span class="o">&lt;</span> <span class="n">epsilon</span>


<span class="k">def</span> <span class="nf">_close_to_num</span><span class="p">(</span><span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assert that float ordinals *o1* and *o2* are within *epsilon*</span>
<span class="sd">    microseconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">((</span><span class="n">o2</span> <span class="o">-</span> <span class="n">o1</span><span class="p">)</span> <span class="o">*</span> <span class="n">MUSECONDS_PER_DAY</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="n">epsilon</span>


<div class="viewcode-block" id="epoch2num"><a class="viewcode-back" href="../../generated/generated/mpl.dates.epoch2num.html#mpl.dates.epoch2num">[docs]</a><span class="k">def</span> <span class="nf">epoch2num</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert an epoch or sequence of epochs to the new date format,</span>
<span class="sd">    that is days since 0001.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">EPOCH_OFFSET</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">/</span> <span class="n">SEC_PER_DAY</span></div>


<div class="viewcode-block" id="num2epoch"><a class="viewcode-back" href="../../generated/generated/mpl.dates.num2epoch.html#mpl.dates.num2epoch">[docs]</a><span class="k">def</span> <span class="nf">num2epoch</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert days since 0001 to epoch.  *d* can be a number or sequence.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">-</span> <span class="n">EPOCH_OFFSET</span><span class="p">)</span> <span class="o">*</span> <span class="n">SEC_PER_DAY</span></div>


<div class="viewcode-block" id="mx2num"><a class="viewcode-back" href="../../generated/generated/mpl.dates.mx2num.html#mpl.dates.mx2num">[docs]</a><span class="k">def</span> <span class="nf">mx2num</span><span class="p">(</span><span class="n">mxdates</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert mx :class:`datetime` instance (or sequence of mx</span>
<span class="sd">    instances) to the new date format.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">scalar</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cbook</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">mxdates</span><span class="p">):</span>
        <span class="n">scalar</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">mxdates</span> <span class="o">=</span> <span class="p">[</span><span class="n">mxdates</span><span class="p">]</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">epoch2num</span><span class="p">([</span><span class="n">m</span><span class="o">.</span><span class="n">ticks</span><span class="p">()</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">mxdates</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">scalar</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ret</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ret</span></div>


<div class="viewcode-block" id="date_ticker_factory"><a class="viewcode-back" href="../../generated/generated/mpl.dates.date_ticker_factory.html#mpl.dates.date_ticker_factory">[docs]</a><span class="k">def</span> <span class="nf">date_ticker_factory</span><span class="p">(</span><span class="n">span</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">numticks</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a date locator with *numticks* (approx) and a date formatter</span>
<span class="sd">    for *span* in days.  Return value is (locator, formatter).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">span</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">span</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">HOURS_PER_DAY</span>

    <span class="n">mins</span> <span class="o">=</span> <span class="n">span</span> <span class="o">*</span> <span class="n">MINUTES_PER_DAY</span>
    <span class="n">hrs</span> <span class="o">=</span> <span class="n">span</span> <span class="o">*</span> <span class="n">HOURS_PER_DAY</span>
    <span class="n">days</span> <span class="o">=</span> <span class="n">span</span>
    <span class="n">wks</span> <span class="o">=</span> <span class="n">span</span> <span class="o">/</span> <span class="n">DAYS_PER_WEEK</span>
    <span class="n">months</span> <span class="o">=</span> <span class="n">span</span> <span class="o">/</span> <span class="n">DAYS_PER_MONTH</span>      <span class="c1"># Approx</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">span</span> <span class="o">/</span> <span class="n">DAYS_PER_YEAR</span>        <span class="c1"># Approx</span>

    <span class="k">if</span> <span class="n">years</span> <span class="o">&gt;</span> <span class="n">numticks</span><span class="p">:</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="n">YearLocator</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">years</span> <span class="o">/</span> <span class="n">numticks</span><span class="p">),</span> <span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>  <span class="c1"># define</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%Y&#39;</span>
    <span class="k">elif</span> <span class="n">months</span> <span class="o">&gt;</span> <span class="n">numticks</span><span class="p">:</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="n">MonthLocator</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%b %Y&#39;</span>
    <span class="k">elif</span> <span class="n">wks</span> <span class="o">&gt;</span> <span class="n">numticks</span><span class="p">:</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="n">WeekdayLocator</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%a, %b </span><span class="si">%d</span><span class="s1">&#39;</span>
    <span class="k">elif</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="n">numticks</span><span class="p">:</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="n">DayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">days</span> <span class="o">/</span> <span class="n">numticks</span><span class="p">)),</span> <span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%b </span><span class="si">%d</span><span class="s1">&#39;</span>
    <span class="k">elif</span> <span class="n">hrs</span> <span class="o">&gt;</span> <span class="n">numticks</span><span class="p">:</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="n">HourLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">hrs</span> <span class="o">/</span> <span class="n">numticks</span><span class="p">)),</span> <span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%H:%M</span><span class="se">\n</span><span class="s1">%b </span><span class="si">%d</span><span class="s1">&#39;</span>
    <span class="k">elif</span> <span class="n">mins</span> <span class="o">&gt;</span> <span class="n">numticks</span><span class="p">:</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="n">MinuteLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">mins</span> <span class="o">/</span> <span class="n">numticks</span><span class="p">)),</span>
                                <span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%H:%M:%S&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="n">MinuteLocator</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%H:%M:%S&#39;</span>

    <span class="n">formatter</span> <span class="o">=</span> <span class="n">DateFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">locator</span><span class="p">,</span> <span class="n">formatter</span></div>


<div class="viewcode-block" id="seconds"><a class="viewcode-back" href="../../generated/generated/mpl.dates.seconds.html#mpl.dates.seconds">[docs]</a><span class="k">def</span> <span class="nf">seconds</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return seconds as days.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">SEC_PER_DAY</span></div>


<div class="viewcode-block" id="minutes"><a class="viewcode-back" href="../../generated/generated/mpl.dates.minutes.html#mpl.dates.minutes">[docs]</a><span class="k">def</span> <span class="nf">minutes</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return minutes as days.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">/</span> <span class="n">MINUTES_PER_DAY</span></div>


<div class="viewcode-block" id="hours"><a class="viewcode-back" href="../../generated/generated/mpl.dates.hours.html#mpl.dates.hours">[docs]</a><span class="k">def</span> <span class="nf">hours</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return hours as days.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">h</span> <span class="o">/</span> <span class="n">HOURS_PER_DAY</span></div>


<div class="viewcode-block" id="weeks"><a class="viewcode-back" href="../../generated/generated/mpl.dates.weeks.html#mpl.dates.weeks">[docs]</a><span class="k">def</span> <span class="nf">weeks</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return weeks as days.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">w</span> <span class="o">*</span> <span class="n">DAYS_PER_WEEK</span></div>


<div class="viewcode-block" id="DateConverter"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateConverter.html#mpl.dates.DateConverter">[docs]</a><span class="k">class</span> <span class="nc">DateConverter</span><span class="p">(</span><span class="n">units</span><span class="o">.</span><span class="n">ConversionInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converter for datetime.date and datetime.datetime data,</span>
<span class="sd">    or for date/time data represented as it would be converted</span>
<span class="sd">    by :func:`date2num`.</span>

<span class="sd">    The &#39;unit&#39; tag for such data is None or a tzinfo instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="DateConverter.axisinfo"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateConverter.axisinfo.html#mpl.dates.DateConverter.axisinfo">[docs]</a>    <span class="k">def</span> <span class="nf">axisinfo</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the :class:`~matplotlib.units.AxisInfo` for *unit*.</span>

<span class="sd">        *unit* is a tzinfo instance or None.</span>
<span class="sd">        The *axis* argument is required but not used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tz</span> <span class="o">=</span> <span class="n">unit</span>

        <span class="n">majloc</span> <span class="o">=</span> <span class="n">AutoDateLocator</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">majfmt</span> <span class="o">=</span> <span class="n">AutoDateFormatter</span><span class="p">(</span><span class="n">majloc</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span>
        <span class="n">datemin</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">datemax</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">units</span><span class="o">.</span><span class="n">AxisInfo</span><span class="p">(</span><span class="n">majloc</span><span class="o">=</span><span class="n">majloc</span><span class="p">,</span> <span class="n">majfmt</span><span class="o">=</span><span class="n">majfmt</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                              <span class="n">default_limits</span><span class="o">=</span><span class="p">(</span><span class="n">datemin</span><span class="p">,</span> <span class="n">datemax</span><span class="p">))</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="DateConverter.convert"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateConverter.convert.html#mpl.dates.DateConverter.convert">[docs]</a>    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If *value* is not already a number or sequence of numbers,</span>
<span class="sd">        convert it with :func:`date2num`.</span>

<span class="sd">        The *unit* and *axis* arguments are not used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">units</span><span class="o">.</span><span class="n">ConversionInterface</span><span class="o">.</span><span class="n">is_numlike</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">date2num</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="DateConverter.default_units"><a class="viewcode-back" href="../../generated/generated/mpl.dates.DateConverter.default_units.html#mpl.dates.DateConverter.default_units">[docs]</a>    <span class="k">def</span> <span class="nf">default_units</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the tzinfo instance of *x* or of its first element, or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">safe_first_element</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">StopIteration</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">tzinfo</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="bp">None</span></div></div>


<span class="n">units</span><span class="o">.</span><span class="n">registry</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">]</span> <span class="o">=</span> <span class="n">DateConverter</span><span class="p">()</span>
<span class="n">units</span><span class="o">.</span><span class="n">registry</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">DateConverter</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
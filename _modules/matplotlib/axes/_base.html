

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>matplotlib.axes._base</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="" href="../../../index.html"/>
        <link rel="up" title="matplotlib" href="../../matplotlib.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> My Project
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Autogenerated API</span></p>
<ul class="simple">
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/mpl.html"><code class="docutils literal"><span class="pre">mpl</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/mpl.pyplot.html"><code class="docutils literal"><span class="pre">mpl.pyplot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/mpl.axes.html"><code class="docutils literal"><span class="pre">mpl.axes</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/mpl.axis.html"><code class="docutils literal"><span class="pre">mpl.axis</span></code></a></li>
</ul>
<p class="caption"><span class="caption-text">Autogenerated API - More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../others.html">Other modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infreq.html">Infreqeuntly used</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">My Project</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../matplotlib.html">matplotlib</a> &raquo;</li>
        
      <li>matplotlib.axes._base</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for matplotlib.axes._base</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">matplotlib.externals</span> <span class="kn">import</span> <span class="n">six</span>
<span class="kn">from</span> <span class="nn">matplotlib.externals.six.moves</span> <span class="kn">import</span> <span class="nb">xrange</span>

<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">ma</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cbook</span>
<span class="kn">from</span> <span class="nn">matplotlib.cbook</span> <span class="kn">import</span> <span class="p">(</span><span class="n">_check_1d</span><span class="p">,</span> <span class="n">_string_to_bool</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span>
                              <span class="n">index_of</span><span class="p">,</span> <span class="n">get_label</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">docstring</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="kn">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">matplotlib.lines</span> <span class="kn">as</span> <span class="nn">mlines</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="kn">as</span> <span class="nn">mpatches</span>
<span class="kn">import</span> <span class="nn">matplotlib.artist</span> <span class="kn">as</span> <span class="nn">martist</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="kn">as</span> <span class="nn">mtransforms</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="kn">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">matplotlib.axis</span> <span class="kn">as</span> <span class="nn">maxis</span>
<span class="kn">import</span> <span class="nn">matplotlib.scale</span> <span class="kn">as</span> <span class="nn">mscale</span>
<span class="kn">import</span> <span class="nn">matplotlib.spines</span> <span class="kn">as</span> <span class="nn">mspines</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">as</span> <span class="nn">font_manager</span>
<span class="kn">import</span> <span class="nn">matplotlib.text</span> <span class="kn">as</span> <span class="nn">mtext</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="kn">as</span> <span class="nn">mimage</span>
<span class="kn">from</span> <span class="nn">matplotlib.offsetbox</span> <span class="kn">import</span> <span class="n">OffsetBox</span>
<span class="kn">from</span> <span class="nn">matplotlib.artist</span> <span class="kn">import</span> <span class="n">allow_rasterization</span>

<span class="kn">from</span> <span class="nn">matplotlib.rcsetup</span> <span class="kn">import</span> <span class="n">cycler</span>

<span class="n">rcParams</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span>

<span class="n">is_string_like</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_string_like</span>
<span class="n">is_sequence_of_strings</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_sequence_of_strings</span>


<span class="k">def</span> <span class="nf">_process_plot_format</span><span class="p">(</span><span class="n">fmt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a MATLAB style color/line style format string.  Return a</span>
<span class="sd">    (*linestyle*, *color*) tuple as a result of the processing.  Default</span>
<span class="sd">    values are (&#39;-&#39;, &#39;b&#39;).  Example format strings include:</span>

<span class="sd">    * &#39;ko&#39;: black circles</span>
<span class="sd">    * &#39;.b&#39;: blue dots</span>
<span class="sd">    * &#39;r--&#39;: red dashed lines</span>

<span class="sd">    .. seealso::</span>

<span class="sd">        :func:`~matplotlib.Line2D.lineStyles` and</span>
<span class="sd">        :func:`~matplotlib.pyplot.colors`</span>
<span class="sd">            for all possible styles and color format string.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">linestyle</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">color</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1"># Is fmt just a colorspec?</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">colorConverter</span><span class="o">.</span><span class="n">to_rgb</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>

        <span class="c1"># We need to differentiate grayscale &#39;1.0&#39; from tri_down marker &#39;1&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fmtint</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>  <span class="c1"># Yes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fmt</span> <span class="o">!=</span> <span class="n">fmtint</span><span class="p">:</span>
                <span class="c1"># user definitely doesn&#39;t want tri_down marker</span>
                <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>  <span class="c1"># Yes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># ignore converted color</span>
                <span class="n">color</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c1"># No, not just a color.</span>

    <span class="c1"># handle the multi char special cases and strip them from the</span>
    <span class="c1"># string</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;--&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;--&#39;</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;-.&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;-.&#39;</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="n">chars</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">fmt</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chars</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineStyles</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Illegal format string &quot;</span><span class="si">%s</span><span class="s1">&quot;; two linestyle symbols&#39;</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">linestyle</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineMarkers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Illegal format string &quot;</span><span class="si">%s</span><span class="s1">&quot;; two marker symbols&#39;</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">colorConverter</span><span class="o">.</span><span class="n">colors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Illegal format string &quot;</span><span class="si">%s</span><span class="s1">&quot;; two color symbols&#39;</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Unrecognized character </span><span class="si">%c</span><span class="s1"> in format string&#39;</span> <span class="o">%</span> <span class="n">c</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">marker</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;lines.linestyle&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>

    <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>


<span class="k">class</span> <span class="nc">_process_plot_var_args</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process variable length arguments to the plot command, so that</span>
<span class="sd">    plot commands like the following are supported::</span>

<span class="sd">      plot(t, s)</span>
<span class="sd">      plot(t1, s1, t2, s2)</span>
<span class="sd">      plot(t1, s1, &#39;ko&#39;, t2, s2)</span>
<span class="sd">      plot(t1, s1, &#39;ko&#39;, t2, s2, &#39;r--&#39;, t3, e3)</span>

<span class="sd">    an arbitrary number of *x*, *y*, *fmt* are allowed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">command</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># note: it is not possible to pickle a itertools.cycle instance</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;axes&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="s1">&#39;command&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">args</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.prop_cycle&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">prop_cycler</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="s1">&#39;axes.color_cycle&#39;</span> <span class="ow">in</span> <span class="n">rcParams</span><span class="p">:</span>
                <span class="n">clist</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.color_cycle&#39;</span><span class="p">]</span>
                <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">clist</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">prop_cycler</span><span class="p">)</span>
        <span class="c1"># This should make a copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span> <span class="o">=</span> <span class="n">prop_cycler</span><span class="o">.</span><span class="n">keys</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;xunits&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;polar&#39;</span><span class="p">:</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;thetaunits&#39;</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>

            <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;yunits&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;polar&#39;</span><span class="p">:</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;runits&#39;</span><span class="p">,</span> <span class="n">yunits</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">xunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">xunits</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">yunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">yunits</span><span class="p">)</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grab_next_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">set_lineprops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="s1">&#39;set_lineprops only works with &quot;plot&quot;&#39;</span>
        <span class="n">line</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_patchprops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fill_poly</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="s1">&#39;set_patchprops only works with &quot;fill&quot;&#39;</span>
        <span class="n">fill_poly</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xy_from_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">bx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">!=</span> <span class="s1">&#39;plot&#39;</span><span class="p">:</span>
                <span class="c1"># the Line2D class can handle unitized data, with</span>
                <span class="c1"># support for post hoc unit changes etc.  Other mpl</span>
                <span class="c1"># artists, e.g., Polygon which _process_plot_var_args</span>
                <span class="c1"># also serves on calls to fill, cannot.  So this is a</span>
                <span class="c1"># hack to say: if you are not &quot;plot&quot;, which is</span>
                <span class="c1"># creating Line2D, then convert the data now to</span>
                <span class="c1"># floats.  If you are plot, pass the raw data through</span>
                <span class="c1"># to Line2D which will handle the conversion.  So</span>
                <span class="c1"># polygons will not support post hoc conversions of</span>
                <span class="c1"># the unit type since they are not storing the orig</span>
                <span class="c1"># data.  Hopefully we can rationalize this at a later</span>
                <span class="c1"># date - JDH</span>
                <span class="k">if</span> <span class="n">bx</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="c1"># like asanyarray, but converts scalar to array, and doesn&#39;t change</span>
        <span class="c1"># existing compatible sequences</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;x and y must have same first dimension&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;x and y can be no greater than 2-D&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">_getdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only advance the cycler if the cycler has information that</span>
<span class="sd">        is not specified in any of the supplied tuple of dicts.</span>
<span class="sd">        Ignore any keys specified in the `ignore` set.</span>

<span class="sd">        Returns a copy of defaults dictionary if there are any</span>
<span class="sd">        keys that are not found in any of the supplied dictionaries.</span>
<span class="sd">        If the supplied dictionaries have non-None values for</span>
<span class="sd">        everything the property cycler has, then just return</span>
<span class="sd">        an empty dictionary. Ignored keys are excluded from the</span>
<span class="sd">        returned dictionary.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span>
        <span class="k">if</span> <span class="n">ignore</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ignore</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([])</span>
        <span class="n">prop_keys</span> <span class="o">=</span> <span class="n">prop_keys</span> <span class="o">-</span> <span class="n">ignore</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
               <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">prop_keys</span><span class="p">):</span>
            <span class="c1"># Need to copy this dictionary or else the next time around</span>
            <span class="c1"># in the cycle, the dictionary could be missing entries.</span>
            <span class="n">default_dict</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="n">default_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">default_dict</span>

    <span class="k">def</span> <span class="nf">_setdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">defaults</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a defaults dictionary, and any other dictionaries,</span>
<span class="sd">        update those other dictionaries with information in defaults if</span>
<span class="sd">        none of the other dictionaries contains that information.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">defaults</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_makeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kw</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Don&#39;t modify the original kw.</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">default_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">seg</span> <span class="o">=</span> <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_lineprops</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span>

    <span class="k">def</span> <span class="nf">_makefill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kw</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Don&#39;t modify the original kw.</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Ignore &#39;marker&#39;-related properties as they aren&#39;t Polygon</span>
        <span class="c1"># properties, but they are Line2D properties, and so they are</span>
        <span class="c1"># likely to appear in the default cycler construction.</span>
        <span class="c1"># This is done here to the defaults dictionary as opposed to the</span>
        <span class="c1"># other two dictionaries because we do want to capture when a</span>
        <span class="c1"># *user* explicitly specifies a marker which should be an error.</span>
        <span class="c1"># We also want to prevent advancing the cycler if there are no</span>
        <span class="c1"># defaults needed after ignoring the given properties.</span>
        <span class="n">ignores</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;markersize&#39;</span><span class="p">,</span> <span class="s1">&#39;markeredgecolor&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;markerfacecolor&#39;</span><span class="p">,</span> <span class="s1">&#39;markeredgewidth&#39;</span><span class="p">])</span>
        <span class="c1"># Also ignore anything provided by *kwargs*.</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">ignores</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="c1"># Only using the first dictionary to use as basis</span>
        <span class="c1"># for getting defaults for back-compat reasons.</span>
        <span class="c1"># Doing it with both seems to mess things up in</span>
        <span class="c1"># various places (probably due to logic bugs elsewhere).</span>
        <span class="n">default_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="n">ignores</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>

        <span class="c1"># Looks like we don&#39;t want &quot;color&quot; to be interpreted to</span>
        <span class="c1"># mean both facecolor and edgecolor for some reason.</span>
        <span class="c1"># So the &quot;kw&quot; dictionary is thrown out, and only its</span>
        <span class="c1"># &#39;color&#39; value is kept and translated as a &#39;facecolor&#39;.</span>
        <span class="c1"># This design should probably be revisited as it increases</span>
        <span class="c1"># complexity.</span>
        <span class="n">facecolor</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="c1"># Throw out &#39;color&#39; as it is now handled as a facecolor</span>
        <span class="n">default_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="c1"># To get other properties set from the cycler</span>
        <span class="c1"># modify the kwargs dictionary.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

        <span class="n">seg</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">x</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span>
                                          <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">])),</span>
                               <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>
                               <span class="n">fill</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                               <span class="n">closed</span><span class="o">=</span><span class="n">kw</span><span class="p">[</span><span class="s1">&#39;closed&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_patchprops</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span>

    <span class="k">def</span> <span class="nf">_plot_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tup</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">is_string_like</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">_process_plot_format</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">tup</span> <span class="o">=</span> <span class="n">tup</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;third arg must be a format string&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

        <span class="c1"># Don&#39;t allow any None value; These will be up-converted</span>
        <span class="c1"># to one element array of None which causes problems</span>
        <span class="c1"># downstream.</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">v</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tup</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;x and y must not be None&quot;</span><span class="p">)</span>

        <span class="n">kw</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">((</span><span class="s1">&#39;linestyle&#39;</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="k">if</span> <span class="s1">&#39;label&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_label</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">index_of</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy_from_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;plot&#39;</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeline</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;closed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;closed&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefill</span>

        <span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span><span class="p">)):</span>
            <span class="n">seg</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncx</span><span class="p">],</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncy</span><span class="p">],</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_grab_next_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">remaining</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_args</span><span class="p">(</span><span class="n">remaining</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">seg</span>
                <span class="k">return</span>

            <span class="k">if</span> <span class="n">is_string_like</span><span class="p">(</span><span class="n">remaining</span><span class="p">[</span><span class="mi">2</span><span class="p">]):</span>
                <span class="n">isplit</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">isplit</span> <span class="o">=</span> <span class="mi">2</span>

            <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_args</span><span class="p">(</span><span class="n">remaining</span><span class="p">[:</span><span class="n">isplit</span><span class="p">],</span> <span class="n">kwargs</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">seg</span>
            <span class="n">remaining</span> <span class="o">=</span> <span class="n">remaining</span><span class="p">[</span><span class="n">isplit</span><span class="p">:]</span>


<span class="k">class</span> <span class="nc">_AxesBase</span><span class="p">(</span><span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rectilinear&quot;</span>

    <span class="n">_shared_x_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>
    <span class="n">_shared_y_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Axes(</span><span class="si">%g</span><span class="s2">,</span><span class="si">%g</span><span class="s2">;</span><span class="si">%g</span><span class="s2">x</span><span class="si">%g</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span>
                 <span class="n">axisbg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>  <span class="c1"># defaults to rc axes.facecolor</span>
                 <span class="n">frameon</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="n">sharex</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>  <span class="c1"># use Axes instance&#39;s xaxis info</span>
                 <span class="n">sharey</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>  <span class="c1"># use Axes instance&#39;s yaxis info</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">xscale</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">yscale</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span>
                 <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build an :class:`Axes` instance in</span>
<span class="sd">        :class:`~matplotlib.figure.Figure` *fig* with</span>
<span class="sd">        *rect=[left, bottom, width, height]* in</span>
<span class="sd">        :class:`~matplotlib.figure.Figure` coordinates</span>

<span class="sd">        Optional keyword arguments:</span>

<span class="sd">          ================   =========================================</span>
<span class="sd">          Keyword            Description</span>
<span class="sd">          ================   =========================================</span>
<span class="sd">          *adjustable*       [ &#39;box&#39; | &#39;datalim&#39; | &#39;box-forced&#39;]</span>
<span class="sd">          *alpha*            float: the alpha transparency (can be None)</span>
<span class="sd">          *anchor*           [ &#39;C&#39;, &#39;SW&#39;, &#39;S&#39;, &#39;SE&#39;, &#39;E&#39;, &#39;NE&#39;, &#39;N&#39;,</span>
<span class="sd">                               &#39;NW&#39;, &#39;W&#39; ]</span>
<span class="sd">          *aspect*           [ &#39;auto&#39; | &#39;equal&#39; | aspect_ratio ]</span>
<span class="sd">          *autoscale_on*     [ *True* | *False* ] whether or not to</span>
<span class="sd">                             autoscale the *viewlim*</span>
<span class="sd">          *axis_bgcolor*     any matplotlib color, see</span>
<span class="sd">                             :func:`~matplotlib.pyplot.colors`</span>
<span class="sd">          *axisbelow*        draw the grids and ticks below the other</span>
<span class="sd">                             artists</span>
<span class="sd">          *cursor_props*     a (*float*, *color*) tuple</span>
<span class="sd">          *figure*           a :class:`~matplotlib.figure.Figure`</span>
<span class="sd">                             instance</span>
<span class="sd">          *frame_on*         a boolean - draw the axes frame</span>
<span class="sd">          *label*            the axes label</span>
<span class="sd">          *navigate*         [ *True* | *False* ]</span>
<span class="sd">          *navigate_mode*    [ &#39;PAN&#39; | &#39;ZOOM&#39; | None ] the navigation</span>
<span class="sd">                             toolbar button status</span>
<span class="sd">          *position*         [left, bottom, width, height] in</span>
<span class="sd">                             class:`~matplotlib.figure.Figure` coords</span>
<span class="sd">          *sharex*           an class:`~matplotlib.axes.Axes` instance</span>
<span class="sd">                             to share the x-axis with</span>
<span class="sd">          *sharey*           an class:`~matplotlib.axes.Axes` instance</span>
<span class="sd">                             to share the y-axis with</span>
<span class="sd">          *title*            the title string</span>
<span class="sd">          *visible*          [ *True* | *False* ] whether the axes is</span>
<span class="sd">                             visible</span>
<span class="sd">          *xlabel*           the xlabel</span>
<span class="sd">          *xlim*             (*xmin*, *xmax*) view limits</span>
<span class="sd">          *xscale*           [%(scale)s]</span>
<span class="sd">          *xticklabels*      sequence of strings</span>
<span class="sd">          *xticks*           sequence of floats</span>
<span class="sd">          *ylabel*           the ylabel strings</span>
<span class="sd">          *ylim*             (*ymin*, *ymax*) view limits</span>
<span class="sd">          *yscale*           [%(scale)s]</span>
<span class="sd">          *yticklabels*      sequence of strings</span>
<span class="sd">          *yticks*           sequence of floats</span>
<span class="sd">          ================   =========================================</span>
<span class="sd">        &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">mscale</span><span class="o">.</span><span class="n">get_scale_names</span><span class="p">()])}</span>
        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">rect</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">rect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="c1"># self.set_axes(self)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;box&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_anchor</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="o">=</span> <span class="n">sharex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="o">=</span> <span class="n">sharey</span>
        <span class="k">if</span> <span class="n">sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sharex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sharex</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">==</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span>
                <span class="n">sharex</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;datalim&#39;</span>
                <span class="c1">#warnings.warn(</span>
                <span class="c1">#    &#39;shared axes: &quot;adjustable&quot; is being changed to &quot;datalim&quot;&#39;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;datalim&#39;</span>
        <span class="k">if</span> <span class="n">sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sharey</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sharey</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">==</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span>
                <span class="n">sharey</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;datalim&#39;</span>
                <span class="c1">#warnings.warn(</span>
                <span class="c1">#    &#39;shared axes: &quot;adjustable&quot; is being changed to &quot;datalim&quot;&#39;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;datalim&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_axes_locator</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;axes_locator&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_spines</span><span class="p">()</span>

        <span class="c1"># this call may differ for non-sep axes, e.g., polar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_axis</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">axisbg</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">axisbg</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.facecolor&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbg</span> <span class="o">=</span> <span class="n">axisbg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">frameon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.axisbelow&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.hold&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># a dict from events to (id, func)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="c1"># funcs used to format x and y - fall back on major formatters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor_props</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">))</span>  <span class="c1"># set the cursor properties for axes</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate_mode</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="n">xscale</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">yscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="n">yscale</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;units finalize&#39;</span><span class="p">,</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">relim</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ycid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;units finalize&#39;</span><span class="p">,</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">relim</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="o">=</span> <span class="n">state</span>
        <span class="c1"># put the _remove_method back on all artists contained within the axes</span>
        <span class="k">for</span> <span class="n">container_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;lines&#39;</span><span class="p">,</span> <span class="s1">&#39;collections&#39;</span><span class="p">,</span> <span class="s1">&#39;tables&#39;</span><span class="p">,</span> <span class="s1">&#39;patches&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;texts&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">]:</span>
            <span class="n">container</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">container</span><span class="p">:</span>
                <span class="n">artist</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the axes bounding box in display space; *args* and</span>
<span class="sd">        *kwargs* are empty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span>

    <span class="k">def</span> <span class="nf">_init_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;move this out of __init__ because non-separable axes don&#39;t use it&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">XAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">YAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the class:`~matplotlib.axes.Axes` figure</span>

<span class="sd">        accepts a class:`~matplotlib.figure.Figure` instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="p">,</span>
                                                <span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="p">)</span>
        <span class="c1"># these will be updated later as data is added</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_lim_and_transforms</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_lim_and_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the *dataLim* and *viewLim*</span>
<span class="sd">        :class:`~matplotlib.transforms.Bbox` attributes and the</span>
<span class="sd">        *transScale*, *transData*, *transLimits* and *transAxes*</span>
<span class="sd">        transformations.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This method is primarily used by rectilinear projections</span>
<span class="sd">            of the :class:`~matplotlib.axes.Axes` class, and is meant</span>
<span class="sd">            to be overridden by new kinds of projection axes that need</span>
<span class="sd">            different transformations and limits. (See</span>
<span class="sd">            :class:`~matplotlib.projections.polar.PolarAxes` for an</span>
<span class="sd">            example.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="c1"># Transforms the x and y axis separately by a scale factor.</span>
        <span class="c1"># It is assumed that this part will have non-linear components</span>
        <span class="c1"># (e.g., for a log scale).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="c1"># An affine transformation on the data, generally to limit the</span>
        <span class="c1"># range of the axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformFrom</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="p">))</span>

        <span class="c1"># The parentheses are important for efficiency here -- they</span>
        <span class="c1"># group the last two (which are usually affines) separately</span>
        <span class="c1"># from the first (which, with log-scaling can be non-affine).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing x-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in data coordinates and the</span>
<span class="sd">        y-direction is in axis coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick1&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick2&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown value for which&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing x-axis labels, which</span>
<span class="sd">        will add the given amount of padding (in points) between the</span>
<span class="sd">        axes and the label.  The x-direction is in data coordinates</span>
<span class="sd">        and the y-direction is in axis coordinates.  Returns a</span>
<span class="sd">        3-tuple of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick1&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing the secondary x-axis</span>
<span class="sd">        labels, which will add the given amount of padding (in points)</span>
<span class="sd">        between the axes and the label.  The x-direction is in data</span>
<span class="sd">        coordinates and the y-direction is in axis coordinates.</span>
<span class="sd">        Returns a 3-tuple of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick2&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing y-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in axis coordinates and the</span>
<span class="sd">        y-direction is in data coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick1&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick2&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unknown value for which&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing y-axis labels, which</span>
<span class="sd">        will add the given amount of padding (in points) between the</span>
<span class="sd">        axes and the label.  The x-direction is in axis coordinates</span>
<span class="sd">        and the y-direction is in data coordinates.  Returns a 3-tuple</span>
<span class="sd">        of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick1&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing the secondary y-axis</span>
<span class="sd">        labels, which will add the given amount of padding (in points)</span>
<span class="sd">        between the axes and the label.  The x-direction is in axis</span>
<span class="sd">        coordinates and the y-direction is in data coordinates.</span>
<span class="sd">        Returns a 3-tuple of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick2&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_transScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()))</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lines&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">_transformed_path</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="s1">&#39;Return the a copy of the axes rectangle as a Bbox&#39;</span>
        <span class="k">if</span> <span class="n">original</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the axes position with::</span>

<span class="sd">          pos = [left, bottom, width, height]</span>

<span class="sd">        in relative 0,1 coords, or *pos* can be a</span>
<span class="sd">        :class:`~matplotlib.transforms.Bbox`</span>

<span class="sd">        There are two position variables: one which is ultimately</span>
<span class="sd">        used, but which may be modified by :meth:`apply_aspect`, and a</span>
<span class="sd">        second which is the starting point for :meth:`apply_aspect`.</span>


<span class="sd">        Optional keyword arguments:</span>
<span class="sd">          *which*</span>

<span class="sd">            ==========   ====================</span>
<span class="sd">            value        description</span>
<span class="sd">            ==========   ====================</span>
<span class="sd">            &#39;active&#39;     to change the first</span>
<span class="sd">            &#39;original&#39;   to change the second</span>
<span class="sd">            &#39;both&#39;       to change both</span>
<span class="sd">            ==========   ====================</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;original&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">reset_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make the original position the active position&quot;&quot;&quot;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set axes_locator</span>

<span class="sd">        ACCEPT: a callable object which takes an axes instance and renderer and</span>
<span class="sd">                 returns a bbox.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span> <span class="o">=</span> <span class="n">locator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return axes_locator</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span>

    <span class="k">def</span> <span class="nf">_set_artist_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set the boilerplate props for artists added to axes&quot;&quot;&quot;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">is_transform_set</span><span class="p">():</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">mouseover</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseover_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the patch used to draw the background of the axes.  It</span>
<span class="sd">        is also used as the clipping path for any data elements on the</span>
<span class="sd">        axes.</span>

<span class="sd">        In the standard axes, this is a rectangle, but in other</span>
<span class="sd">        projections it may not be.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_spines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;inches&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dict whose keys are spine names and values are</span>
<span class="sd">        Line2D or Patch instances. Each element is used to draw a</span>
<span class="sd">        spine of the axes.</span>

<span class="sd">        In the standard axes, this is a single line segment, but in</span>
<span class="sd">        other projections it may not be.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">),</span>
            <span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">),</span>
            <span class="s1">&#39;bottom&#39;</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">),</span>
            <span class="s1">&#39;top&#39;</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">),</span> <span class="p">}</span>

    <span class="k">def</span> <span class="nf">cla</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the current axes.&quot;&quot;&quot;</span>
        <span class="c1"># Note: this is called by Axes.__init__()</span>

        <span class="c1"># stash the current visibility state</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">):</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="n">xaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="n">yaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">):</span>
            <span class="n">spine</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">CallbackRegistry</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># major and minor are class instances with</span>
            <span class="c1"># locator and formatter attributes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

            <span class="c1"># Save the current formatter/locator so we don&#39;t lose it</span>
            <span class="n">majf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span>
            <span class="n">minf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_minor_formatter</span><span class="p">()</span>
            <span class="n">majl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
            <span class="n">minl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_minor_locator</span><span class="p">()</span>

            <span class="c1"># This overwrites the current formatter/locator</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">())</span>

            <span class="c1"># Reset the formatter/locator</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">majf</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_formatter</span><span class="p">(</span><span class="n">minf</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">majl</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">minl</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span>
            <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

            <span class="c1"># Save the current formatter/locator so we don&#39;t lose it</span>
            <span class="n">majf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span>
            <span class="n">minf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minor_formatter</span><span class="p">()</span>
            <span class="n">majl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
            <span class="n">minl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minor_locator</span><span class="p">()</span>

            <span class="c1"># This overwrites the current formatter/locator</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">())</span>

            <span class="c1"># Reset the formatter/locator</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">majf</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_formatter</span><span class="p">(</span><span class="n">minf</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">majl</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">minl</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>

        <span class="c1"># update the minor locator for x and y axis based on rcParams</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.visible&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.visible&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.xmargin&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.ymargin&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>  <span class="c1"># needed?</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseover_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c1"># strictly for pyplot via _sci, _gci</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collections</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># collection.Collection instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>  <span class="c1"># Disable grid on init to use rcParameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid.which&#39;</span><span class="p">],</span>
                    <span class="n">axis</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid.axis&#39;</span><span class="p">])</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span>
                    <span class="n">size</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titlesize&#39;</span><span class="p">],</span>
                    <span class="n">weight</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titleweight&#39;</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span>
            <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">_title</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">):</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span><span class="p">)</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_clip_box</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">_title</span><span class="p">)</span>

        <span class="c1"># the patch draws the background of the axes.  we want this to</span>
        <span class="c1"># be below the other artists; the axesPatch name is</span>
        <span class="c1"># deprecated.  We use the frame to draw the edges so we are</span>
        <span class="c1"># setting the edgecolor to None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axesPatch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_patch</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axisbg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">xaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">yaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;clear the axes&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the property cycle for any future plot commands on this Axes.</span>

<span class="sd">        set_prop_cycle(arg)</span>
<span class="sd">        set_prop_cycle(label, itr)</span>
<span class="sd">        set_prop_cycle(label1=itr1[, label2=itr2[, ...]])</span>

<span class="sd">        Form 1 simply sets given `Cycler` object.</span>

<span class="sd">        Form 2 creates and sets  a `Cycler` from a label and an iterable.</span>

<span class="sd">        Form 3 composes and sets  a `Cycler` as an inner product of the</span>
<span class="sd">        pairs of keyword arguments. In other words, all of the</span>
<span class="sd">        iterables are cycled simultaneously, as if through zip().</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        arg : Cycler</span>
<span class="sd">            Set the given Cycler.</span>
<span class="sd">            Can also be `None` to reset to the cycle defined by the</span>
<span class="sd">            current style.</span>

<span class="sd">        label : str</span>
<span class="sd">            The property key. Must be a valid `Artist` property.</span>
<span class="sd">            For example, &#39;color&#39; or &#39;linestyle&#39;. Aliases are allowed,</span>
<span class="sd">            such as &#39;c&#39; for &#39;color&#39; and &#39;lw&#39; for &#39;linewidth&#39;.</span>

<span class="sd">        itr : iterable</span>
<span class="sd">            Finite-length iterable of the property values. These values</span>
<span class="sd">            are validated and will raise a ValueError if invalid.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">            :func:`cycler`      Convenience function for creating your</span>
<span class="sd">                                own cyclers.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot supply both positional and keyword &quot;</span>
                            <span class="s2">&quot;arguments to this method.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_color_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the color cycle for any future plot commands on this Axes.</span>

<span class="sd">        *clist* is a list of mpl color specifiers.</span>

<span class="sd">        .. deprecated:: 1.5</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cbook</span><span class="o">.</span><span class="n">warn_deprecated</span><span class="p">(</span>
                <span class="s1">&#39;1.5&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;set_color_cycle&#39;</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;set_prop_cycle&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clist</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># Calling set_color_cycle() or set_prop_cycle() with None</span>
            <span class="c1"># effectively resets the cycle, but you can&#39;t do</span>
            <span class="c1"># set_prop_cycle(&#39;color&#39;, None). So we are special-casing this.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">clist</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ishold</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return the HOLD status of the axes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span>

    <span class="k">def</span> <span class="nf">hold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          hold(b=None)</span>

<span class="sd">        Set the hold state.  If *hold* is *None* (default), toggle the</span>
<span class="sd">        *hold* state.  Else set the *hold* state to boolean value *b*.</span>

<span class="sd">        Examples::</span>

<span class="sd">          # toggle hold</span>
<span class="sd">          hold()</span>

<span class="sd">          # turn hold on</span>
<span class="sd">          hold(True)</span>

<span class="sd">          # turn hold off</span>
<span class="sd">          hold(False)</span>

<span class="sd">        When hold is *True*, subsequent plot commands will be added to</span>
<span class="sd">        the current axes.  When hold is *False*, the current axes and</span>
<span class="sd">        figure will be cleared on the next plot command</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span>

    <span class="k">def</span> <span class="nf">set_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *aspect*</span>

<span class="sd">          ========   ================================================</span>
<span class="sd">          value      description</span>
<span class="sd">          ========   ================================================</span>
<span class="sd">          &#39;auto&#39;     automatic; fill position rectangle with data</span>
<span class="sd">          &#39;normal&#39;   same as &#39;auto&#39;; deprecated</span>
<span class="sd">          &#39;equal&#39;    same scaling from data to plot units for x and y</span>
<span class="sd">           num       a circle will be stretched such that the height</span>
<span class="sd">                     is num times the width. aspect=1 is the same as</span>
<span class="sd">                     aspect=&#39;equal&#39;.</span>
<span class="sd">          ========   ================================================</span>

<span class="sd">        *adjustable*</span>

<span class="sd">          ============   =====================================</span>
<span class="sd">          value          description</span>
<span class="sd">          ============   =====================================</span>
<span class="sd">          &#39;box&#39;          change physical size of axes</span>
<span class="sd">          &#39;datalim&#39;      change xlim or ylim</span>
<span class="sd">          &#39;box-forced&#39;   same as &#39;box&#39;, but axes can be shared</span>
<span class="sd">          ============   =====================================</span>

<span class="sd">        &#39;box&#39; does not allow axes sharing, as this can cause</span>
<span class="sd">        unintended side effect. For cases when sharing axes is</span>
<span class="sd">        fine, use &#39;box-forced&#39;.</span>

<span class="sd">        *anchor*</span>

<span class="sd">          =====   =====================</span>
<span class="sd">          value   description</span>
<span class="sd">          =====   =====================</span>
<span class="sd">          &#39;C&#39;     centered</span>
<span class="sd">          &#39;SW&#39;    lower left corner</span>
<span class="sd">          &#39;S&#39;     middle of bottom edge</span>
<span class="sd">          &#39;SE&#39;    lower right corner</span>
<span class="sd">          etc.</span>
<span class="sd">          =====   =====================</span>

<span class="sd">        .. deprecated:: 1.2</span>
<span class="sd">            the option &#39;normal&#39; for aspect is deprecated. Use &#39;auto&#39; instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s1">&#39;normal&#39;</span><span class="p">:</span>
            <span class="n">cbook</span><span class="o">.</span><span class="n">warn_deprecated</span><span class="p">(</span>
                <span class="s1">&#39;1.2&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">obj_type</span><span class="o">=</span><span class="s1">&#39;aspect&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>

        <span class="k">elif</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="n">aspect</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>  <span class="c1"># raise ValueError if necessary</span>

        <span class="k">if</span> <span class="n">adjustable</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="n">adjustable</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_anchor</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span>

    <span class="k">def</span> <span class="nf">set_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adjustable</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ACCEPTS: [ &#39;box&#39; | &#39;datalim&#39; | &#39;box-forced&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">adjustable</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="s1">&#39;datalim&#39;</span><span class="p">,</span> <span class="s1">&#39;box-forced&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span> <span class="ow">or</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">adjustable</span> <span class="o">==</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;adjustable must be &quot;datalim&quot; for shared axes&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="n">adjustable</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;argument must be &quot;box&quot;, or &quot;datalim&quot;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span>

    <span class="k">def</span> <span class="nf">set_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *anchor*</span>

<span class="sd">          =====  ============</span>
<span class="sd">          value  description</span>
<span class="sd">          =====  ============</span>
<span class="sd">          &#39;C&#39;    Center</span>
<span class="sd">          &#39;SW&#39;   bottom left</span>
<span class="sd">          &#39;S&#39;    bottom</span>
<span class="sd">          &#39;SE&#39;   bottom right</span>
<span class="sd">          &#39;E&#39;    right</span>
<span class="sd">          &#39;NE&#39;   top right</span>
<span class="sd">          &#39;N&#39;    top</span>
<span class="sd">          &#39;NW&#39;   top left</span>
<span class="sd">          &#39;W&#39;    left</span>
<span class="sd">          =====  ============</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">anchor</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span><span class="p">))</span> <span class="ow">or</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span> <span class="o">=</span> <span class="n">anchor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;argument must be among </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                             <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_data_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the aspect ratio of the raw data.</span>

<span class="sd">        This method is intended to be overridden by new projection</span>
<span class="sd">        types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">xsize</span>

    <span class="k">def</span> <span class="nf">get_data_ratio_log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the aspect ratio of the raw data in log scale.</span>
<span class="sd">        Will be used when both axis scales are in log.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmin</span><span class="p">)),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymin</span><span class="p">)),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">xsize</span>

    <span class="k">def</span> <span class="nf">apply_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use :meth:`_aspect` and :meth:`_adjustable` to modify the</span>
<span class="sd">        axes box or the view limits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">aspect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s1">&#39;polar&#39;</span><span class="p">:</span>
            <span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">xscale</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
                <span class="n">aspect_scale_mode</span> <span class="o">=</span> <span class="s2">&quot;linear&quot;</span>
            <span class="k">elif</span> <span class="n">xscale</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">:</span>
                <span class="n">aspect_scale_mode</span> <span class="o">=</span> <span class="s2">&quot;log&quot;</span>
            <span class="k">elif</span> <span class="p">((</span><span class="n">xscale</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">)</span> <span class="ow">or</span>
                  <span class="p">(</span><span class="n">xscale</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">aspect</span> <span class="o">!=</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="s1">&#39;aspect is not supported for Axes with xscale=</span><span class="si">%s</span><span class="s1">, &#39;</span>
                        <span class="s1">&#39;yscale=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span><span class="p">))</span>
                    <span class="n">aspect</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># some custom projections have their own scales.</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">aspect_scale_mode</span> <span class="o">=</span> <span class="s2">&quot;linear&quot;</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s1">&#39;equal&#39;</span><span class="p">:</span>
            <span class="n">A</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">A</span> <span class="o">=</span> <span class="n">aspect</span>

        <span class="c1"># Ensure at drawing time that any Axes involved in axis-sharing</span>
        <span class="c1"># does not have its position changed.</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span> <span class="ow">or</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">==</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;datalim&#39;</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s1">&#39;shared axes: &quot;adjustable&quot; is being changed to &quot;datalim&quot;&#39;</span><span class="p">)</span>

        <span class="n">figW</span><span class="p">,</span> <span class="n">figH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">get_size_inches</span><span class="p">()</span>
        <span class="n">fig_aspect</span> <span class="o">=</span> <span class="n">figH</span> <span class="o">/</span> <span class="n">figW</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="s1">&#39;box-forced&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">:</span>
                <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_ratio_log</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_ratio</span><span class="p">()</span>
            <span class="n">pb</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
            <span class="n">pb1</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">shrunk_to_aspect</span><span class="p">(</span><span class="n">box_aspect</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">fig_aspect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">),</span> <span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># reset active to original in case it had been changed</span>
        <span class="c1"># by prior use of &#39;box&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>

        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmin</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymin</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>

        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">fig_aspect</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="n">w</span><span class="p">)</span>
        <span class="n">data_ratio</span> <span class="o">=</span> <span class="n">box_aspect</span> <span class="o">/</span> <span class="n">A</span>

        <span class="n">y_expander</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span> <span class="o">/</span> <span class="n">ysize</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="c1"># If y_expander &gt; 0, the dy/dx viewLim ratio needs to increase</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y_expander</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.005</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">:</span>
            <span class="n">dL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span>
            <span class="n">dL_width</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">x0</span><span class="p">)</span>
            <span class="n">dL_height</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">y0</span><span class="p">)</span>
            <span class="n">xr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL_width</span>
            <span class="n">yr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL_height</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span>
            <span class="n">xr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL</span><span class="o">.</span><span class="n">width</span>
            <span class="n">yr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL</span><span class="o">.</span><span class="n">height</span>

        <span class="n">xmarg</span> <span class="o">=</span> <span class="n">xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">ymarg</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="n">Ysize</span> <span class="o">=</span> <span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span>
        <span class="n">Xsize</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">data_ratio</span>
        <span class="n">Xmarg</span> <span class="o">=</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">Ymarg</span> <span class="o">=</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="c1"># Setting these targets to, e.g., 0.05*xr does not seem to</span>
        <span class="c1"># help.</span>
        <span class="n">xm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ym</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">changex</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span> <span class="ow">and</span>
                   <span class="bp">self</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="p">)</span>
        <span class="n">changey</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span> <span class="ow">and</span>
                   <span class="bp">self</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">changex</span> <span class="ow">and</span> <span class="n">changey</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;adjustable=&#39;datalim&#39; cannot work with shared &quot;</span>
                          <span class="s2">&quot;x and y axes&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">changex</span><span class="p">:</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">xmarg</span> <span class="o">&gt;</span> <span class="n">xm</span> <span class="ow">and</span> <span class="n">ymarg</span> <span class="o">&gt;</span> <span class="n">ym</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="p">((</span><span class="n">Ymarg</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">Xmarg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="n">changey</span> <span class="ow">or</span> <span class="n">adjy</span>  <span class="c1"># (Ymarg &gt; xmarg)</span>
        <span class="k">if</span> <span class="n">adjust_y</span><span class="p">:</span>
            <span class="n">yc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span><span class="p">)</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">-</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">((</span><span class="mf">10.</span> <span class="o">**</span> <span class="n">y0</span><span class="p">,</span> <span class="mf">10.</span> <span class="o">**</span> <span class="n">y1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">((</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span><span class="p">)</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">-</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">((</span><span class="mf">10.</span> <span class="o">**</span> <span class="n">x0</span><span class="p">,</span> <span class="mf">10.</span> <span class="o">**</span> <span class="n">x1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set axis properties.</span>

<span class="sd">        Valid signatures::</span>

<span class="sd">          xmin, xmax, ymin, ymax = axis()</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(list_arg)</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(string_arg)</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(**kwargs)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : list of float or {&#39;on&#39;, &#39;off&#39;, &#39;equal&#39;, &#39;tight&#39;, &#39;scaled&#39;,\</span>
<span class="sd">            &#39;normal&#39;, &#39;auto&#39;, &#39;image&#39;, &#39;square&#39;}</span>
<span class="sd">            Optional positional argument</span>

<span class="sd">            Axis data limits set from a list; or a command relating to axes:</span>

<span class="sd">                ========== ================================================</span>
<span class="sd">                Value      Description</span>
<span class="sd">                ========== ================================================</span>
<span class="sd">                &#39;on&#39;       Toggle axis lines and labels on</span>
<span class="sd">                &#39;off&#39;      Toggle axis lines and labels off</span>
<span class="sd">                &#39;equal&#39;    Equal scaling by changing limits</span>
<span class="sd">                &#39;scaled&#39;   Equal scaling by changing box dimensions</span>
<span class="sd">                &#39;tight&#39;    Limits set such that all data is shown</span>
<span class="sd">                &#39;auto&#39;     Automatic scaling, fill rectangle with data</span>
<span class="sd">                &#39;normal&#39;   Same as &#39;auto&#39;; deprecated</span>
<span class="sd">                &#39;image&#39;    &#39;scaled&#39; with axis limits equal to data limits</span>
<span class="sd">                &#39;square&#39;   Square plot; similar to &#39;scaled&#39;, but initially\</span>
<span class="sd">                           forcing xmax-xmin = ymax-ymin</span>
<span class="sd">                ========== ================================================</span>

<span class="sd">        emit : bool, optional</span>
<span class="sd">            Passed to set_{x,y}lim functions, if observers</span>
<span class="sd">            are notified of axis limit change</span>

<span class="sd">        xmin, ymin, xmax, ymax : float, optional</span>
<span class="sd">            The axis limits to be set</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xmin, xmax, ymin, ymax : float</span>
<span class="sd">            The axis limits</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="n">emit</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;emit&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">is_string_like</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;on&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;off&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="s1">&#39;scaled&#39;</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;square&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="c1"># self.apply_aspect()</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;equal&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;datalim&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;scaled&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>  <span class="c1"># Req. by Mark Bakker</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;tight&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;image&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;square&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
                    <span class="n">xlim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
                    <span class="n">ylim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
                    <span class="n">edge_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xlim</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ylim</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Unrecognized string </span><span class="si">%s</span><span class="s1"> to axis; &#39;</span>
                                 <span class="s1">&#39;try on or off&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">xmin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xmin&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xmax&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># turn off autoscaling, unless...</span>
            <span class="k">if</span> <span class="n">xmin</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">xmax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">auto</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c1"># leave autoscaling state alone</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>

            <span class="n">ymin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ymin&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ymax&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># turn off autoscaling, unless...</span>
            <span class="k">if</span> <span class="n">ymin</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">ymax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">auto</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c1"># leave autoscaling state alone</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;v must contain [xmin xmax ymin ymax]&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">v</span>

    <span class="k">def</span> <span class="nf">get_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the legend.Legend instance, or None if no legend is defined</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span>

    <span class="k">def</span> <span class="nf">get_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return a list of Axes images contained by the Axes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;AxesImage&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of lines contained by the Axes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Line2D&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the XAxis instance&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span>

    <span class="k">def</span> <span class="nf">get_xgridlines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the x grid lines as a list of Line2D instances&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Line2D xgridline&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_gridlines</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_xticklines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the xtick lines as a list of Line2D instances&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Text xtickline&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklines</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the YAxis instance&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span>

    <span class="k">def</span> <span class="nf">get_ygridlines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the y grid lines as a list of Line2D instances&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Line2D ygridline&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_gridlines</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yticklines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the ytick lines as a list of Line2D instances&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Line2D ytickline&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklines</span><span class="p">())</span>

    <span class="c1"># Adding and tracking artists</span>

    <span class="k">def</span> <span class="nf">_sci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">im</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        helper for :func:`~matplotlib.pyplot.sci`;</span>
<span class="sd">        do not use elsewhere.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">contour</span><span class="o">.</span><span class="n">ContourSet</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">im</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;ContourSet must be in current Axes&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">im</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="ow">and</span> <span class="n">im</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Argument must be an image, collection, or ContourSet in &quot;</span>
                <span class="s2">&quot;this Axes&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="n">im</span>

    <span class="k">def</span> <span class="nf">_gci</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper for :func:`~matplotlib.pyplot.gci`;</span>
<span class="sd">        do not use elsewhere.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span>

    <span class="k">def</span> <span class="nf">has_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if any artists have been added to axes.</span>

<span class="sd">        This should not be used to determine whether the *dataLim*</span>
<span class="sd">        need to be updated, and may not actually be useful for</span>
<span class="sd">        anything.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">add_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add any :class:`~matplotlib.artist.Artist` to the axes.</span>

<span class="sd">        Use `add_artist` only for artists for which there is no dedicated</span>
<span class="sd">        &quot;add&quot; method; and if necessary, use a method such as</span>
<span class="sd">        `update_datalim` or `update_datalim_numerix` to manually update the</span>
<span class="sd">        dataLim if the artist is to be included in autoscaling.</span>

<span class="sd">        Returns the artist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">a</span>

    <span class="k">def</span> <span class="nf">add_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">autolim</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a :class:`~matplotlib.collections.Collection` instance</span>
<span class="sd">        to the axes.</span>

<span class="sd">        Returns the collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_collection</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">autolim</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get_datalim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">))</span>

        <span class="n">collection</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a :class:`~matplotlib.image.AxesImage` to the axes.</span>

<span class="sd">        Returns the image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">image</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">add_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a :class:`~matplotlib.lines.Line2D` to the list of plot</span>
<span class="sd">        lines</span>

<span class="sd">        Returns the line.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_line</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">line</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">line</span>

    <span class="k">def</span> <span class="nf">_add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">txt</span>

    <span class="k">def</span> <span class="nf">_update_line_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Figures out the data limit of the given line, updating self.dataLim.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">line_trans</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">line_trans</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">elif</span> <span class="nb">any</span><span class="p">(</span><span class="n">line_trans</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)):</span>
            <span class="c1"># identify the transform to go from line&#39;s coordinates</span>
            <span class="c1"># to data coordinates</span>
            <span class="n">trans_to_data</span> <span class="o">=</span> <span class="n">line_trans</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span>

            <span class="c1"># if transData is affine we can use the cached non-affine component</span>
            <span class="c1"># of line&#39;s path. (since the non-affine part of line_trans is</span>
            <span class="c1"># entirely encapsulated in trans_to_data).</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">is_affine</span><span class="p">:</span>
                <span class="n">line_trans_path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">_get_transformed_path</span><span class="p">()</span>
                <span class="n">na_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">line_trans_path</span><span class="o">.</span><span class="n">get_transformed_path_and_affine</span><span class="p">()</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trans_to_data</span><span class="o">.</span><span class="n">transform_path_affine</span><span class="p">(</span><span class="n">na_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trans_to_data</span><span class="o">.</span><span class="n">transform_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for backwards compatibility we update the dataLim with the</span>
            <span class="c1"># coordinate range of the given path, even though the coordinate</span>
            <span class="c1"># systems are completely different. This may occur in situations</span>
            <span class="c1"># such as when ax.transAxes is passed through for absolute</span>
            <span class="c1"># positioning.</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">if</span> <span class="n">data_path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">line_trans</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_path</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                          <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span>
                                          <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a :class:`~matplotlib.patches.Patch` *p* to the list of</span>
<span class="sd">        axes patches; the clipbox will be set to the Axes clipping</span>
<span class="sd">        box.  If the transform is not set, it will be set to</span>
<span class="sd">        :attr:`transData`.</span>

<span class="sd">        Returns the patch.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_update_patch_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;update the data limits for patch *p*&quot;&quot;&quot;</span>
        <span class="c1"># hist can add zero height Rectangles, which is useful to keep</span>
        <span class="c1"># the bins, counts and patches lined up, but it throws off log</span>
        <span class="c1"># scaling.  We&#39;ll ignore rects with zero height or width in</span>
        <span class="c1"># the auto-scaling</span>

        <span class="c1"># cannot check for &#39;==0&#39; since unitized data may not compare to zero</span>
        <span class="c1"># issue #2150 - we update the limits if patch has non zero width</span>
        <span class="c1"># or height.</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">patch</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">)</span> <span class="ow">and</span>
                <span class="p">((</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_height</span><span class="p">()))):</span>
            <span class="k">return</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span><span class="o">.</span><span class="n">vertices</span>
        <span class="k">if</span> <span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xys</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_patch_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_data_transform</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
                <span class="n">patch_to_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">patch</span><span class="o">.</span><span class="n">get_data_transform</span><span class="p">()</span> <span class="o">-</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
                <span class="n">xys</span> <span class="o">=</span> <span class="n">patch_to_data</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>

            <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span>\
                <span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span>
                                <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tab</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a :class:`~matplotlib.tables.Table` instance to the</span>
<span class="sd">        list of axes tables</span>

<span class="sd">        Returns the table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tab</span>

    <span class="k">def</span> <span class="nf">add_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a :class:`~matplotlib.container.Container` instance</span>
<span class="sd">        to the axes.</span>

<span class="sd">        Returns the collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">container</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_container</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">set_remove_method</span><span class="p">(</span><span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">container</span>

    <span class="k">def</span> <span class="nf">relim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible_only</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recompute the data limits based on current artists. If you want to</span>
<span class="sd">        exclude invisible artists from the calculation, set</span>
<span class="sd">        ``visible_only=True``</span>

<span class="sd">        At present, :class:`~matplotlib.collections.Collection`</span>
<span class="sd">        instances are not supported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Collections are deliberately not supported (yet); see</span>
        <span class="c1"># the TODO note in artists.py.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">set_points</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span><span class="o">.</span><span class="n">get_points</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">line</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_datalim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the data lim bbox with seq of xy tups or equiv. 2-D array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if no data is set currently, the bbox will ignore its</span>
        <span class="c1"># limits and set the bound to be the bounds of the xydata.</span>
        <span class="c1"># Otherwise, it will compute the bounds of it&#39;s current data</span>
        <span class="c1"># and the data in xydata</span>

        <span class="k">if</span> <span class="n">iterable</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">xys</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ma</span><span class="o">.</span><span class="n">isMaskedArray</span><span class="p">(</span><span class="n">xys</span><span class="p">):</span>
            <span class="n">xys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_data_xy</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                         <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">update_datalim_numerix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the data lim bbox with seq of xy tups</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if no data is set currently, the bbox will ignore it&#39;s</span>
        <span class="c1"># limits and set the bound to be the bounds of the xydata.</span>
        <span class="c1"># Otherwise, it will compute the bounds of it&#39;s current data</span>
        <span class="c1"># and the data in xydata</span>
        <span class="k">if</span> <span class="n">iterable</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">update_datalim_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the datalim to include the given</span>
<span class="sd">        :class:`~matplotlib.transforms.Bbox` *bounds*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="p">,</span> <span class="n">bounds</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">_process_unit_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ydata</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Look for unit *kwargs* and update the axis instances as necessary&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># we only need to update if there is nothing set yet.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">have_units</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># we only need to update if there is nothing set yet.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">have_units</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>

        <span class="c1"># process kwargs 2nd since these will override default units</span>
        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;xunits&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;polar&#39;</span><span class="p">:</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;thetaunits&#39;</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">xunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">xunits</span><span class="p">)</span>
                <span class="c1"># If the units being set imply a different converter,</span>
                <span class="c1"># we need to update.</span>
                <span class="k">if</span> <span class="n">xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>

            <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;yunits&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;polar&#39;</span><span class="p">:</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;runits&#39;</span><span class="p">,</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">yunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">yunits</span><span class="p">)</span>
                <span class="c1"># If the units being set imply a different converter,</span>
                <span class="c1"># we need to update.</span>
                <span class="k">if</span> <span class="n">ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">in_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if the given *mouseevent* (in display coords)</span>
<span class="sd">        is in the Axes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether autoscaling is applied for both axes on plot commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>

    <span class="k">def</span> <span class="nf">get_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether autoscaling for the x-axis is applied on plot commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span>

    <span class="k">def</span> <span class="nf">get_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether autoscaling for the y-axis is applied on plot commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>

    <span class="k">def</span> <span class="nf">set_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether autoscaling is applied on plot commands</span>

<span class="sd">        accepts: [ *True* | *False* ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">set_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether autoscaling for the x-axis is applied on plot commands</span>

<span class="sd">        accepts: [ *True* | *False* ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">set_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether autoscaling for the y-axis is applied on plot commands</span>

<span class="sd">        accepts: [ *True* | *False* ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">set_xmargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set padding of X data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each</span>
<span class="sd">        end of that interval before it is used in autoscaling.</span>

<span class="sd">        accepts: float in range 0 to 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;margin must be in range 0 to 1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">set_ymargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set padding of Y data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each</span>
<span class="sd">        end of that interval before it is used in autoscaling.</span>

<span class="sd">        accepts: float in range 0 to 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;margin must be in range 0 to 1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set or retrieve autoscaling margins.</span>

<span class="sd">        signatures::</span>

<span class="sd">            margins()</span>

<span class="sd">        returns xmargin, ymargin</span>

<span class="sd">        ::</span>

<span class="sd">            margins(margin)</span>

<span class="sd">            margins(xmargin, ymargin)</span>

<span class="sd">            margins(x=xmargin, y=ymargin)</span>

<span class="sd">            margins(..., tight=False)</span>

<span class="sd">        All three forms above set the xmargin and ymargin parameters.</span>
<span class="sd">        All keyword parameters are optional.  A single argument</span>
<span class="sd">        specifies both xmargin and ymargin.  The *tight* parameter</span>
<span class="sd">        is passed to :meth:`autoscale_view`, which is executed after</span>
<span class="sd">        a margin is changed; the default here is *True*, on the</span>
<span class="sd">        assumption that when margins are specified, no additional</span>
<span class="sd">        padding to match tick marks is usually desired.  Setting</span>
<span class="sd">        *tight* to *None* will preserve the previous setting.</span>

<span class="sd">        Specifying any margin changes only the autoscaling; for example,</span>
<span class="sd">        if *xmargin* is not None, then *xmargin* times the X data</span>
<span class="sd">        interval will be added to each end of that interval before</span>
<span class="sd">        it is used in autoscaling.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span>

        <span class="n">tight</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">mx</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">my</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="n">my</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">mx</span><span class="p">,</span> <span class="n">my</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;more than two arguments were supplied&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xmargin</span><span class="p">(</span><span class="n">mx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">my</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ymargin</span><span class="p">(</span><span class="n">my</span><span class="p">)</span>

        <span class="n">scalex</span> <span class="o">=</span> <span class="p">(</span><span class="n">mx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">scaley</span> <span class="o">=</span> <span class="p">(</span><span class="n">my</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set zorder value below which artists will be rasterized.  Set</span>
<span class="sd">        to `None` to disable rasterizing of artists below a particular</span>
<span class="sd">        zorder.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get zorder value below which artists will be rasterized</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>

    <span class="k">def</span> <span class="nf">autoscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Autoscale the axis view to the data (toggle).</span>

<span class="sd">        Convenience method for simple axis view autoscaling.</span>
<span class="sd">        It turns autoscaling on or off, and then,</span>
<span class="sd">        if autoscaling for either axis is on, it performs</span>
<span class="sd">        the autoscaling on the specified axis or axes.</span>

<span class="sd">        *enable*: [True | False | None]</span>
<span class="sd">            True (default) turns autoscaling on, False turns it off.</span>
<span class="sd">            None leaves the autoscaling state unchanged.</span>

<span class="sd">        *axis*: [&#39;x&#39; | &#39;y&#39; | &#39;both&#39;]</span>
<span class="sd">            which axis to operate on; default is &#39;both&#39;</span>

<span class="sd">        *tight*: [True | False | None]</span>
<span class="sd">            If True, set view limits to data limits;</span>
<span class="sd">            if False, let the locator and margins expand the view limits;</span>
<span class="sd">            if None, use tight scaling if the only artist is an image,</span>
<span class="sd">            otherwise treat *tight* as False.</span>
<span class="sd">            The *tight* setting is retained for future autoscaling</span>
<span class="sd">            until it is explicitly changed.</span>


<span class="sd">        Returns None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">enable</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">scalex</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">scaley</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scalex</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">scaley</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
                <span class="n">scalex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
                <span class="n">scaley</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">autoscale_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Autoscale the view limits using the data limits. You can</span>
<span class="sd">        selectively autoscale only a single axis, e.g., the xaxis by</span>
<span class="sd">        setting *scaley* to *False*.  The autoscaling preserves any</span>
<span class="sd">        axis direction reversal that has already been done.</span>

<span class="sd">        The data limits are not updated automatically when artist data are</span>
<span class="sd">        changed after the artist has been added to an Axes instance.  In that</span>
<span class="sd">        case, use :meth:`matplotlib.axes.Axes.relim` prior to calling</span>
<span class="sd">        autoscale_view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># if image data only just use the datalim</span>
            <span class="n">_tight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span>
                                     <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
                                     <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_tight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">tight</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scalex</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span><span class="p">:</span>
            <span class="n">xshared</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">dataLim</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">xshared</span><span class="p">]</span>
            <span class="c1"># ignore non-finite data limits if good limits exist</span>
            <span class="n">finite_dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">finite_dl</span><span class="p">):</span>
                <span class="n">dl</span> <span class="o">=</span> <span class="n">finite_dl</span>

            <span class="n">bb</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">dl</span><span class="p">)</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="n">intervalx</span>
            <span class="n">xlocator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># e.g., DateLocator has its own nonsingular()</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">xlocator</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="c1"># Default nonsingular for, e.g., MaxNLocator</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">increasing</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                                 <span class="n">expander</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span>
                <span class="n">x0</span> <span class="o">-=</span> <span class="n">delta</span>
                <span class="n">x1</span> <span class="o">+=</span> <span class="n">delta</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_tight</span><span class="p">:</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">xlocator</span><span class="o">.</span><span class="n">view_limits</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scaley</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span><span class="p">:</span>
            <span class="n">yshared</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">dataLim</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">yshared</span><span class="p">]</span>
            <span class="c1"># ignore non-finite data limits if good limits exist</span>
            <span class="n">finite_dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">finite_dl</span><span class="p">):</span>
                <span class="n">dl</span> <span class="o">=</span> <span class="n">finite_dl</span>

            <span class="n">bb</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">dl</span><span class="p">)</span>
            <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="n">intervaly</span>
            <span class="n">ylocator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">ylocator</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">increasing</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                                 <span class="n">expander</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span>
                <span class="n">y0</span> <span class="o">-=</span> <span class="n">delta</span>
                <span class="n">y1</span> <span class="o">+=</span> <span class="n">delta</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_tight</span><span class="p">:</span>
                <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">ylocator</span><span class="o">.</span><span class="n">view_limits</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_axis_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>

    <span class="c1"># Drawing</span>

    <span class="nd">@allow_rasterization</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">inframe</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw everything (plot lines, axes, labels)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span>

        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;No renderer defined&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="n">renderer</span><span class="o">.</span><span class="n">open_group</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">)</span>
        <span class="c1"># prevent triggering call backs during the draw process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">locator</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>

        <span class="n">artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="c1"># the frame draws the edges around the axes patch -- we</span>
        <span class="c1"># decouple these so the patch can be in the background and the</span>
        <span class="c1"># frame in the foreground. Do this before drawing the axis</span>
        <span class="c1"># objects so that the spine has the opportunity to update them.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">):</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">spine</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">inframe</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_axis</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">inframe</span><span class="p">:</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">)</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>

        <span class="c1"># add images to dsu if the backend supports compositing.</span>
        <span class="c1"># otherwise, does the manual compositing  without adding images to dsu.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">renderer</span><span class="o">.</span><span class="n">option_image_nocomposite</span><span class="p">():</span>
            <span class="n">_do_composite</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_do_composite</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">for</span> <span class="n">im</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">:</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">is_saving</span><span class="p">():</span>
            <span class="n">dsu</span> <span class="o">=</span> <span class="p">[(</span><span class="n">a</span><span class="o">.</span><span class="n">zorder</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dsu</span> <span class="o">=</span> <span class="p">[(</span><span class="n">a</span><span class="o">.</span><span class="n">zorder</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                   <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">get_animated</span><span class="p">()</span> <span class="ow">or</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)]</span>

        <span class="n">dsu</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

        <span class="c1"># rasterize artists with negative zorder</span>
        <span class="c1"># if the minimum zorder is negative, start rasterization</span>
        <span class="n">rasterization_zorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rasterization_zorder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">dsu</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">dsu</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">rasterization_zorder</span><span class="p">):</span>
            <span class="n">renderer</span><span class="o">.</span><span class="n">start_rasterizing</span><span class="p">()</span>
            <span class="n">dsu_rasterized</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">dsu</span> <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">rasterization_zorder</span><span class="p">]</span>
            <span class="n">dsu</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">dsu</span> <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">rasterization_zorder</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dsu_rasterized</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># the patch draws the background rectangle -- the frame below</span>
        <span class="c1"># will draw the edges</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">_do_composite</span><span class="p">:</span>
            <span class="c1"># make a composite image, blending alpha</span>
            <span class="c1"># list of (mimage.Image, ox, oy)</span>

            <span class="n">zorder_images</span> <span class="o">=</span> <span class="p">[(</span><span class="n">im</span><span class="o">.</span><span class="n">zorder</span><span class="p">,</span> <span class="n">im</span><span class="p">)</span> <span class="k">for</span> <span class="n">im</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span>
                             <span class="k">if</span> <span class="n">im</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()]</span>
            <span class="n">zorder_images</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

            <span class="n">mag</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">get_image_magnification</span><span class="p">()</span>
            <span class="n">ims</span> <span class="o">=</span> <span class="p">[(</span><span class="n">im</span><span class="o">.</span><span class="n">make_image</span><span class="p">(</span><span class="n">mag</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">im</span><span class="o">.</span><span class="n">get_alpha</span><span class="p">())</span>
                   <span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">im</span> <span class="ow">in</span> <span class="n">zorder_images</span><span class="p">]</span>

            <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">extents</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mag</span> <span class="o">*</span> <span class="p">((</span><span class="nb">round</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)))</span>
            <span class="n">height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mag</span> <span class="o">*</span> <span class="p">((</span><span class="nb">round</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)))</span>
            <span class="n">im</span> <span class="o">=</span> <span class="n">mimage</span><span class="o">.</span><span class="n">from_images</span><span class="p">(</span><span class="n">height</span><span class="p">,</span>
                                    <span class="n">width</span><span class="p">,</span>
                                    <span class="n">ims</span><span class="p">)</span>

            <span class="n">im</span><span class="o">.</span><span class="n">is_grayscale</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">bounds</span>
            <span class="c1"># composite images need special args so they will not</span>
            <span class="c1"># respect z-order for now</span>

            <span class="n">gc</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">new_gc</span><span class="p">()</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">set_clip_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedPath</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_path</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()))</span>

            <span class="n">renderer</span><span class="o">.</span><span class="n">draw_image</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">im</span><span class="p">)</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">dsu_rasterized</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">zorder</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">dsu_rasterized</span><span class="p">:</span>
                <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="n">renderer</span><span class="o">.</span><span class="n">stop_rasterizing</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">zorder</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">dsu</span><span class="p">:</span>
            <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="n">renderer</span><span class="o">.</span><span class="n">close_group</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method can only be used after an initial draw which</span>
<span class="sd">        caches the renderer.  It is used to efficiently update Axes</span>
<span class="sd">        data (axis ticks, labels, etc are not updated)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;draw_artist can only be used after an initial draw which&#39;</span>
                   <span class="s1">&#39; caches the render&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">redraw_in_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method can only be used after an initial draw which</span>
<span class="sd">        caches the renderer.  It is used to efficiently update Axes</span>
<span class="sd">        data (axis ticks, labels, etc are not updated)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;redraw_in_frame can only be used after an initial draw&#39;</span>
                   <span class="s1">&#39; which caches the render&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span><span class="p">,</span> <span class="n">inframe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_renderer_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span>

    <span class="c1"># Axes rectangle characteristics</span>

    <span class="k">def</span> <span class="nf">get_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether the axes rectangle patch is drawn</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span>

    <span class="k">def</span> <span class="nf">set_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether the axes rectangle patch is drawn</span>

<span class="sd">        ACCEPTS: [ *True* | *False* ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether axis below is true or not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span>

    <span class="k">def</span> <span class="nf">set_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether the axis ticks and gridlines are above or below most</span>
<span class="sd">        artists</span>

<span class="sd">        ACCEPTS: [ *True* | *False* ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="nd">@docstring.dedent_interpd</span>
    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Turn the axes grids on or off.</span>

<span class="sd">        Call signature::</span>

<span class="sd">           grid(self, b=None, which=&#39;major&#39;, axis=&#39;both&#39;, **kwargs)</span>

<span class="sd">        Set the axes grids on or off; *b* is a boolean.  (For MATLAB</span>
<span class="sd">        compatibility, *b* may also be a string, &#39;on&#39; or &#39;off&#39;.)</span>

<span class="sd">        If *b* is *None* and ``len(kwargs)==0``, toggle the grid state.  If</span>
<span class="sd">        *kwargs* are supplied, it is assumed that you want a grid and *b*</span>
<span class="sd">        is thus set to *True*.</span>

<span class="sd">        *which* can be &#39;major&#39; (default), &#39;minor&#39;, or &#39;both&#39; to control</span>
<span class="sd">        whether major tick grids, minor tick grids, or both are affected.</span>

<span class="sd">        *axis* can be &#39;both&#39; (default), &#39;x&#39;, or &#39;y&#39; to control which</span>
<span class="sd">        set of gridlines are drawn.</span>

<span class="sd">        *kwargs* are used to set the grid line properties, e.g.,::</span>

<span class="sd">           ax.grid(color=&#39;r&#39;, linestyle=&#39;-&#39;, linewidth=2)</span>

<span class="sd">        Valid :class:`~matplotlib.lines.Line2D` kwargs are</span>

<span class="sd">        %(Line2D)s</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">_string_to_bool</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ticklabel_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the `~matplotlib.ticker.ScalarFormatter` used by</span>
<span class="sd">        default for linear axes.</span>

<span class="sd">        Optional keyword arguments:</span>

<span class="sd">          ============   =========================================</span>
<span class="sd">          Keyword        Description</span>
<span class="sd">          ============   =========================================</span>
<span class="sd">          *style*        [ &#39;sci&#39; (or &#39;scientific&#39;) | &#39;plain&#39; ]</span>
<span class="sd">                         plain turns off scientific notation</span>
<span class="sd">          *scilimits*    (m, n), pair of integers; if *style*</span>
<span class="sd">                         is &#39;sci&#39;, scientific notation will</span>
<span class="sd">                         be used for numbers outside the range</span>
<span class="sd">                         10`m`:sup: to 10`n`:sup:.</span>
<span class="sd">                         Use (0,0) to include all numbers.</span>
<span class="sd">          *useOffset*    [True | False | offset]; if True,</span>
<span class="sd">                         the offset will be calculated as needed;</span>
<span class="sd">                         if False, no offset will be used; if a</span>
<span class="sd">                         numeric offset is specified, it will be</span>
<span class="sd">                         used.</span>
<span class="sd">          *axis*         [ &#39;x&#39; | &#39;y&#39; | &#39;both&#39; ]</span>
<span class="sd">          *useLocale*    If True, format the number according to</span>
<span class="sd">                         the current locale.  This affects things</span>
<span class="sd">                         such as the character used for the</span>
<span class="sd">                         decimal separator.  If False, use</span>
<span class="sd">                         C-style (English) formatting.  The</span>
<span class="sd">                         default setting is controlled by the</span>
<span class="sd">                         axes.formatter.use_locale rcparam.</span>
<span class="sd">          ============   =========================================</span>

<span class="sd">        Only the major ticks are affected.</span>
<span class="sd">        If the method is called when the</span>
<span class="sd">        :class:`~matplotlib.ticker.ScalarFormatter` is not the</span>
<span class="sd">        :class:`~matplotlib.ticker.Formatter` being used, an</span>
<span class="sd">        :exc:`AttributeError` will be raised.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">style</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">scilimits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;scilimits&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">useOffset</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;useOffset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">useLocale</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;useLocale&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;axis&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">scilimits</span>
                <span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># check that both are numbers</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;scilimits must be a sequence of 2 integers&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">style</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;sci&#39;</span><span class="p">:</span>
            <span class="n">sb</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;plain&#39;</span><span class="p">,</span> <span class="s1">&#39;comma&#39;</span><span class="p">]:</span>
            <span class="n">sb</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">&#39;plain&#39;</span><span class="p">:</span>
                <span class="n">cb</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cb</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;comma style remains to be added&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">sb</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is not a valid style value&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="n">sb</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="n">sb</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_powerlimits</span><span class="p">(</span><span class="n">scilimits</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_powerlimits</span><span class="p">(</span><span class="n">scilimits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">useOffset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="n">useOffset</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="n">useOffset</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">useLocale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useLocale</span><span class="p">(</span><span class="n">useLocale</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;both&#39;</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useLocale</span><span class="p">(</span><span class="n">useLocale</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s2">&quot;This method only works with the ScalarFormatter.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">locator_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Control behavior of tick locators.</span>

<span class="sd">        Keyword arguments:</span>

<span class="sd">        *axis*</span>
<span class="sd">            [&#39;x&#39; | &#39;y&#39; | &#39;both&#39;]  Axis on which to operate;</span>
<span class="sd">            default is &#39;both&#39;.</span>

<span class="sd">        *tight*</span>
<span class="sd">            [True | False | None] Parameter passed to :meth:`autoscale_view`.</span>
<span class="sd">            Default is None, for no change.</span>

<span class="sd">        Remaining keyword arguments are passed to directly to the</span>
<span class="sd">        :meth:`~matplotlib.ticker.MaxNLocator.set_params` method.</span>

<span class="sd">        Typically one might want to reduce the maximum number</span>
<span class="sd">        of ticks and use tight bounds when plotting small</span>
<span class="sd">        subplots, for example::</span>

<span class="sd">            ax.locator_params(tight=True, nbins=4)</span>

<span class="sd">        Because the locator is involved in autoscaling,</span>
<span class="sd">        :meth:`autoscale_view` is called automatically after</span>
<span class="sd">        the parameters are changed.</span>

<span class="sd">        This presently works only for the</span>
<span class="sd">        :class:`~matplotlib.ticker.MaxNLocator` used</span>
<span class="sd">        by default on linear axes, but it may be generalized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_x</span> <span class="o">=</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]</span>
        <span class="n">_y</span> <span class="o">=</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">_x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_y</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="n">_x</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">_y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tick_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the appearance of ticks and tick labels.</span>

<span class="sd">        Keyword arguments:</span>

<span class="sd">        *axis* : [&#39;x&#39; | &#39;y&#39; | &#39;both&#39;]</span>
<span class="sd">            Axis on which to operate; default is &#39;both&#39;.</span>

<span class="sd">        *reset* : [True | False]</span>
<span class="sd">            If *True*, set all parameters to defaults</span>
<span class="sd">            before processing other keyword arguments.  Default is</span>
<span class="sd">            *False*.</span>

<span class="sd">        *which* : [&#39;major&#39; | &#39;minor&#39; | &#39;both&#39;]</span>
<span class="sd">            Default is &#39;major&#39;; apply arguments to *which* ticks.</span>

<span class="sd">        *direction* : [&#39;in&#39; | &#39;out&#39; | &#39;inout&#39;]</span>
<span class="sd">            Puts ticks inside the axes, outside the axes, or both.</span>

<span class="sd">        *length*</span>
<span class="sd">            Tick length in points.</span>

<span class="sd">        *width*</span>
<span class="sd">            Tick width in points.</span>

<span class="sd">        *color*</span>
<span class="sd">            Tick color; accepts any mpl color spec.</span>

<span class="sd">        *pad*</span>
<span class="sd">            Distance in points between tick and label.</span>

<span class="sd">        *labelsize*</span>
<span class="sd">            Tick label font size in points or as a string (e.g., &#39;large&#39;).</span>

<span class="sd">        *labelcolor*</span>
<span class="sd">            Tick label color; mpl color spec.</span>

<span class="sd">        *colors*</span>
<span class="sd">            Changes the tick color and the label color to the same value:</span>
<span class="sd">            mpl color spec.</span>

<span class="sd">        *zorder*</span>
<span class="sd">            Tick and label zorder.</span>

<span class="sd">        *bottom*, *top*, *left*, *right* : [bool | &#39;on&#39; | &#39;off&#39;]</span>
<span class="sd">            controls whether to draw the respective ticks.</span>

<span class="sd">        *labelbottom*, *labeltop*, *labelleft*, *labelright*</span>
<span class="sd">            Boolean or [&#39;on&#39; | &#39;off&#39;], controls whether to draw the</span>
<span class="sd">            respective tick labels.</span>

<span class="sd">        Example::</span>

<span class="sd">            ax.tick_params(direction=&#39;out&#39;, length=6, width=2, colors=&#39;r&#39;)</span>

<span class="sd">        This will make all major ticks be red, pointing out of the box,</span>
<span class="sd">        and with dimensions 6 points by 2 points.  Tick labels will</span>
<span class="sd">        also be red.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="n">xkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelleft&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelright&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">xkw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="n">ykw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labeltop&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelbottom&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">ykw</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axis_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;turn off the axis&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">set_axis_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;turn on the axis&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_axis_bgcolor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the axis background color&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbg</span>

    <span class="k">def</span> <span class="nf">set_axis_bgcolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the axes background color</span>

<span class="sd">        ACCEPTS: any matplotlib color - see</span>
<span class="sd">        :func:`~matplotlib.pyplot.colors`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbg</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># data limits, ticks, tick labels, and formatting</span>

    <span class="k">def</span> <span class="nf">invert_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Invert the x-axis.&quot;</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">xaxis_inverted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns *True* if the x-axis is inverted.&quot;&quot;&quot;</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="n">left</span>

    <span class="k">def</span> <span class="nf">get_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the x-axis numerical bounds where::</span>

<span class="sd">          lowerBound &lt; upperBound</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">right</span><span class="p">,</span> <span class="n">left</span>

    <span class="k">def</span> <span class="nf">set_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the lower and upper numerical bounds of the x-axis.</span>
<span class="sd">        This method will honor axes inversion regardless of parameter order.</span>
<span class="sd">        It will not change the _autoscaleXon attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_inverted</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the x-axis range [*left*, *right*]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          set_xlim(self, *args, **kwargs):</span>

<span class="sd">        Set the data limits for the xaxis</span>

<span class="sd">        Examples::</span>

<span class="sd">          set_xlim((left, right))</span>
<span class="sd">          set_xlim(left, right)</span>
<span class="sd">          set_xlim(left=1) # right unchanged</span>
<span class="sd">          set_xlim(right=1) # left unchanged</span>

<span class="sd">        Keyword arguments:</span>

<span class="sd">          *left*: scalar</span>
<span class="sd">            The left xlim; *xmin*, the previous name, may still be used</span>

<span class="sd">          *right*: scalar</span>
<span class="sd">            The right xlim; *xmax*, the previous name, may still be used</span>

<span class="sd">          *emit*: [ *True* | *False* ]</span>
<span class="sd">            Notify observers of limit change</span>

<span class="sd">          *auto*: [ *True* | *False* | *None* ]</span>
<span class="sd">            Turn *x* autoscaling on (*True*), off (*False*; default),</span>
<span class="sd">            or leave unchanged (*None*)</span>

<span class="sd">        Note, the *left* (formerly *xmin*) value may be greater than</span>
<span class="sd">        the *right* (formerly *xmax*).</span>
<span class="sd">        For example, suppose *x* is years before present.</span>
<span class="sd">        Then one might use::</span>

<span class="sd">          set_ylim(5000, 0)</span>

<span class="sd">        so 5000 years ago is on the left of the plot and the</span>
<span class="sd">        present is on the right.</span>

<span class="sd">        Returns the current xlimits as a length 2 tuple</span>

<span class="sd">        ACCEPTS: length 2 sequence of floats</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;xmin&#39;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;xmin&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;xmax&#39;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;xmax&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unrecognized kwargs: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                             <span class="nb">list</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">(</span><span class="n">kw</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">left</span><span class="p">):</span>
            <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">left</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_process_unit_info</span><span class="p">(</span><span class="n">xdata</span><span class="o">=</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>

        <span class="n">old_left</span><span class="p">,</span> <span class="n">old_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">old_left</span>
        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">old_right</span>

        <span class="k">if</span> <span class="n">left</span> <span class="o">==</span> <span class="n">right</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="p">(</span><span class="s1">&#39;Attempting to set identical left==right results</span><span class="se">\n</span><span class="s1">&#39;</span>
                 <span class="s1">&#39;in singular transformations; automatically expanding.</span><span class="se">\n</span><span class="s1">&#39;</span>
                 <span class="s1">&#39;left=</span><span class="si">%s</span><span class="s1">, right=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">increasing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">auto</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">emit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;xlim_changed&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Call all of the other x-axes that are shared with this one</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">,</span>
                                   <span class="n">emit</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">figure</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="ow">and</span>
                            <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
                        <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>

    <span class="k">def</span> <span class="nf">get_xscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
    <span class="n">get_xscale</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s2">&quot;Return the xaxis scale string: </span><span class="si">%s</span><span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mscale</span><span class="o">.</span><span class="n">get_scale_names</span><span class="p">()))</span>

    <span class="nd">@docstring.dedent_interpd</span>
    <span class="k">def</span> <span class="nf">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          set_xscale(value)</span>

<span class="sd">        Set the scaling of the x-axis: %(scale)s</span>

<span class="sd">        ACCEPTS: [%(scale)s]</span>

<span class="sd">        Different kwargs are accepted, depending on the scale:</span>
<span class="sd">        %(scale_docs)s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the scale is being set to log, clip nonposx to prevent headaches</span>
        <span class="c1"># around zero</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span> <span class="ow">and</span> <span class="s1">&#39;nonposx&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;nonposx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;clip&#39;</span>

        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_shared_x_axes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scaley</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the x ticks as a list of locations&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklocs</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_xticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the x ticks with list of *ticks*</span>

<span class="sd">        ACCEPTS: sequence of floats</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">get_xmajorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the xtick labels as a list of :class:`~matplotlib.text.Text`</span>
<span class="sd">        instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Text xticklabel&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_majorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_xminorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the x minor tick labels as a list of</span>
<span class="sd">        :class:`matplotlib.text.Text` instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Text xticklabel&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_minorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_xticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the x tick labels as a list of :class:`~matplotlib.text.Text`</span>
<span class="sd">        instances.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        minor : bool</span>
<span class="sd">           If True return the minor ticklabels,</span>
<span class="sd">           else return the major ticklabels</span>

<span class="sd">        which : None, (&#39;minor&#39;, &#39;major&#39;, &#39;both&#39;)</span>
<span class="sd">           Overrides `minor`.</span>

<span class="sd">           Selects which ticklabels to return</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ret : list</span>
<span class="sd">           List of :class:`~matplotlib.text.Text` instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Text xticklabel&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span>
                                                           <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">))</span>

    <span class="nd">@docstring.dedent_interpd</span>
    <span class="k">def</span> <span class="nf">set_xticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          set_xticklabels(labels, fontdict=None, minor=False, **kwargs)</span>

<span class="sd">        Set the xtick labels with list of strings *labels*. Return a</span>
<span class="sd">        list of axis text instances.</span>

<span class="sd">        *kwargs* set the :class:`~matplotlib.text.Text` properties.</span>
<span class="sd">        Valid properties are</span>
<span class="sd">        %(Text)s</span>

<span class="sd">        ACCEPTS: sequence of strings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fontdict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fontdict</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span>
                                        <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">invert_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invert the y-axis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">yaxis_inverted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns *True* if the y-axis is inverted.&quot;&quot;&quot;</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">top</span> <span class="o">&lt;</span> <span class="n">bottom</span>

    <span class="k">def</span> <span class="nf">get_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return y-axis numerical bounds in the form of</span>
<span class="sd">        ``lowerBound &lt; upperBound``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">bottom</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">top</span><span class="p">,</span> <span class="n">bottom</span>

    <span class="k">def</span> <span class="nf">set_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the lower and upper numerical bounds of the y-axis.</span>
<span class="sd">        This method will honor axes inversion regardless of parameter order.</span>
<span class="sd">        It will not change the _autoscaleYon attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_inverted</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the y-axis range [*bottom*, *top*]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          set_ylim(self, *args, **kwargs):</span>

<span class="sd">        Set the data limits for the yaxis</span>

<span class="sd">        Examples::</span>

<span class="sd">          set_ylim((bottom, top))</span>
<span class="sd">          set_ylim(bottom, top)</span>
<span class="sd">          set_ylim(bottom=1) # top unchanged</span>
<span class="sd">          set_ylim(top=1) # bottom unchanged</span>

<span class="sd">        Keyword arguments:</span>

<span class="sd">          *bottom*: scalar</span>
<span class="sd">            The bottom ylim; the previous name, *ymin*, may still be used</span>

<span class="sd">          *top*: scalar</span>
<span class="sd">            The top ylim; the previous name, *ymax*, may still be used</span>

<span class="sd">          *emit*: [ *True* | *False* ]</span>
<span class="sd">            Notify observers of limit change</span>

<span class="sd">          *auto*: [ *True* | *False* | *None* ]</span>
<span class="sd">            Turn *y* autoscaling on (*True*), off (*False*; default),</span>
<span class="sd">            or leave unchanged (*None*)</span>

<span class="sd">        Note, the *bottom* (formerly *ymin*) value may be greater than</span>
<span class="sd">        the *top* (formerly *ymax*).</span>
<span class="sd">        For example, suppose *y* is depth in the ocean.</span>
<span class="sd">        Then one might use::</span>

<span class="sd">          set_ylim(5000, 0)</span>

<span class="sd">        so 5000 m depth is at the bottom of the plot and the</span>
<span class="sd">        surface, 0 m, is at the top.</span>

<span class="sd">        Returns the current ylimits as a length 2 tuple</span>

<span class="sd">        ACCEPTS: length 2 sequence of floats</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;ymin&#39;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;ymin&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;ymax&#39;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;ymax&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unrecognized kwargs: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                             <span class="nb">list</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">(</span><span class="n">kw</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">bottom</span><span class="p">):</span>
            <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">bottom</span>

        <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">bottom</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">top</span><span class="p">)</span>

        <span class="n">old_bottom</span><span class="p">,</span> <span class="n">old_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">old_bottom</span>
        <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">old_top</span>

        <span class="k">if</span> <span class="n">bottom</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="p">(</span><span class="s1">&#39;Attempting to set identical bottom==top results</span><span class="se">\n</span><span class="s1">&#39;</span>
                 <span class="s1">&#39;in singular transformations; automatically expanding.</span><span class="se">\n</span><span class="s1">&#39;</span>
                 <span class="s1">&#39;bottom=</span><span class="si">%s</span><span class="s1">, top=</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>

        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">increasing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span> <span class="o">=</span> <span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">auto</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">emit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">&#39;ylim_changed&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Call all of the other y-axes that are shared with this one</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span><span class="p">,</span>
                                   <span class="n">emit</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">figure</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="ow">and</span>
                            <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
                        <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span>

    <span class="k">def</span> <span class="nf">get_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
    <span class="n">get_yscale</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s2">&quot;Return the yaxis scale string: </span><span class="si">%s</span><span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mscale</span><span class="o">.</span><span class="n">get_scale_names</span><span class="p">()))</span>

    <span class="nd">@docstring.dedent_interpd</span>
    <span class="k">def</span> <span class="nf">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          set_yscale(value)</span>

<span class="sd">        Set the scaling of the y-axis: %(scale)s</span>

<span class="sd">        ACCEPTS: [%(scale)s]</span>

<span class="sd">        Different kwargs are accepted, depending on the scale:</span>
<span class="sd">        %(scale_docs)s</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the scale is being set to log, clip nonposy to prevent headaches</span>
        <span class="c1"># around zero</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span> <span class="ow">and</span> <span class="s1">&#39;nonposy&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;nonposy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;clip&#39;</span>

        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_shared_y_axes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the y ticks as a list of locations&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklocs</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_yticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the y ticks with list of *ticks*</span>

<span class="sd">        ACCEPTS: sequence of floats</span>

<span class="sd">        Keyword arguments:</span>

<span class="sd">          *minor*: [ *False* | *True* ]</span>
<span class="sd">            Sets the minor ticks if *True*</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">get_ymajorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the major y tick labels as a list of</span>
<span class="sd">        :class:`~matplotlib.text.Text` instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Text yticklabel&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_majorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yminorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the minor y tick labels as a list of</span>
<span class="sd">        :class:`~matplotlib.text.Text` instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Text yticklabel&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the x tick labels as a list of :class:`~matplotlib.text.Text`</span>
<span class="sd">        instances.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        minor : bool</span>
<span class="sd">           If True return the minor ticklabels,</span>
<span class="sd">           else return the major ticklabels</span>

<span class="sd">        which : None, (&#39;minor&#39;, &#39;major&#39;, &#39;both&#39;)</span>
<span class="sd">           Overrides `minor`.</span>

<span class="sd">           Selects which ticklabels to return</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ret : list</span>
<span class="sd">           List of :class:`~matplotlib.text.Text` instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Text yticklabel&#39;</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span>
                                                           <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">))</span>

    <span class="nd">@docstring.dedent_interpd</span>
    <span class="k">def</span> <span class="nf">set_yticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          set_yticklabels(labels, fontdict=None, minor=False, **kwargs)</span>

<span class="sd">        Set the y tick labels with list of strings *labels*.  Return a list of</span>
<span class="sd">        :class:`~matplotlib.text.Text` instances.</span>

<span class="sd">        *kwargs* set :class:`~matplotlib.text.Text` properties for the labels.</span>
<span class="sd">        Valid properties are</span>
<span class="sd">        %(Text)s</span>

<span class="sd">        ACCEPTS: sequence of strings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fontdict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fontdict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span>
                                         <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">xaxis_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets up x-axis ticks and labels that treat the x data as dates.</span>

<span class="sd">        *tz* is a timezone string or :class:`tzinfo` instance.</span>
<span class="sd">        Defaults to rc value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># should be enough to inform the unit conversion interface</span>
        <span class="c1"># dates are coming in</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_date</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">yaxis_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets up y-axis ticks and labels that treat the y data as dates.</span>

<span class="sd">        *tz* is a timezone string or :class:`tzinfo` instance.</span>
<span class="sd">        Defaults to rc value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_date</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_xdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *x* string formatted.  This function will use the attribute</span>
<span class="sd">        self.fmt_xdata if it is callable, else will fall back on the xaxis</span>
<span class="sd">        major formatter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">format_ydata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return y string formatted.  This function will use the</span>
<span class="sd">        :attr:`fmt_ydata` attribute if it is callable, else will fall</span>
<span class="sd">        back on the yaxis major formatter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a format string formatting the *x*, *y* coord&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="s1">&#39;???&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_xdata</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="s1">&#39;???&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_ydata</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;x=</span><span class="si">%s</span><span class="s1"> y=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">minorticks_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Add autoscaling minor ticks to the axes.&#39;</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">):</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">_scale</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">subs</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;symlog&#39;</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">_scale</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span>
                    <span class="n">mticker</span><span class="o">.</span><span class="n">SymmetricalLogLocator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">subs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">minorticks_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove minor ticks from the axes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>

    <span class="c1"># Interactive manipulation</span>

    <span class="k">def</span> <span class="nf">can_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if this axes supports the zoom box button functionality.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">can_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *True* if this axes supports any pan/zoom button functionality.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">get_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether the axes responds to navigation commands</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span>

    <span class="k">def</span> <span class="nf">set_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether the axes responds to navigation toolbar commands</span>

<span class="sd">        ACCEPTS: [ *True* | *False* ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the navigation toolbar button status: &#39;PAN&#39;, &#39;ZOOM&#39;, or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span>

    <span class="k">def</span> <span class="nf">set_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the navigation toolbar button status;</span>

<span class="sd">        .. warning::</span>
<span class="sd">            this is not a user-API function.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">_get_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save information required to reproduce the current view.</span>

<span class="sd">        Called before a view is changed, such as during a pan or zoom</span>
<span class="sd">        initiated by the user. You may return any information you deem</span>
<span class="sd">        necessary to describe the view.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation saves the view limits. You *must* implement</span>
<span class="sd">            :meth:`_set_view` if you implement this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply a previously saved view.</span>

<span class="sd">        Called when restoring a view, such as with the navigation buttons.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation restores the view limits. You *must*</span>
<span class="sd">            implement :meth:`_get_view` if you implement this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_set_view_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">twinx</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">twiny</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update view from a selection bbox.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation sets the view limits to the bbox directly.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        bbox : tuple</span>
<span class="sd">            The selected bounding box limits, in *display* coordinates.</span>

<span class="sd">        direction : str</span>
<span class="sd">            The direction to apply the bounding box.</span>
<span class="sd">                * `&#39;in&#39;` - The bounding box describes the view directly, i.e.,</span>
<span class="sd">                           it zooms in.</span>
<span class="sd">                * `&#39;out&#39;` - The bounding box describes the size to make the</span>
<span class="sd">                            existing view, i.e., it zooms out.</span>

<span class="sd">        mode : str or None</span>
<span class="sd">            The selection mode, whether to apply the bounding box in only the</span>
<span class="sd">            `&#39;x&#39;` direction, `&#39;y&#39;` direction or both (`None`).</span>

<span class="sd">        twinx : bool</span>
<span class="sd">            Whether this axis is twinned in the *x*-direction.</span>

<span class="sd">        twiny : bool</span>
<span class="sd">            Whether this axis is twinned in the *y*-direction.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">bbox</span>

        <span class="c1"># zoom to rect</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
        <span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span> <span class="o">=</span> <span class="n">inverse</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">))</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">inverse</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">Xmin</span><span class="p">,</span> <span class="n">Xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">Ymin</span><span class="p">,</span> <span class="n">Ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">twinx</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">Xmin</span><span class="p">,</span> <span class="n">Xmax</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Xmin</span> <span class="o">&lt;</span> <span class="n">Xmax</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">lastx</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">lastx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">lastx</span><span class="p">,</span> <span class="n">x</span>
                <span class="k">if</span> <span class="n">x0</span> <span class="o">&lt;</span> <span class="n">Xmin</span><span class="p">:</span>
                    <span class="n">x0</span> <span class="o">=</span> <span class="n">Xmin</span>
                <span class="k">if</span> <span class="n">x1</span> <span class="o">&gt;</span> <span class="n">Xmax</span><span class="p">:</span>
                    <span class="n">x1</span> <span class="o">=</span> <span class="n">Xmax</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">lastx</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">lastx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">lastx</span><span class="p">,</span> <span class="n">x</span>
                <span class="k">if</span> <span class="n">x0</span> <span class="o">&gt;</span> <span class="n">Xmin</span><span class="p">:</span>
                    <span class="n">x0</span> <span class="o">=</span> <span class="n">Xmin</span>
                <span class="k">if</span> <span class="n">x1</span> <span class="o">&lt;</span> <span class="n">Xmax</span><span class="p">:</span>
                    <span class="n">x1</span> <span class="o">=</span> <span class="n">Xmax</span>

        <span class="k">if</span> <span class="n">twiny</span><span class="p">:</span>
            <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">Ymin</span><span class="p">,</span> <span class="n">Ymax</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Ymin</span> <span class="o">&lt;</span> <span class="n">Ymax</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">lasty</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">lasty</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">y</span>
                <span class="k">if</span> <span class="n">y0</span> <span class="o">&lt;</span> <span class="n">Ymin</span><span class="p">:</span>
                    <span class="n">y0</span> <span class="o">=</span> <span class="n">Ymin</span>
                <span class="k">if</span> <span class="n">y1</span> <span class="o">&gt;</span> <span class="n">Ymax</span><span class="p">:</span>
                    <span class="n">y1</span> <span class="o">=</span> <span class="n">Ymax</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">lasty</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">lasty</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">y</span>
                <span class="k">if</span> <span class="n">y0</span> <span class="o">&gt;</span> <span class="n">Ymin</span><span class="p">:</span>
                    <span class="n">y0</span> <span class="o">=</span> <span class="n">Ymin</span>
                <span class="k">if</span> <span class="n">y1</span> <span class="o">&lt;</span> <span class="n">Ymax</span><span class="p">:</span>
                    <span class="n">y1</span> <span class="o">=</span> <span class="n">Ymax</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;in&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Xmax</span> <span class="o">/</span> <span class="n">Xmin</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x1</span> <span class="o">/</span> <span class="n">x0</span><span class="p">)</span>
                <span class="n">rx1</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Xmin</span> <span class="o">/</span> <span class="n">x0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Xmin</span>
                <span class="n">rx2</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Xmax</span> <span class="o">/</span> <span class="n">x0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Xmin</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="n">Xmax</span> <span class="o">-</span> <span class="n">Xmin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
                <span class="n">rx1</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Xmin</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Xmin</span>
                <span class="n">rx2</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Xmax</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Xmin</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Ymax</span> <span class="o">/</span> <span class="n">Ymin</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y1</span> <span class="o">/</span> <span class="n">y0</span><span class="p">)</span>
                <span class="n">ry1</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Ymin</span> <span class="o">/</span> <span class="n">y0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Ymin</span>
                <span class="n">ry2</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Ymax</span> <span class="o">/</span> <span class="n">y0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Ymin</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="n">Ymax</span> <span class="o">-</span> <span class="n">Ymin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>
                <span class="n">ry1</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Ymin</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Ymin</span>
                <span class="n">ry2</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Ymax</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Ymin</span>

            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">rx1</span><span class="p">,</span> <span class="n">rx2</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ry1</span><span class="p">,</span> <span class="n">ry2</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">rx1</span><span class="p">,</span> <span class="n">rx2</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ry1</span><span class="p">,</span> <span class="n">ry2</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">start_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when a pan operation has started.</span>

<span class="sd">        *x*, *y* are the mouse coordinates in display coords.</span>
<span class="sd">        button is the mouse button number:</span>

<span class="sd">        * 1: LEFT</span>
<span class="sd">        * 2: MIDDLE</span>
<span class="sd">        * 3: RIGHT</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span>
            <span class="n">lim</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans_inverse</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">bbox</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">end_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when a pan operation completes (when the mouse button</span>
<span class="sd">        is up.)</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>

    <span class="k">def</span> <span class="nf">drag_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when the mouse moves during a pan operation.</span>

<span class="sd">        *button* is the mouse button number:</span>

<span class="sd">        * 1: LEFT</span>
<span class="sd">        * 2: MIDDLE</span>
<span class="sd">        * 3: RIGHT</span>

<span class="sd">        *key* is a &quot;shift&quot; key</span>

<span class="sd">        *x*, *y* are the mouse coordinates in display coords.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;control&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;shift&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="n">dx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">dy</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">translated</span><span class="p">(</span><span class="o">-</span><span class="n">dx</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">)</span> \
                <span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
                <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dx</span>

                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">))</span>
                <span class="n">start</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
                <span class="n">oldpoints</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">lim</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans</span><span class="p">)</span>
                <span class="n">newpoints</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">oldpoints</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">(</span><span class="n">newpoints</span><span class="p">)</span> \
                    <span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Overflow while panning&#39;</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_cursor_props</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the cursor propertiess as a (*linewidth*, *color*)</span>
<span class="sd">        tuple, where *linewidth* is a float and *color* is an RGBA</span>
<span class="sd">        tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cursorProps</span>

    <span class="k">def</span> <span class="nf">set_cursor_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the cursor property as::</span>

<span class="sd">          ax.set_cursor_props(linewidth, color)</span>

<span class="sd">        or::</span>

<span class="sd">          ax.set_cursor_props((linewidth, color))</span>

<span class="sd">        ACCEPTS: a (*float*, *color*) tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">lw</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">lw</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;args must be a (linewidth, color) tuple&#39;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">colorConverter</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cursorProps</span> <span class="o">=</span> <span class="n">lw</span><span class="p">,</span> <span class="n">c</span>

    <span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return a list of child artists&quot;&quot;&quot;</span>
        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">))</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">children</span>

    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test whether the mouse event occured in the axes.</span>

<span class="sd">        Returns *True* / *False*, {}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">six</span><span class="o">.</span><span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contains_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns *True* if the point (tuple of x,y) is inside the axes</span>
<span class="sd">        (the area defined by the its patch). A pixel coordinate is</span>
<span class="sd">        required.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">            pick(mouseevent)</span>

<span class="sd">        each child artist will fire a pick event if mouseevent is over</span>
<span class="sd">        the artist and the artist has picker set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_default_bbox_extra_artists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">artist</span> <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">artist</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()]</span>

    <span class="k">def</span> <span class="nf">get_tightbbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">call_axes_locator</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the tight bounding box of the axes.</span>
<span class="sd">        The dimension of the Bbox in canvas coordinate.</span>

<span class="sd">        If *call_axes_locator* is *False*, it does not call the</span>
<span class="sd">        _axes_locator attribute, which is necessary to get the correct</span>
<span class="sd">        bounding box. ``call_axes_locator==False`` can be used if the</span>
<span class="sd">        caller is only intereted in the relative size of the tightbbox</span>
<span class="sd">        compared to the axes bbox.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">bb</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">None</span>

        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">locator</span> <span class="ow">and</span> <span class="n">call_axes_locator</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>

        <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>

        <span class="n">bb_xaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bb_xaxis</span><span class="p">:</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bb_xaxis</span><span class="p">)</span>

        <span class="n">bb_yaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bb_yaxis</span><span class="p">:</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bb_yaxis</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">OffsetBox</span><span class="p">)</span> <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>

        <span class="n">_bbox</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bb</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">_bbox</span>

    <span class="k">def</span> <span class="nf">_make_twin_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">kl</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        make a twinx axes of self. This is used for twinx and twiny.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="bp">True</span><span class="p">),</span> <span class="o">*</span><span class="n">kl</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">twinx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          ax = twinx()</span>

<span class="sd">        create a twin of Axes for generating a plot with a sharex</span>
<span class="sd">        x-axis but independent y axis.  The y-axis of self will have</span>
<span class="sd">        ticks on left and the returned axes will have ticks on the</span>
<span class="sd">        right.</span>

<span class="sd">        .. note::</span>
<span class="sd">            For those who are &#39;picking&#39; artists while using twinx, pick</span>
<span class="sd">            events are only called for the artists in the top-most axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_right</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_offset_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">twiny</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call signature::</span>

<span class="sd">          ax = twiny()</span>

<span class="sd">        create a twin of Axes for generating a plot with a shared</span>
<span class="sd">        y-axis but independent x axis.  The x-axis of self will have</span>
<span class="sd">        ticks on bottom and the returned axes will have ticks on the</span>
<span class="sd">        top.</span>

<span class="sd">        .. note::</span>
<span class="sd">            For those who are &#39;picking&#39; artists while using twiny, pick</span>
<span class="sd">            events are only called for the artists in the top-most axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharey</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_top</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_bottom</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">get_shared_x_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Return a copy of the shared axes Grouper object for x axes&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span>

    <span class="k">def</span> <span class="nf">get_shared_y_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Return a copy of the shared axes Grouper object for y axes&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>